[logic]
active = sr_idle@wait

[sr_idle@wait]
on_actor_inside = {=sad_is_actor_gulag_enemy(sad_b4)} sr_idle@enemies_around %=add_cs_text(sad_dont_sleep)%, sr_idle@run %=run_tutorial(tutorial_sleep)%

[sr_idle@enemies_around]
on_actor_outside = sr_idle@wait %=del_cs_text%

[sr_idle@run]
on_info = {+tutorial_sleep} %-tutorial_sleep =run_tutorial(tutorial_sleep)%
on_actor_outside = {+tutorial_sleep} sr_idle@wait, sr_idle@wait %=stop_tutorial%
on_info2 = {!has_active_tutorial -sleep_active} sr_idle@wait
on_info3 = {=sad_is_actor_gulag_enemy(sad_b4)} sr_idle@enemies_around %=stop_tutorial%