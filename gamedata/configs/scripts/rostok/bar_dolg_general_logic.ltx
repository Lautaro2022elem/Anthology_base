[logic@bar_dolg_general_animpoint_kamp1]
active = animpoint@bar_dolg_general_camp_work_1
prior = 45

[logic@bar_dolg_general_animpoint_kamp2]
active = animpoint@bar_dolg_general_camp_work_2
prior = 45

[logic@bar_dolg_general_animpoint_kamp3]
active = animpoint@bar_dolg_general_camp_work_3
prior = 45

[logic@bar_dolg_general_animpoint_kamp4]
active = animpoint@bar_dolg_general_camp_work_4
prior = 45

[logic@bar_dolg_general_animpoint_kamp5]
active = animpoint@bar_dolg_general_camp_work_5
prior = 45

[logic@bar_dolg_general_animpoint_kamp6]
active = animpoint@bar_dolg_general_camp_work_6
prior = 45

[logic@bar_dolg_general_animpoint_kamp7]
active = animpoint@bar_dolg_general_camp_work_7
prior = 45

[logic@bar_dolg_general_animpoint_kamp8]
active = animpoint@bar_dolg_general_camp_work_8
prior = 45

[logic@bar_dolg_general_animpoint_kamp9]
active = animpoint@bar_dolg_general_camp_work_9
prior = 45

[logic@bar_dolg_general_animpoint_kamp10]
active = animpoint@bar_dolg_general_camp_work_10
prior = 45

[logic@bar_dolg_general_animpoint_kamp11]
active = animpoint@bar_dolg_general_camp_work_11
prior = 45

[logic@bar_dolg_general_animpoint_kamp12]
active = animpoint@bar_dolg_general_camp_work_12
prior = 45

[logic@bar_dolg_general_animpoint_kamp13]
active = animpoint@bar_dolg_general_camp_work_13
prior = 45

[logic@bar_dolg_general_animpoint_kamp14]
active = animpoint@bar_dolg_general_camp_work_14
prior = 45

[logic@bar_dolg_general_animpoint_kamp15]
active = animpoint@bar_dolg_general_camp_work_15
prior = 45


[animpoint@bar_dolg_general_camp_work_1]
cover_name = bar_dolg_general_animpoint_kamp1
meet = meet
use_camp = true
turn_on_campfire = true

[animpoint@bar_dolg_general_camp_work_2]
cover_name = bar_dolg_general_animpoint_kamp2
meet = meet
use_camp = true
turn_on_campfire = true

[animpoint@bar_dolg_general_camp_work_3]
cover_name = bar_dolg_general_animpoint_kamp3
meet = meet
use_camp = true
turn_on_campfire = true

[animpoint@bar_dolg_general_camp_work_4]
cover_name = bar_dolg_general_animpoint_kamp4
meet = meet
use_camp = true
turn_on_campfire = true

[animpoint@bar_dolg_general_camp_work_5]
cover_name = bar_dolg_general_animpoint_kamp5
meet = meet
use_camp = true
turn_on_campfire = true

[animpoint@bar_dolg_general_camp_work_6]
cover_name = bar_dolg_general_animpoint_kamp6
meet = meet
use_camp = true
turn_on_campfire = true

[animpoint@bar_dolg_general_camp_work_7]
cover_name = bar_dolg_general_animpoint_kamp7
meet = meet
use_camp = true
turn_on_campfire = true

[animpoint@bar_dolg_general_camp_work_8]
cover_name = bar_dolg_general_animpoint_kamp8
meet = meet
use_camp = true
turn_on_campfire = true

[animpoint@bar_dolg_general_camp_work_9]
cover_name = bar_dolg_general_animpoint_kamp9
meet = meet
use_camp = true
turn_on_campfire = true

[animpoint@bar_dolg_general_camp_work_10]
cover_name = bar_dolg_general_animpoint_kamp10
meet = meet
use_camp = true
turn_on_campfire = true

[animpoint@bar_dolg_general_camp_work_11]
cover_name = bar_dolg_general_animpoint_kamp11
meet = meet
use_camp = true
turn_on_campfire = true

[animpoint@bar_dolg_general_camp_work_12]
cover_name = bar_dolg_general_animpoint_kamp12
meet = meet
use_camp = true
turn_on_campfire = true

[animpoint@bar_dolg_general_camp_work_13]
cover_name = bar_dolg_general_animpoint_kamp13
meet = meet
use_camp = true
turn_on_campfire = false

[animpoint@bar_dolg_general_camp_work_14]
cover_name = bar_dolg_general_animpoint_kamp14
meet = meet
use_camp = true
turn_on_campfire = false

[animpoint@bar_dolg_general_camp_work_15]
cover_name = bar_dolg_general_animpoint_kamp15
meet = meet 
use_camp = true
turn_on_campfire = false

[logic@bar_dolg_general_zoneguard]
suitable = {=check_npc_name(bar_dolg_general_zoneguard_stalker)} true
prior = 200
active = walker@zoneguard

[walker@zoneguard]
path_walk = angar_zoneguard_walk
;path_look = angar_zoneguard_look
meet = meet@zoneguard
gather_items_enabled = false
help_wounded_enabled = false
corpse_detection_enabled = false
on_actor_in_zone = bar_angar_warn_zone | %=play_sound(bar_dolg_hangar_bridge_hello)%
;turn_on_campfire = true 

[meet@zoneguard]
use = true
use_wpn = true
;meet_dialog = bar_dolg_zastava

;duty trader
[logic@bar_dolg_general_petrenko]
suitable = {=check_npc_name(bar_dolg_general_petrenko_stalker)} true, {=check_npc_trader} true
prior = 200
active = animpoint@stand
level_spot = trader
trade = items\trade\trade_duty.ltx
can_select_weapon = {=is_warfare} true, false
dont_keep_items = true

[animpoint@stand]
cover_name = bar_dolg_general_petrenko_smart_cover
reach_movement = walk_noweap
avail_animations = jup_b41_novikov_stand
use_camp = false
meet = meet@trader
combat_ignore_cond = {=is_warfare} false, {=actor_true_enemy =check_enemy_name(actor)} false, true
combat_ignore_keep_when_attacked = {=is_warfare} false, true
invulnerable = {=is_warfare} false, {!actor_true_enemy} true, false
reach_distance = 10
gather_items_enabled = false
help_wounded_enabled = false
corpse_detection_enabled = false
on_info = {=obj_on_job(bar_dolg_general:bar_dolg_general_beh_trade_job_1) =job_on_point(bar_dolg_general:bar_dolg_general_beh_trade_job_1:1:2:false)} %=trade_job_give_id(bar_dolg_general:bar_dolg_general_beh_trade_job_1)%

[meet@trader]
close_snd_hello = bar_petrenko_trader_meet
close_snd_bye 	= bar_petrenko_trader_meet_bye
close_anim 		= nil
close_victim 	= nil
far_anim 		= nil
far_victim 		= nil
close_distance  = 0
far_distance 	= 0
close_snd_distance = 3
use = {=actor_enemy} false, true

;------------------------------
;--------- NPC trade ----------
;------------------------------
[logic@bar_dolg_general_beh_trade_job_1]
active = beh@bar_dolg_general_beh_trade_job_1
suitable = {=npc_has_items_to_sell(bar_dolg_general) !surge_started} true
prior = 65

[beh@general]
meet = meet@trader
combat_ignore_cond = {=is_warfare} false, {=actor_true_enemy =check_enemy_name(actor)} false, true
combat_ignore_keep_when_attacked = {=is_warfare} false, true
invulnerable = {=is_warfare} false, {!actor_true_enemy} true, false
gather_items_enabled = false
help_wounded_enabled = false
corpse_detection_enabled = false
sound_idle = state
behavior_state = beh_move
target = waypoint
walk_dist = 100
jog_dist = 220
wait_anim = guard
walk_anim = patrol
jog_anim = patrol
run_anim = rush
delay_anim = guard

[beh@bar_dolg_general_beh_trade_job_1]:beh@general
;pt1 = 5000,ward | pos:130.57, -4.83, 22.85 look:130.57, -3.60, 22.85 sig:trade
pt1 = 10000,choose | pos:207.76565551758,0.42106568813324,57.60717010498 look:208.27877128124,0.42106568813324,56.764598250389
pt2 = 5000,zat_b14_give_artefact_act | pos:207.76565551758,0.42106568813324,57.60717010498 look:208.27877128124,0.42106568813324,56.764598250389 sig:trade
pt3 = 10000,guard | pos:207.76565551758,0.42106568813324,57.60717010498 look:208.27877128124,0.42106568813324,56.764598250389
on_signal = trade | %=trade_job_sell_items%
path_end = loop
