[logic]
active = sr_idle

[sr_idle]
on_info = {+spectrum_project_start =actor_has_item(esc_quest_freedom_pda)} sr_idle@scenario_autosave %+esc_quest_line_secret_freedom_pda%

[sr_idle@scenario_autosave]
on_timer = 100 | {-save_esc_quest_line_secret_freedom} %+save_esc_quest_line_secret_freedom =scenario_autosave(st_save_esc_quest_line_secret_freedom)%
on_info = {+save_esc_quest_line_secret_freedom} sr_idle@0

[sr_idle@0]
on_info = {+esc_quest_line_secret_freedom_fyrgon_dialog_and} sr_idle@quest_shman
 
[sr_idle@quest_shman]
on_info = {+esc_quest_line_help_nebo_complete} sr_idle@2

[sr_idle@2]
on_info = {=dist_to_actor_ge(15)} sr_idle@3 %+esc_mechanic_furgon_remove +esc_quest_line_secret_freedom_zabrat%

[sr_idle@3]
on_actor_inside = {+esc_mechanic_furgon_remove} sr_idle@4 %+esc_quest_line_secret_freedom_search%

[sr_idle@4]
on_info = {+esc_quest_line_secret_freedom_elevator} sr_idle@5 %=spawn_corpse(esc_mechanic_furgon:esc_mechanic_furgon_tryp_spawn)%

[sr_idle@5]
on_info = {=actor_has_item(esc_quest_freedom_pda_upd)} sr_idle@6 %=NpcKickActor +esc_quest_line_secret_freedom_complete%

[sr_idle@6]
on_info = {+esc_quest_line_secret_freedom_naiti_borlanda} sr_idle@timer_2 %=remove_npc(esc_mechanic_furgon) =spawn_object(esc_borland_quest:esc_borland_village_spawn)%

[sr_idle@timer_2]
on_timer = 7000 | sr_idle@7

[sr_idle@7]
on_info = {+esc_quest_line_secret_freedom_naiti_borlanda} sr_idle@8 %=esc_sms_borland_posle_napadenia =give_task(esc_quest_line_important_meet_borland)%

[sr_idle@8]
on_game_timer = 12000 | sr_idle@nil %=spawn_object(esc_mechanic_barkas:esc_mechanic_barkas_spawn)%

[sr_idle@nil]