---==================================================================================================---
--------------------------------------------------------------------------------------------------------
-------------------------------------(Функции для диалогов)---------------------------------------------
--------------------------------------------------------------------------------------------------------
---==================================================================================================---

function disable_trade(npc)
   npc:enable_trade()
end
function enable_trade(npc)
   npc:enable_trade()
end
function disable_input()
   level.disable_input()
end
function enable_input()
   level.enable_input()
end
function disable_ui()
   level.show_weapon(false)
   level.hide_indicators_safe()
   game_hide_menu()
end
function enable_ui()
   level.show_weapon(true)
   level.show_indicators()
end
function kill_self(actor,npc)
   if npc~=nil and npc:alive() then
      npc:kill(npc)
   end
end
------------------------------------------------------------------------------
--                        Проверочные функции                               --
------------------------------------------------------------------------------
function mod_dialog_precond(first_speaker,second_speaker,dn)
   return not is_wounded(first_speaker,second_speaker)
end
function global_pattern_is_one(actor,npc)
   return get_global_pattern()==1
end
function global_pattern_is_two(actor,npc)
   return get_global_pattern()==2
end
function is_wounded(first_speaker, second_speaker)
   local npc = who_is_npc(first_speaker, second_speaker)
   return xr_wounded.is_wounded(npc)
end
function who_is_npc(first_speaker, second_speaker)
   local npc = second_speaker
   if db.actor:id() == npc:id() then
      npc=first_speaker
   end
   return npc
end
function currert_level_is_zaton(actor,npc)
   return level.name()=="zaton"
end
function currert_level_is_jupiter(actor,npc)
   return level.name()=="jupiter"
end
function currert_level_is_pripyat(actor,npc)
   return level.name()=="pripyat"
end
function currert_level_is_darkvalley(actor,npc)
   return level.name()=="darkvalley"
end
------------------------------------------------------------------------------
--                            Функции времени                               --
------------------------------------------------------------------------------
function is_deposit_time(actor, npc)
   return level.get_time_hours()==20 and level.get_time_minutes()<=45
end
function is_percent_allow(actor, npc)
   return level.get_time_days()>=sgm_functions.read_variable("bankir_deposit_passed_time")
end
function is_night_on()
   if level.get_time_hours()<6 or level.get_time_hours()>=22 then
      return true
   else
      return false
   end
end
function is_night_off()
   if level.get_time_hours()<6 or level.get_time_hours()>=22 then
      return false
   else
      return true
   end
end
------------------------------------------------------------------------------
--                       Инфопортационные условия                           --
------------------------------------------------------------------------------
function zat_boroda_gived_noah_message(actor,npc)
   return has_any_info("zat_monsters_wave_reward,zat_monsters_wave_start,zat_b18_noah_dead,zat_monsters_wave_fail") or dont_any_chosen_info("zat_b28_heli_3_searching,zat_b100_heli_2_searching,zat_b101_heli_5_searching")
end
function zat_noah_no_new_quests(actor,npc)
   return has_chosen_info("zat_monsters_wave_start,zat_monsters_wave_reward") or has_chosen_info("zat_monsters_wave_start,zat_monsters_wave_fail") or dont_has_alife_info("zat_monsters_wave_start")
end
function zat_stalker_member_no_job(actor,npc)
   return has_alife_info("zat_bandit_base_leader_death")
end
function jup_b6_scientist_nuclear_physicist_no_new_quests(actor,npc)
   return dont_has_alife_info("jup_search_anomal_prototype_tip") or (has_alife_info("jup_search_anomal_prototype_tip") and has_any_info("jup_search_anomal_prototype_reward,jup_search_anomal_prototype_fail"))
end
function jup_duty_leader_entering_to_dolg_precond(actor,npc)
   return has_any_info("jup_b207_sell_dealers_pda_duty,jup_b46_duty_founder_pda_to_duty")
end
function jup_svoboda_leader_entering_to_freedom_precond(actor,npc)
   return has_any_info("jup_b207_sell_dealers_pda_freedom,jup_b46_duty_founder_pda_to_freedom")
end
function pri_signaller_need_toolkits(actor,npc)
   return (db.actor:object("signaller_toolkit_1") and dont_has_alife_info("pri_signaller_toolkit_1_returned")) or (db.actor:object("signaller_toolkit_2") and dont_has_alife_info("pri_signaller_toolkit_2_returned"))
end
function pri_assault_monolith_base_precond(actor,npc)
   if has_chosen_info("pri_a17_gauss_falled,pri_a20_task_gived") and dont_has_alife_info("pri_monolit_base_leader_death") then
      if has_alife_info("zat_deliver_monolith_case_start") and has_any_info("zat_deliver_monolith_case_fail,zat_deliver_monolith_case_reward") then
         return true
      elseif dont_has_alife_info("zat_deliver_monolith_case_start") then
         return true
      end
   end
   return false
end
function pri_necessary_kill_kasilov_precond(actor,npc)
   return has_alife_info("pri_a18_use_idol_done")
end
function pri_rescue_underground_guide_precond(actor,npc)
   return dont_has_alife_info("pri_zone_cleaning_start") or (has_alife_info("pri_zone_cleaning_start") and (has_any_info("pri_rescue_underground_guide_start,pri_rescue_underground_guide_fail")))
end
function pri_expiation_sin_job_precond(actor,npc)
   return has_chosen_info("actor_entry_in_monolith,pri_expiation_sin_1_allow") and (dont_has_alife_info("pri_expiation_sin_1_start") or (has_chosen_info("pri_expiation_sin_1_start,pri_expiation_sin_2_allow") and dont_has_alife_info("pri_expiation_sin_2_start")) or (has_chosen_info("pri_expiation_sin_2_start,pri_expiation_sin_3_allow") and dont_has_alife_info("pri_expiation_sin_3_start"))) and dont_has_chosen_info("pri_expiation_sin_1_fail,pri_expiation_sin_2_fail,pri_expiation_sin_3_fail")
end
function pri_expiation_sin_reward_precond(actor,npc)
   return (has_alife_info("pri_expiation_sin_1_start") and dont_has_chosen_info("pri_expiation_sin_1_fail,pri_expiation_sin_1_bring_all")) or (has_alife_info("pri_expiation_sin_2_start") and dont_has_chosen_info("pri_expiation_sin_2_fail,pri_expiation_sin_2_talk")) or (has_alife_info("pri_expiation_sin_3_start") and dont_has_chosen_info("pri_expiation_sin_3_fail,pri_expiation_sin_3_kiborg_final_talk"))
end
function pri_expiation_sin_reward_1_precond(actor,npc)
   return has_alife_info("pri_expiation_sin_1_start") and dont_has_chosen_info("pri_expiation_sin_1_fail,pri_expiation_sin_1_bring_all")
end
function pri_expiation_sin_reward_2_precond(actor,npc)
   return has_alife_info("pri_expiation_sin_2_start") and dont_has_chosen_info("pri_expiation_sin_2_fail,pri_expiation_sin_2_talk")
end
function pri_expiation_sin_reward_3_precond(actor,npc)
   return has_alife_info("pri_expiation_sin_3_start") and dont_has_chosen_info("pri_expiation_sin_3_fail,pri_expiation_sin_3_kiborg_final_talk")
end
------------------------------------------------------------------------------
--                            Функции условий                               --
------------------------------------------------------------------------------
function zat_danger_parcel_need_rank_more(actor,npc)
   local get_rank=get_actor_rank()
   return get_rank>=r_quest_params("number","zat_danger_parcel_need_rank",0)
end
function zat_danger_parcel_need_rank_less(actor,npc)
   local get_rank=get_actor_rank()
   return get_rank<r_quest_params("number","zat_danger_parcel_need_rank",0)
end
function zat_kill_chapaev_need_rank_more(actor,npc)
   local get_rank=get_actor_rank()
   return get_rank>=r_quest_params("number","zat_kill_chapaev_need_rank",50)
end
function zat_kill_chapaev_need_rank_less(actor,npc)
   local get_rank=get_actor_rank()
   return get_rank<r_quest_params("number","zat_kill_chapaev_need_rank",50)
end
function zat_kill_shakal_need_rank_more(actor,npc)
   local get_rank=get_actor_rank()
   return get_rank>=r_quest_params("number","zat_kill_shakal_need_rank",65) or has_alife_info("zat_b7_actor_help_bandits")
end
function zat_kill_shakal_need_rank_less(actor,npc)
   local get_rank=get_actor_rank()
   return get_rank<r_quest_params("number","zat_kill_shakal_need_rank",65) and dont_has_alife_info("zat_b7_actor_help_bandits")
end
function zat_mechanic_not_details_pre(actor,npc)
   return sgm_functions.read_variable("zat_mechanic_stripping")<1 and r_mod_params("bool","need_mechanic_details",true)
end
function jup_mechanic_not_details_pre(actor,npc)
   return sgm_functions.read_variable("jup_mechanic_stripping")<1 and r_mod_params("bool","need_mechanic_details",true)
end
function pri_mechanic_not_details_pre(actor,npc)
   return sgm_functions.read_variable("pri_mechanic_stripping")<1 and r_mod_params("bool","need_mechanic_details",true)
end
------------------------------------------------------------------------------
--           Функции связанные с передачей/получением предметов             --
------------------------------------------------------------------------------
function has_frequency_radio(actor,npc)
   return db.actor:object("quest_frequency_radio")
end
function out_frequency_radio(actor,npc)
   dialogs.relocate_item_section(npc,"quest_frequency_radio","out")
end
function zat_frequency_radio_reward(actor,npc)
   dialogs.relocate_money(npc,2500,"in")
   give_skill_book()
end
function zat_dat_letter_from_agent(actor,npc)
   dialogs.relocate_item_section(actor,"letter_from_agent","in")
   game_autosave("save_zat_meet_authorities_agent_letter")
end
function has_bandit_prikid(actor,npc)
   return db.actor:object("bandit_prikid_outfit")
end
function dont_bandit_prikid(actor,npc)
   return not db.actor:object("bandit_prikid_outfit")
end
function in_bandit_prikid(actor,npc)
   dialogs.relocate_item_section(npc,"bandit_prikid_outfit","in")
end
function out_bandit_prikid(actor,npc)
   dialogs.relocate_item_section(npc,"bandit_prikid_outfit","out")
end
function zat_dat_danger_parcel(actor,npc)
   dialogs.relocate_item_section(actor,"zat_danger_parcel","in")
end
function zat_dostavit_danger_parcel(actor,npc)
   dialogs.relocate_item_section(npc,"zat_danger_parcel","out")
   game_autosave("save_zat_danger_parcel_referred")
end
function zat_kanevskiy_reward(actor,npc)
   dialogs.relocate_money(npc,r_quest_params("number","zat_avenger_for_parcel_reward",1500),"in")
   give_secret(1)
   
   give_skill_book()
end
function zat_breed_give_acid_star(actor,npc)
   dialogs.relocate_item_section(npc,"af_acid_star","out")
end
function zat_give_postman_parcel(actor,npc)
   dialogs.relocate_item_section(npc,"zat_postman_parcel","out")
end
function zat_elbrus_unpack(actor,npc)
   dialogs.relocate_item_section(actor,"wpn_fort","in")
   give_skill_book()
   dialogs.relocate_item_section(actor,"ammo_9x18_pmm","in")
   dialogs.relocate_item_section(actor,"ammo_5.45x39_fmj","in",2)
   dialogs.relocate_item_section(actor,"wild_drink","in",2)
   dialogs.relocate_item_section(actor,"medkit","in")
   dialogs.relocate_item_section(actor,"bandage","in",2)
   
end
function zat_member_reward1(actor,npc)
   dialogs.relocate_item_section(actor,"wpn_autocolt","in")
   dialogs.relocate_item_section(actor,"af_cristall_flower","in")
   dialogs.relocate_item_section(actor,"ammo_5.45x39_ap","in",4)
   dialogs.relocate_item_section(actor,"personal_rukzak","in")
   dialogs.relocate_item_section(actor,"bag_medkit_1","in")
   dialogs.relocate_money(npc,r_quest_params("number","zat_kill_chapaev_reward1",2500),"in")
   
   give_secret(1)
   give_skill_book()
end
function zat_member_reward2(actor,npc)
   dialogs.relocate_item_section(actor,"wpn_autocolt","in")
   dialogs.relocate_item_section(actor,"af_cristall_flower","in")
   dialogs.relocate_item_section(actor,"ammo_5.45x39_ap","in",4)
   dialogs.relocate_item_section(actor,"personal_rukzak","in")
   dialogs.relocate_item_section(actor,"bag_medkit_1","in")
   dialogs.relocate_money(npc,r_quest_params("number","zat_kill_chapaev_reward2",6000),"in")
   
   give_secret(2)
   give_skill_book()
end
function has_kasilov_pda(actor,npc)
   return db.actor:object("device_pda_kasilov")
end
function zat_ostavit_wounded_medkit(actor,npc)
   create("medkit",434.579,33.472,-312.569,1679156,3992)
end
function zat_dat_monolith_case(actor,npc)
   create("zat_intercepted_case",431.563,32.664,-291.537,1676844,3992)
end
function zat_kill_shakal_have_weapon(actor,npc)
   return db.actor:object("zat_shakal_weapon")
end
function zat_kill_shakal_give_weapon(actor,npc)
   dialogs.relocate_item_section(npc,"zat_shakal_weapon","out")
end
function zat_kill_shakal_chapaev_reward(actor,npc)
   dialogs.relocate_item_section(actor,"ammo_vog-25","in")
   dialogs.relocate_item_section(actor,"wpn_addon_grenade_launcher","in")
   dialogs.relocate_item_section(actor,"ammo_5.45x39_ap","in",5)
   dialogs.relocate_item_section(actor,"itm_gunsmith_toolkit","in")
   dialogs.relocate_item_section(actor,"ammo_vog-25","in")
   dialogs.relocate_money(npc,r_quest_params("number","zat_kill_shakal_reward",5000),"in")
   
   give_secret(1)
   give_skill_book()
end
function zat_kill_shakal_predatel_give_weapon(actor,npc)
   if not db.actor:object("zat_shakal_weapon") then
      dialogs.relocate_item_section(actor,"zat_shakal_weapon","in")
   end
end
function zat_kill_shakal_predatel_reward(actor,npc)
   dialogs.relocate_money(npc,10000,"in")
end
function zat_kill_shakal_predatel_reward2(actor,npc)
   dialogs.relocate_money(npc,15000,"in")
end
function zat_actor_set_bandit(actor,npc)
   --db.actor:set_character_community("actor_bandit",0,0)
   --sgm_functions.write_variable("stat_community","actor_bandit")
   give_info("actor_entry_in_bandit")
   --disable_info("actor_entry_in_rasvet")
   --disable_info("actor_entry_in_monolith")
   --disable_info("actor_entry_in_killer")
   --disable_info("actor_entry_in_dolg")
   --disable_info("actor_entry_in_freedom")
   give_info("actor_noted_bandits")
   give_skill_book()
end
function zat_actor_exit_bandit(actor,npc)
   db.actor:set_character_community("actor",0,0)
   sgm_functions.write_variable("stat_community","no_community")
   disable_info("actor_entry_in_bandit")
   disable_info("actor_entry_in_rasvet")
   disable_info("actor_entry_in_monolith")
   disable_info("actor_entry_in_killer")
   disable_info("actor_entry_in_dolg")
   disable_info("actor_entry_in_freedom")
end
function zat_give_disk_breaking(actor,npc)
   dialogs.relocate_item_section(actor,"disk_breaking","in")
end
function zat_bring_flash_light_otdat(actor,npc)
   dialogs.relocate_item_section(npc,"quest_flash_light","out")
end
function zat_bring_flash_light_reward(actor,npc)
   dialogs.relocate_item_section(actor,"ammo_9x18_pmm","in",2)
   dialogs.relocate_item_section(actor,"ammo_9x19_pbp","in",2)
   dialogs.relocate_item_section(actor,"ammo_12x76_zhekan","in",2)
   dialogs.relocate_item_section(actor,"ammo_5.45x39_ap","in",2)
   dialogs.relocate_item_section(actor,"grenade_f1","in",3)
   dialogs.relocate_money(npc,r_quest_params("number","zat_bring_flash_light_reward",1500),"in")
   give_secret(1)
   give_skill_book()
end
function zat_bring_drink_beylis_spawn(actor,npc)
   create("quest_drink_beylis",14.202,25.651,-186.700,736134,4543)
   give_info("guide_is_gratis")
end
function zat_bring_drink_beylis_otdat(actor,npc)
   dialogs.relocate_item_section(npc,"quest_drink_beylis","out")
   disable_info("guide_is_gratis")
end
function zat_bring_drink_beylis_reward(actor,npc)
   dialogs.relocate_item_section(actor,"nuts","in",3)
   dialogs.relocate_item_section(actor,"wild_drink","in",5)
   dialogs.relocate_item_section(actor,"energy_drink","in",6)
   dialogs.relocate_item_section(actor,"af_cristall_flower","in")
   dialogs.relocate_money(npc,r_quest_params("number","zat_bring_drink_beylis_reward",2000),"in")
   give_secret(1)
   
   give_skill_book()
end
function zat_bring_sharpshooter_bino_otdat(actor,npc)
   dialogs.relocate_item_section(npc,"quest_sharpshooter_binocular","out")
end
function zat_bring_sharpshooter_bino_reward(actor,npc)
   dialogs.relocate_item_section(actor,"af_mincer_meat","in")
   dialogs.relocate_item_section(actor,"ammo_50bmg","in")
   dialogs.relocate_item_section(actor,"wpn_sig550","in")
   dialogs.relocate_item_section(actor,"ammo_5.56x45_ap","in",2)
   dialogs.relocate_item_section(actor,"bio_bandage","in",5)
   dialogs.relocate_item_section(actor,"antirad","in",5)
   dialogs.relocate_item_section(actor,"bag_medkit_2","in")
   dialogs.relocate_money(npc,r_quest_params("number","zat_bring_sharpshooter_bino_reward",5000),"in")
   give_secret(1)
   
   give_skill_book()
end
function zat_monsters_wave_reward(actor,npc)
   dialogs.relocate_item_section(actor,"af_geliy","in")
   dialogs.relocate_item_section(actor,"all_secret_lab_x7","in")
   dialogs.relocate_item_section(actor,"ammo_flw","in",2)
   dialogs.relocate_item_section(actor,"svoboda_heavy_outfit","in")
   dialogs.relocate_item_section(actor,"ammo_7.62x51_lenta","in",3)
   dialogs.relocate_item_section(actor,"itm_gunsmith_toolkit","in",2)
   dialogs.relocate_money(npc,r_quest_params("number","zat_monsters_wave_reward",20000),"in")
   give_secret(2)
   
end
function zat_monsters_wave_reward_2(actor,npc)
  dialogs.relocate_item_section(actor,"bag_medkit_2","in")
  dialogs.relocate_item_section(actor,"wpn_m60","in")
  dialogs.relocate_item_section(actor,"wpn_flamewerfer","in")
  dialogs.relocate_item_section(actor,"ammo_7.62x51_lenta","in",5)
  dialogs.relocate_item_section(actor,"ammo_flw","in",2) 
  dialogs.relocate_item_section(actor,"itm_gunsmith_toolkit","in")
end
function jup_killer_base_chief_actor_has_outfit(actor,npc,p)
   local outfit_in_slot=db.actor:item_in_slot(7)
   if outfit_in_slot~=nil and (find_in_string(outfit_in_slot:section(),"merc_outfit") or find_in_string(outfit_in_slot:section(),"merc_radiation_outfit")or find_in_string(outfit_in_slot:section(),"merc_scientific_outfit")or find_in_string(outfit_in_slot:section(),"merc_stalker_outfit")or find_in_string(outfit_in_slot:section(),"merc_specops_outfit")or find_in_string(outfit_in_slot:section(),"specops_merc_outfit")or find_in_string(outfit_in_slot:section(),"military_merc_outfit")or find_in_string(outfit_in_slot:section(),"light_merc_outfit")or find_in_string(outfit_in_slot:section(),"merc_exo_outfit")or find_in_string(outfit_in_slot:section(),"merc_nosorog_outfit")) then
      return true
   else
      return false
   end
end
function jup_killer_base_chief_actor_not_outfit(actor,npc,p)
   local outfit_in_slot=db.actor:item_in_slot(7)
   if outfit_in_slot~=nil and find_out_string(outfit_in_slot:section(),"merc_outfit") and find_out_string(outfit_in_slot:section(),"merc_radiation_outfit	") and find_out_string(outfit_in_slot:section(),"merc_scientific_outfit")  and find_out_string(outfit_in_slot:section(),"merc_stalker_outfit")  and find_out_string(outfit_in_slot:section(),"merc_specops_outfit")  and find_out_string(outfit_in_slot:section(),"military_merc_outfit")  and find_out_string(outfit_in_slot:section(),"light_merc_outfit")  and find_out_string(outfit_in_slot:section(),"merc_exo_outfit")  and find_out_string(outfit_in_slot:section(),"merc_nosorog_outfit")  then
      return true
   else
      return false
   end
end
function jup_bring_heavy_medkits_otdat(actor,npc)
   dialogs.relocate_item_section(npc,"quest_heavy_medkits","out")
end
function jup_bring_heavy_medkits_reward(actor,npc)
   dialogs.relocate_item_section(actor,"geiger_counter","in")
   dialogs.relocate_money(npc,r_quest_params("number","jup_bring_heavy_medkits_reward",3000),"in")
   give_secret(1)
   give_skill_book()
end
function jup_bring_photo_device_otdat(actor,npc)
   dialogs.relocate_item_section(npc,"quest_photo_device","out")
end
function jup_bring_photo_device_reward(actor,npc)
   dialogs.relocate_item_section(actor,"itm_gunsmith_toolkit","in")
   dialogs.relocate_item_section(actor,"drug_coagulant","in")
   dialogs.relocate_money(npc,r_quest_params("number","jup_bring_photo_device_reward",2000),"in")
   give_secret(1)
   
   give_skill_book()
end
function jup_bring_photo_device_otdat_loki(first_speaker, second_speaker)
   dialogs.relocate_item_section_from_actor(first_speaker, second_speaker, "af_indeikam", 2)
end
function jup_bring_photo_device_otdat_bandit(first_speaker, second_speaker)
   dialogs.relocate_item_section_from_actor(first_speaker, second_speaker, "rs_exo_outfit")
end
function jup_bring_photo_device_reward_loki(first_speaker, second_speaker)  
   local amount = 50000
   dialogs.relocate_money_to_actor(first_speaker, second_speaker, amount)
end
function actor_has_loki_yar_quest_item(first_speaker, second_speaker)
 	local cnt = 0
	local function zat_b30_count(npc, item)
		--printf("item:section: %s", item:section())
		if item:section() == "af_indeikam" then
			cnt = cnt + 1
		end
	end
	db.actor:iterate_inventory(zat_b30_count, nil)
	if cnt > 1 then
		return true
	end
	return false
end
function actor_has_flash_light_have_exo() 
     if db.actor:object("rs_exo_outfit") then 
        return true 
     end 
     return false 
end 
function jup_bring_arms_case_otdat(actor,npc)
   dialogs.relocate_item_section(npc,"quest_arms_case","out")
end
function jup_bring_arms_case_reward(actor,npc)
   dialogs.relocate_item_section(actor,"ammo_50bmg","in")
   dialogs.relocate_item_section(actor,"ammo_5.45x39_ap","in",6)
   dialogs.relocate_item_section(actor,"grenade_f1","in")
   dialogs.relocate_item_section(actor,"af_electra_moonlight","in")
   dialogs.relocate_money(npc,r_quest_params("number","jup_bring_arms_case_reward",6500),"in")
   give_secret(2)
   
   give_skill_book()
end
function jup_barmen_chapay_legacy_sell(npc,actor)
	dialogs.relocate_item_section(actor,"jup_chapay_quest_case_with_narkota","out")
	dialogs.relocate_item_section(actor,"jup_chapay_quest_paket_with_narkota","out")
	dialogs.relocate_item_section(actor,"zat_chapay_quest_flash_with_info_narkota","out")
	local amount = 300000
	dialogs.relocate_money_to_actor(first_speaker, second_speaker, amount)
end
function jup_gromoboy_dont_vintar(actor,npc)
   return not db.actor:object("wpn_gromoboy_vintorez")
end
function jup_gromoboy_have_vintar(actor,npc)
   return db.actor:object("wpn_gromoboy_vintorez")
end
function jup_gromoboy_give_vintar(actor,npc)
   dialogs.relocate_item_section(npc,"wpn_gromoboy_vintorez","out")
end
function jup_gromoboy_have_thief_pda(actor,npc)
   return db.actor:object("jup_thief_voron_pda")
end
function jup_gromoboy_give_thief_pda(actor,npc)
   dialogs.relocate_item_section(npc,"jup_thief_voron_pda","out")
end
function jup_find_gromoboy_vintar_reward(actor,npc)
   dialogs.relocate_item_section(actor,"af_cristall","in")
   dialogs.relocate_item_section(actor,"drug_anabiotic","in")
   dialogs.relocate_item_section(actor,"itm_gunsmith_toolkit","in")
   dialogs.relocate_item_section(actor,"ammo_5.45x39_fmj","in",3)
   dialogs.relocate_item_section(actor,"ammo_7.62x54_7h1","in",2)
   dialogs.relocate_money(npc,r_quest_params("number","jup_find_gromoboy_vintar_reward1",8000),"in")
   
   give_secret(1)
   give_skill_book()
end
function jup_find_gromoboy_vintar_fake_reward(actor,npc)
   dialogs.relocate_money(npc,r_quest_params("number","jup_find_gromoboy_vintar_reward2",16000),"in")
   
   give_skill_book()
end
function jup_set_bad_stalker(actor,npc)
   --/npc:set_relation(game_object.enemy,db.actor)
   --/npc:force_set_goodwill(-1000,db.actor)
end
function jup_beat_from_monsters_reward(actor,npc)
   dialogs.relocate_money(npc,r_quest_params("number","jup_beat_from_monsters_reward",5000),"in")
   dialogs.relocate_item_section(actor,"itm_outfit_toolkit","in")
   dialogs.relocate_item_section(actor,"itm_gunsmith_toolkit","in")
   dialogs.relocate_item_section(actor,"ammo_vog-25","in")
   
   clear_all_objects("monster",10,250)
   give_secret(1)
   give_skill_book()
end
function jup_rasvet_equipments(actor,npc)
   dialogs.relocate_item_section(actor,"rasvet_light_novice_outfit","in")
   dialogs.relocate_item_section(actor,"wpn_ak101","in")
   dialogs.relocate_item_section(actor,"ammo_5.56x45_ss190","in",4)
   dialogs.relocate_item_section(actor,"wpn_pb","in")
   dialogs.relocate_item_section(actor,"ammo_9x18_pmm","in",4)
end
function jup_actor_set_rasvet(actor,npc)
   --db.actor:set_character_community("actor_rasvet",0,0)
   --sgm_functions.write_variable("stat_community","actor_rasvet")
   disable_info("jup_rasvet_base_actor_hit")
   disable_info("jup_rasvet_base_hit")
   create_base_treasure("jup_rasvet_base_treasure",-346.514,3.733,412.493,130860,4543)
   --disable_info("actor_entry_in_bandit")
   give_info("actor_entry_in_rasvet")
   --disable_info("actor_entry_in_monolith")
   --disable_info("actor_entry_in_killer")
   --disable_info("actor_entry_in_dolg")
   --disable_info("actor_entry_in_freedom")
   give_info("jup_search_treasure_start")
--   give_info("actor_noted_rasvets")
--   add_task("sgm_jup_search_treasure")
end
function jup_actor_exit_rasvet(actor,npc)
   --db.actor:set_character_community("actor",0,0)
   --sgm_functions.write_variable("stat_community","no_community")
   --disable_info("actor_entry_in_bandit")
   --disable_info("actor_entry_in_rasvet")
   --disable_info("actor_entry_in_monolith")
   --disable_info("actor_entry_in_killer")
   --disable_info("actor_entry_in_dolg")
   --disable_info("actor_entry_in_freedom")
end
function jup_destroy_night_killers_reward(actor,npc)
   dialogs.relocate_money(npc,r_quest_params("number","jup_destroy_night_killers_reward",5000),"in")
   dialogs.relocate_item_section(actor,"ammo_7.62x54_7h1","in",2)
   dialogs.relocate_item_section(actor,"itm_outfit_toolkit","in")
   
   give_secret(1)
   give_skill_book()
end
function jup_rasvet_eliminate_burrows_reward(actor,npc)
   dialogs.relocate_money(npc,r_quest_params("number","jup_rasvet_eliminate_burrow_reward",10000),"in")
   give_skill_book()
   give_skill_book()
   local rnd_wpn_reward=math.random(1,2)
   if rnd_wpn_reward==1 then
      dialogs.relocate_item_section(actor,"wpn_vintorez","in")
      dialogs.relocate_item_section(actor,"ammo_9x39_pab9","in",2)
   else
      dialogs.relocate_item_section(actor,"wpn_groza","in")
      dialogs.relocate_item_section(actor,"ammo_9x39_pab9","in",2)
   end
   dialogs.relocate_item_section(actor,"ammo_5.56x45_ap","in")
   dialogs.relocate_item_section(actor,"ammo_5.45x39_ap","in")
   dialogs.relocate_item_section(actor,"itm_outfit_toolkit","in")
   local rnd_af_reward=math.random(1,3)
   if rnd_af_reward==1 then
      dialogs.relocate_item_section(actor,"af_gold_fish","in")
   elseif rnd_af_reward==2 then
      dialogs.relocate_item_section(actor,"af_baloon","in")
   else
      dialogs.relocate_item_section(actor,"af_glass","in")
   end
   give_secret(2)
   
end
function jup_follow_scientists_reward(actor,npc)
   local rnd_super_reward=math.random(1,5)
   if sgm_functions.read_variable("jup_fw_scientists_deaths")~=nil then
      local reward_fails=sgm_functions.read_variable("jup_fw_scientists_deaths")
      if reward_fails==0 then
         dialogs.relocate_money(npc,r_quest_params("number","jup_follow_scientists_reward1",4000),"in")
         if rnd_super_reward==1 then
            dialogs.relocate_item_section(actor,"drug_engine","in")
         end
      elseif reward_fails==1 then
         dialogs.relocate_money(npc,r_quest_params("number","jup_follow_scientists_reward2",3000),"in")
         if rnd_super_reward==2 then
            dialogs.relocate_item_section(actor,"drug_engine","in")
         end
      elseif reward_fails==2 then
         dialogs.relocate_money(npc,r_quest_params("number","jup_follow_scientists_reward3",2000),"in")
      elseif reward_fails==3 then
         dialogs.relocate_money(npc,r_quest_params("number","jup_follow_scientists_reward4",1000),"in")
      elseif reward_fails>=4 then
         dialogs.relocate_money(npc,r_quest_params("number","jup_follow_scientists_reward5",500),"in")
      end
   end
   dialogs.relocate_item_section(actor,"bio_bandage","in",3)
   dialogs.relocate_item_section(actor,"wild_drink","in",2)
   dialogs.relocate_item_section(actor,"af_electra_moonlight","in")
   
   if sgm_functions.read_variable("jup_fw_scientists_deaths")~=nil then
      sgm_functions.clear_variable("jup_fw_scientists_deaths")
   end
   give_secret(1)
   give_skill_book()
end
function jup_avoid_witnesses_reward(actor,npc)
   dialogs.relocate_item_section(actor,"money_5000","in")
   give_secret(1)
   give_skill_book()
end
function has_detector_modify_toolkit(actor,npc)
   return db.actor:object("detector_modify_toolkit")
end
function dont_detector_modify_toolkit(actor,npc)
   return not db.actor:object("detector_modify_toolkit")
end
function give_detector_modify_toolkit(actor,npc)
   dialogs.relocate_item_section(npc,"detector_modify_toolkit","out")
end
function jup_sokolov_gives_heli_key(actor,npc)
   dialogs.relocate_item_section(actor,"special_helicopter_key","in")
end
function jup_rasvet_destroy_snorks_reward(actor,npc)
   dialogs.relocate_item_section(actor,"bag_medkit_2","in")
   dialogs.relocate_money(npc,r_quest_params("number","jup_rasvet_destroy_snorks_reward",2500),"in")
   give_secret(1)
   give_skill_book()
end
function jup_mercenary_check_plant_has_medikaments(actor,npc)
   return sgm_functions.have_item_count("psy_complex",4)
end
function jup_mercenary_check_plant_not_medikaments(actor,npc)
   return not sgm_functions.have_item_count("psy_complex",4)
end
function jup_mercenary_check_plant_gives_medikaments(first_speaker,second_speaker)
   dialogs.relocate_item_section_from_actor(first_speaker,second_speaker,"psy_complex",4)
   game_autosave("save_jup_mercenary_check_plant_psy_kit_otdani")
end
function jup_mercenary_check_plant_supply_cash(actor,npc)
   dialogs.relocate_money(npc,1000,"in")
end
function jup_mercenary_check_plant_reward(actor,npc)
   dialogs.relocate_money(npc,r_quest_params("number","jup_mercenary_check_plant_reward",8000),"in")
   dialogs.relocate_item_section(actor,"af_gold_fish","in")
   dialogs.relocate_item_section(actor,"wpn_lr300","in")
   dialogs.relocate_item_section(actor,"ammo_5.56x45_ap","in",5)
   dialogs.relocate_item_section(actor,"ammo_5.45x39_ap","in",5)
   dialogs.relocate_item_section(actor,"itm_outfit_toolkit","in")
   dialogs.relocate_item_section(actor,"itm_gunsmith_toolkit","in")
   give_skill_book()
   give_secret(2)
   
end
function jup_mercenary_check_plant_equipments(actor,npc)
   dialogs.relocate_item_section(actor,"wpn_sig550","in")
   dialogs.relocate_item_section(actor,"ammo_5.56x45_ss190","in",5)
   dialogs.relocate_item_section(actor,"wpn_sig220","in")
   dialogs.relocate_item_section(actor,"ammo_11.43x23_hydro","in",5)
end
function jup_actor_set_killer(actor,npc)
   --db.actor:set_character_community("actor_killer",0,0)
   --sgm_functions.write_variable("stat_community","actor_killer")
   --disable_info("jup_killer_base_actor_hit")
   --disable_info("actor_entry_in_bandit")
   --disable_info("actor_entry_in_rasvet")
   --disable_info("actor_entry_in_monolith")
   --disable_info("actor_entry_in_dolg")
   --disable_info("actor_entry_in_freedom")
   give_info("actor_entry_in_killer")
--   give_info("actor_noted_killers")
end
function jup_actor_exit_killer(actor,npc)
   db.actor:set_character_community("actor",0,0)
   sgm_functions.write_variable("stat_community","no_community")
   disable_info("actor_entry_in_bandit")
   disable_info("actor_entry_in_rasvet")
   disable_info("actor_entry_in_monolith")
   disable_info("actor_entry_in_killer")
   disable_info("actor_entry_in_dolg")
   disable_info("actor_entry_in_freedom")
end
function jup_actor_set_freedom(actor,npc)
   db.actor:set_character_community("actor_freedom",0,0)
   sgm_functions.write_variable("stat_community","actor_freedom")
   give_info("actor_entry_in_freedom")
   disable_info("actor_entry_in_rasvet")
   disable_info("actor_entry_in_monolith")
   disable_info("actor_entry_in_killer")
   disable_info("actor_entry_in_bandit")
   disable_info("actor_entry_in_dolg")
   give_info("actor_noted_freedoms")
   dialogs.relocate_item_section(actor,"svoboda_light_outfit","in")
   dialogs.relocate_money(npc,2000,"in")
   give_skill_book()
end
function jup_actor_set_dolg(actor,npc)
   db.actor:set_character_community("actor_dolg",0,0)
   sgm_functions.write_variable("stat_community","actor_dolg")
   give_info("actor_entry_in_dolg")
   disable_info("actor_entry_in_rasvet")
   disable_info("actor_entry_in_monolith")
   disable_info("actor_entry_in_killer")
   disable_info("actor_entry_in_bandit")
   disable_info("actor_entry_in_freedom")
   give_info("actor_noted_dolgs")
   dialogs.relocate_item_section(actor,"dolg_outfit","in")
   dialogs.relocate_money(npc,2000,"in")
   give_skill_book()
end
function jup_actor_exit_dolg(actor,npc)
   db.actor:set_character_community("actor",0,0)
   sgm_functions.write_variable("stat_community","no_community")
   disable_info("actor_entry_in_bandit")
   disable_info("actor_entry_in_rasvet")
   disable_info("actor_entry_in_monolith")
   disable_info("actor_entry_in_killer")
   disable_info("actor_entry_in_dolg")
   disable_info("actor_entry_in_freedom")
end
function jup_actor_exit_freedom(actor,npc)
   db.actor:set_character_community("actor",0,0)
   sgm_functions.write_variable("stat_community","no_community")
   disable_info("actor_entry_in_bandit")
   disable_info("actor_entry_in_rasvet")
   disable_info("actor_entry_in_monolith")
   disable_info("actor_entry_in_killer")
   disable_info("actor_entry_in_dolg")
   disable_info("actor_entry_in_freedom")
end
function jup_search_anomal_prototype_is_retail(actor,npc)
   return not check_item_count("af_prodigy",2,true)
end
function jup_search_anomal_prototype_is_gross(actor,npc)
   return check_item_count("af_prodigy",2,true)
end
function jup_search_anomal_prototype_anyhas(actor,npc)
   local result=false
   for i=1,6 do
      if db.actor:object("af_prodigy_"..i.."_danger") then
         result=true
      end
   end
   return result
end
function jup_search_anomal_prototype_lasted(actor,npc)
   if has_alife_info("jup_search_anomal_prototype_prodigy_5_bringed") then
      give_info("jup_search_anomal_prototype_prodigy_lasted")
   end
end
function jup_search_anomal_prototype_bring(actor,npc)
   local info_count=0
   for i=1,6 do
      if db.actor:object("af_prodigy_"..i.."_danger") then
         dialogs.relocate_item_section(npc,"af_prodigy_"..i.."_danger","out")
         if dont_has_alife_info("jup_search_anomal_prototype_prodigy_1_bringed") then
            give_info("jup_search_anomal_prototype_prodigy_1_bringed")
         elseif dont_has_alife_info("jup_search_anomal_prototype_prodigy_2_bringed") then
            give_info("jup_search_anomal_prototype_prodigy_2_bringed")
         elseif dont_has_alife_info("jup_search_anomal_prototype_prodigy_3_bringed") then
            give_info("jup_search_anomal_prototype_prodigy_3_bringed")
         elseif dont_has_alife_info("jup_search_anomal_prototype_prodigy_4_bringed") then
            give_info("jup_search_anomal_prototype_prodigy_4_bringed")
         elseif dont_has_alife_info("jup_search_anomal_prototype_prodigy_5_bringed") then
            give_info("jup_search_anomal_prototype_prodigy_5_bringed")
         elseif dont_has_alife_info("jup_search_anomal_prototype_prodigy_6_bringed") then
            give_info("jup_search_anomal_prototype_prodigy_6_bringed")
         end
      end
      if has_alife_info("jup_search_anomal_prototype_prodigy_"..i.."_bringed") then
         info_count=info_count+1
      end
   end
   if info_count>=6 then
      recover_info("jup_search_anomal_prototype_prodigy_all_bringed")
   end
end
function jup_search_anomal_prototype_mini_reward(actor,npc)
   dialogs.relocate_money(npc,r_quest_params("number","jup_search_anomal_prototype_reward",5000),"in")
   give_secret(1)
   
   give_skill_book()
   jup_search_anomal_prototype_bonus_spawner()
end
function jup_search_anomal_prototype_full_reward(actor,npc)
   dialogs.relocate_item_section(actor,"af_prodigy_1_processed","in")
   dialogs.relocate_item_section(actor,"af_prodigy_2_processed","in")
   dialogs.relocate_item_section(actor,"af_prodigy_3_processed","in")
   dialogs.relocate_item_section(actor,"af_prodigy_4_processed","in")
   dialogs.relocate_item_section(actor,"af_prodigy_5_processed","in")
   dialogs.relocate_item_section(actor,"af_prodigy_6_processed","in")
   give_secret(2)
   
   give_skill_book()
   jup_search_anomal_prototype_bonus_spawner()
end
function jup_search_anomal_prototype_bonus_spawner()
   give_info("jup_search_anomal_prototype_gather_allowed")
   if get_rnd(1,2)==1 then
      create("af_prodigy_"..math.random(1,6).."_danger",373.508,34.622,-21.3042,1583613,4543)
      create("af_prodigy_"..math.random(1,6).."_danger",291.529,-2.278,-240.180,1462319,4543)
   else
      create("af_prodigy_"..math.random(1,6).."_danger",204.115,25.240,-444.690,1311890,4543)
      create("af_prodigy_"..math.random(1,6).."_danger",-70.158,7.920,244.519,771013,4543)
   end
   if get_rnd(1,2)==1 then
      create("af_prodigy_"..math.random(1,6).."_danger",-206.391,3.342,-426.363,366735,4543)
      create("af_prodigy_"..math.random(1,6).."_danger",454.237,27.313,-458.344,1436859,4543)
   else
      create("af_prodigy_"..math.random(1,6).."_danger",231.155,-5.688,432.597,1111538,4543)
      create("af_prodigy_"..math.random(1,6).."_danger",103.302,24.210,-175.352,891699,4543)
   end
   if get_rnd(1,2)==1 then
      create("af_prodigy_"..math.random(1,6).."_danger",-28.861,-0.235,130.624,159879,4543)
      create("af_prodigy_"..math.random(1,6).."_danger",-5.860,-0.421,-321.150,189238,4543)
   else
      create("af_prodigy_"..math.random(1,6).."_danger",-135.823,-0.526,50.636,64182,4543)
      create("af_prodigy_"..math.random(1,6).."_danger",-193.646,-2.155,-40.579,27225,4543)
   end
   disable_info("opt_deactivate_blackday")
end
function pri_actor_have_science_docks(actor,npc)
   return db.actor:object("important_science_docks")
end
function pri_actor_dont_science_docks(actor,npc)
   return not db.actor:object("important_science_docks")
end
function pri_actor_give_science_docks(actor,npc)
   dialogs.relocate_item_section(npc,"important_science_docks","out")
end
function pri_have_monolith_case(actor,npc)
   return db.actor:object("zat_intercepted_case")
end
function pri_give_monolith_case(actor,npc)
   dialogs.relocate_item_section(npc,"zat_intercepted_case","out")
   game_autosave("save_zat_deliver_monolith_case_bring")
end
function pri_deliver_monolith_reward_first(actor,npc)
   dialogs.relocate_item_section(actor,"af_dummy_dummy","in")
   dialogs.relocate_item_section(actor,"ammo_vog-25","in",5)
   dialogs.relocate_item_section(actor,"ammo_50bmg","in",4)
   dialogs.relocate_item_section(actor,"ammo_5.45x39_ap","in",6)
   give_skill_book()
   dialogs.relocate_money(npc,r_quest_params("number","pri_deliver_monolith_reward_cell1",5000),"in")
   
   give_secret(1)
end
function pri_deliver_monolith_reward_second(actor,npc)
   dialogs.relocate_item_section(actor,"af_dummy_glassbeads","in")
   dialogs.relocate_item_section(actor,"itm_gunsmith_toolkit","in",3)
   dialogs.relocate_item_section(actor,"wpn_addon_silencer_9x39","in")
   dialogs.relocate_item_section(actor,"ammo_5.45x39_ap","in",6)
   give_skill_book()
   dialogs.relocate_money(npc,r_quest_params("number","pri_deliver_monolith_reward_cell2",3000),"in")
   
   give_secret(1)
end
function pri_deliver_monolith_reward_third(actor,npc)
   dialogs.relocate_item_section(actor,"itm_outfit_toolkit","in",2)
   dialogs.relocate_item_section(actor,"af_dummy_battery","in")
   dialogs.relocate_item_section(actor,"ammo_5.45x39_ap","in",6)
   give_skill_book()
   dialogs.relocate_money(npc,r_quest_params("number","pri_deliver_monolith_reward_cell3",2000),"in")
   
   give_secret(1)
end
function pri_deliver_monolith_reward_four(actor,npc)
   dialogs.relocate_item_section(actor,"af_ice","in")
   dialogs.relocate_item_section(actor,"emulator_brain_waves","in")
   dialogs.relocate_item_section(actor,"ammo_vog-25","in",2)
   dialogs.relocate_item_section(actor,"ammo_5.45x39_ap","in",6)
   give_skill_book()
   dialogs.relocate_money(npc,r_quest_params("number","pri_deliver_monolith_reward_cell4",4000),"in")
   
   give_secret(1)
end
function pri_kill_kasilov_reward(actor,npc)
   dialogs.relocate_item_section(actor,"device_pda_kasilov","out")
   dialogs.relocate_item_section(actor,"ammo_7.62x51_ap","in",5)
   dialogs.relocate_item_section(actor,"ammo_7.62x54_sv","in",5)
   dialogs.relocate_item_section(actor,"ammo_5.45x39_ap","in",3)
   dialogs.relocate_item_section(actor,"personal_rukzak","in")
   give_skill_book()
   dialogs.relocate_money(npc,r_quest_params("number","pri_deliver_monolith_reward_cell5",5000),"in")
   db.actor:set_character_community("actor_monolit",0,0)
   
   sgm_functions.write_variable("stat_community","actor_monolit")
   disable_info("actor_entry_in_bandit")
   disable_info("actor_entry_in_rasvet")
   disable_info("actor_entry_in_killer")
   disable_info("actor_entry_in_dolg")
   disable_info("actor_entry_in_freedom")
   give_info("actor_entry_in_monolith")
   give_info("actor_noted_monoliths")
   give_secret(1)
end
function pri_actor_exit_monolith(actor,npc)
   db.actor:set_character_community("actor",0,0)
   sgm_functions.write_variable("stat_community","no_community")
   disable_info("actor_entry_in_bandit")
   disable_info("actor_entry_in_rasvet")
   disable_info("actor_entry_in_monolith")
   disable_info("actor_entry_in_dolg")
   disable_info("actor_entry_in_freedom")
end
function pri_assault_monolith_base_reward(actor,npc)
   local reward=r_quest_params("number","pri_assault_monolith_base_reward",15000)
   if has_alife_info("pri_assault_monolith_base_squad_leader_death") then
      reward=reward-3000
   end
   if has_alife_info("pri_assault_monolith_base_squad_soldier1_death") then
      reward=reward-1500
   end
   if has_alife_info("pri_assault_monolith_base_squad_soldier2_death") then
      reward=reward-1500
   end
   if has_alife_info("pri_assault_monolith_base_squad_soldier3_death") then
      reward=reward-1500
   end
   if has_alife_info("pri_assault_monolith_base_squad_soldier4_death") then
      reward=reward-1600
   end
   if reward>0 then
   dialogs.relocate_money(npc,reward,"in")
   end
   dialogs.relocate_item_section(actor,"itm_outfit_toolkit","in")
   dialogs.relocate_item_section(actor,"itm_gunsmith_toolkit","in")
   dialogs.relocate_item_section(actor,"wpn_xm8","in")
   dialogs.relocate_item_section(actor,"ammo_5.56x45_ss190","in",4)
   dialogs.relocate_item_section(actor,"ammo_5.45x39_ap","in",4)
   give_secret(2)
   
   give_skill_book()
end
function pri_assault_back_to_home(actor,npc)
   level.add_pp_effector("black.ppe",7612,false)
   npc:set_npc_position(vector():set(154.483,-0.096,-190.016))
   db.actor:set_actor_position(vector():set(127.524,-0.520,-180.340))
   give_info("pri_assault_monolith_base_teleport")
end
function pri_bloodsucker_vaccine_vidacha(actor,npc)
   create("pri_bloodsucker_room_reward_spot",61.821,16.526,-125.120,278969,666)
   create("pri_bloodsucker_half_human_2",47.139,16.540,-138.432,260827,666)
   dialogs.relocate_item_section(actor,"quest_bloodsucker_vaccine","in")
end
function pri_expiation_sin_1_spawner1(actor,npc)
   create("quest_medic_medkit",322.347,42.833,-404.514,1507608,666)
end
function pri_expiation_sin_1_spawner2(actor,npc)
   create("quest_live_water",-34.601,15.610,-324.846,660275,666)
end
function pri_expiation_sin_1_give_medic_medkit(actor,npc)
   dialogs.relocate_item_section(npc,"quest_medic_medkit","out")
end
function pri_expiation_sin_1_give_anabiotics(actor,npc)
   dialogs.relocate_item_section_from_actor(actor,npc,"drug_anabiotic",10)
end
function pri_expiation_sin_1_give_live_water(actor,npc)
   dialogs.relocate_item_section(npc,"quest_live_water","out")
   create("pri_monolit_brother_leader",35.852,1.163,360.252,245838,666)
   create("pri_monolit_brother_member1",36.687,1.206,355.955,246816,666)
   create("pri_monolit_brother_member2",35.462,1.204,366.607,245847,666)
   create("pri_monolit_brother_member3",38.252,1.206,359.683,249917,666)
   create("pri_monolit_brother_member4",37.085,1.203,373.399,247895,666)
end
function pri_expiation_sin_1_book(actor,npc)
   give_skill_book("skill_book_gauss")
end
function pri_expiation_sin_1_reward(actor,npc)
   dialogs.relocate_money(npc,r_quest_params("number","pri_expiation_sin_1_reward",7500),"in")
   dialogs.relocate_item_section(actor,"killer_outfit","in")
   dialogs.relocate_item_section(actor,"wpn_p90","in")
   dialogs.relocate_item_section(actor,"ammo_5.56x45_ss190","in",4)
   dialogs.relocate_item_section(actor,"ammo_5.45x39_ap","in",4)
   dialogs.relocate_item_section(actor,"ammo_9x19_spp","in",3)
   give_secret(1)
end
function pri_expiation_sin_2_reward(actor,npc)
   dialogs.relocate_money(npc,r_quest_params("number","pri_expiation_sin_2_reward",8000),"in")
   dialogs.relocate_item_section(actor,"ammo_5.45x39_ap","in",4)
   dialogs.relocate_item_section(actor,"ammo_50bmg","in",5)
   dialogs.relocate_item_section(actor,"wpn_awm","in")
   give_secret(2)
end
function pri_expiation_sin_3_reward(actor,npc)
   local m_reward=r_quest_params("number","pri_expiation_sin_3_reward",25000)
   if has_alife_info("pri_monolit_brother_leader_death") then
      m_reward=m_reward-11000
   end
   dialogs.relocate_money(npc,m_reward,"in")
   dialogs.relocate_item_section(actor,"ammo_50bmg","in",2)
   dialogs.relocate_item_section(actor,"ammo_5.45x39_ap","in",4)
   dialogs.relocate_item_section(actor,"ammo_5.45x39_fmj","in",4)
   dialogs.relocate_item_section(actor,"ammo_5.56x45_ss190","in",4)
   dialogs.relocate_item_section(actor,"ammo_5.45x39_ap","in",4)
   dialogs.relocate_item_section(actor,"ammo_7.62x54_sv","in",3)
   dialogs.relocate_item_section(actor,"bag_medkit_4","in")
   dialogs.relocate_item_section(actor,"bio_bandage","in",5)
   dialogs.relocate_item_section(actor,"drug_engine","in")
   local cev_plastin_chance=math.random(100)
   if cev_plastin_chance<=25 then
      dialogs.relocate_item_section(actor,"cev_plastin_5","in")
   elseif cev_plastin_chance>=85 then
      dialogs.relocate_item_section(actor,"cev_plastin_4","in")
   end
   if get_rnd(1,2)==1 then
      dialogs.relocate_item_section(actor,"af_dragon_eye","in")
   else
      dialogs.relocate_item_section(actor,"af_monolit","in")
   end
   give_secret(3)
end
function pri_rescue_underground_guide_reward(actor,npc)
   dialogs.relocate_item_section(actor,"af_gold_fish_breeding_2","in")
   dialogs.relocate_item_section(actor,"drug_engine","in")
   dialogs.relocate_item_section(actor,"ammo_50bmg","in",5)
   dialogs.relocate_money(npc,r_quest_params("number","pri_rescue_guide_reward",10000),"in")
   give_secret(2)
end
function pri_rescue_underground_guide_teleport(actor,npc)
   create("pri_hostage_miller",170.738,-0.590,-233.381,400081,854)
   db.actor:set_actor_position(vector():set(-7.679,9.151,-138.181))
   give_info("level_change_to_pripyat_from_underground")
   refresh_game_time(0,18)
   level.add_pp_effector("black.ppe",7779,false)
   set_ui_disabled()
   game_hide_menu()
   level.hide_indicators_safe()
   level.show_weapon(false)
end
function pri_signaller_toolkit_1_has(actor,npc)
   return db.actor:object("signaller_toolkit_1")
end
function pri_signaller_toolkit_1_bring(actor,npc)
   dialogs.relocate_item_section(npc,"signaller_toolkit_1","out")
end
function pri_signaller_toolkit_1_reward(actor,npc)
   dialogs.relocate_money(npc,2000,"in")
   if sgm_functions.read_variable("pri_mechanic_stripping")~=nil then
      sgm_functions.write_variable("pri_mechanic_stripping",sgm_functions.read_variable("pri_mechanic_stripping")+1)
   end
end
function pri_signaller_toolkit_2_has(actor,npc)
   return db.actor:object("signaller_toolkit_2")
end
function pri_signaller_toolkit_2_bring(actor,npc)
   dialogs.relocate_item_section(npc,"signaller_toolkit_2","out")
end
function pri_signaller_toolkit_2_reward(actor,npc)
   dialogs.relocate_money(npc,3200,"in")
   if sgm_functions.read_variable("pri_mechanic_stripping")~=nil then
      sgm_functions.write_variable("pri_mechanic_stripping",sgm_functions.read_variable("pri_mechanic_stripping")+3)
   end
end
------------------------------------------------------------------------------
--                        Функции автосохранений                            --
------------------------------------------------------------------------------
function save_pri_assault_monolith_base_began(actor,npc)
   game_autosave("save_pri_assault_monolith_base_began")
end
function save_pri_expiation_sin_3_follow_to_squad(actor,npc)
   game_autosave("save_pri_expiation_sin_3_follow_to_squad")
end
------------------------------------------------------------------------------
--                        Функции запуска квестов                           --
------------------------------------------------------------------------------
function zat_meet_authorities_agent(actor,npc)
   if get_global_pattern()==1 then
      create("zat_authorities_agent",-426.664,36.196,-396.447,138096,3992)
   else
      create("zat_authorities_agent",-430.950,2.888,5.783,133074,3992)
   end
   add_task("sgm_zat_meet_authorities_agent")
end
function zat_check_sbu_cell(actor,npc)
   create("zat_sbu_cell_spot",301.473,19.531,535.454,1480920,3992)
   local cell_items="flash_avoid_witnesses,grenade_f1,wpn_l85,grenade_f1,3,merc_outfit,helm_m40,money_5000,merc_patch"
   create_rukzak_item(cell_items,"zat_avoid_witnesses_cell",301.473,19.531,535.454,1480920,3992)
   add_task("sgm_zat_check_sbu_cell")
end
function zat_danger_parcel(actor,npc)
   if get_global_pattern()==1 then
      create("zat_duty_kanevskiy",576.494,10.687,-288.000,1841060,3992)
      create("zat_duty_kanevskiy_drug",581.163,10.810,-287.285,1842173,3992)
   else
      create("zat_duty_kanevskiy",-419.410,25.774,-219.004,149220,3992)
      create("zat_duty_kanevskiy_drug",-414.496,25.517,-216.123,156542,3992)
   end
   add_task("sgm_zat_danger_parcel")
end
function zat_meet_to_breeder(actor,npc)
   add_task("sgm_zat_meet_to_breeder")
end
function zat_meet_to_breeder_give(actor,npc)
   add_task("sgm_zat_meet_to_breeder")
   dialogs.relocate_item_section(actor,"rs_1b_outfit","in")
end
function zat_breeder_search_unknown(actor,npc)
   local rnd_acid_star=math.random(1,4)
   if get_global_pattern()==1 then
      if rnd_acid_star==1 then
         create("af_acid_star_spot",-259.719,12.223,367.558,423845,3992)
         create_rukzak_item("af_acid_star","zat_acid_star_rukzak",-259.719,12.223,367.558,423845,3992)
      elseif rnd_acid_star==2 then
         create("af_acid_star_spot",-253.6788482666,11.22700881958,364.15264892578,436906,3992)
         create_rukzak_item("af_acid_star","zat_acid_star_rukzak",-253.6788482666,11.22700881958,364.15264892578,436906,3992)
      elseif rnd_acid_star==3 then
         create("af_acid_star_spot",-269.97018432617,14.802196502686,363.20227050781,403339,3992)
         create_rukzak_item("af_acid_star","zat_acid_star_rukzak",-269.97018432617,14.802196502686,363.20227050781,403339,3992)
      else
         create("af_acid_star_spot",-264.40264892578,9.4098339080811,345.90191650391,414229,3992)
         create_rukzak_item("af_acid_star","zat_acid_star_rukzak",-264.40264892578,9.4098339080811,345.90191650391,414229,3992)
      end
   else
      if rnd_acid_star==1 then
         create("af_acid_star_spot",-419.26013183594,-7.0959901809692,147.30169677734,189344,3992)
         create_rukzak_item("af_acid_star","zat_acid_star_rukzak",-419.26013183594,-7.0959901809692,147.30169677734,189344,3992)
      elseif rnd_acid_star==2 then
         create("af_acid_star_spot",-428.85479736328,-6.523756980896,168.57740783691,189344,3992)
         create_rukzak_item("af_acid_star","zat_acid_star_rukzak",-428.85479736328,-6.523756980896,168.57740783691,189344,3992)
      elseif rnd_acid_star==3 then
         create("af_acid_star_spot",-432.40417480469,-6.8553810119629,196.6003112793,189344,3992)
         create_rukzak_item("af_acid_star","zat_acid_star_rukzak",-432.40417480469,-6.8553810119629,196.6003112793,189344,3992)
      else
         create("af_acid_star_spot",-465.89935302734,-7.1441507339478,192.4027557373,189344,3992)
         create_rukzak_item("af_acid_star","zat_acid_star_rukzak",-465.89935302734,-7.1441507339478,192.4027557373,189344,3992)
      end
   end
   add_task("sgm_zat_breeder_search_unknown")
end
function geonezis_all_greh_quest_main_precondition(actor,npc) 
   add_task("geonezis_all_greh_quest_main_precondition")
end
function zat_bandit_chapaev_govor(actor,npc) 
   add_task("zat_bandit_chapaev_govor")
end
function zat_accompany_to_boat(actor,npc)
   create("zat_accompany_to_boat_spot",148.695,-7.344,183.552,1220159,3992)
   add_task("sgm_zat_accompany_to_boat")
end
function zat_refer_parcel(actor,npc)
   add_task("sgm_zat_refer_parcel")
   dialogs.relocate_item_section(actor,"zat_postman_parcel","in")
   create("zat_monsters_start_bloodsucker",-303.554,18.195,592.149,340395,3992)
end
function zat_assault_bandit_base(actor,npc)
   add_task("sgm_zat_assault_bandit_base")
end
function zat_deliver_monolith_case(actor,npc)
   add_task("sgm_zat_deliver_monolith_case")
end
function zat_will_leave_jupiter(actor,npc)
   add_task("sgm_zat_will_leave_jupiter")
end
function zat_will_come_rasvet_base(actor,npc)   
   add_task("geonezis_all_greh_quest_rasvet_precondition")
end
function zat_bandit_kill_shakal(actor,npc)
   create("zat_bandit_kill_shakal_spot",-130.121,24.142,-417.739,680773,3992)
   create("zat_killer_shakal",-147.467,23.585,-428.157,646858,4)
   create("zat_shakal_bodyguard",-147.223,23.582,-432.216,648288,3992)
   create("zat_shakal_interception",-148.964,23.573,-423.975,643965,3992)
   create("zat_shakal_rpg_1",-133.013,27.279,-389.703,675531,3992)
   create("zat_shakal_rpg_2",-138.134,27.280,-389.639,666298,3992)
   add_task("sgm_zat_bandit_kill_shakal")
   game_autosave("save_zat_bandit_kill_shakal_search")
end
function zat_bring_flash_light(actor,npc)
   if get_global_pattern()==1 then
      create("quest_flash_light",-181.315,20.005,-184.315,578636,3992)
   else
      create("quest_flash_light",-163.873,8.219,83.099,613892,3992)
   end
   add_task("sgm_zat_bring_flash_light")
end
function zat_bring_drink_beylis(actor,npc)
   add_task("sgm_zat_bring_drink_beylis")
end
function zat_bring_sharpshooter_bino(actor,npc)
   create("zat_bandit_base_guider",457.882,37.498,-2.563,1712008,3992)
   if get_global_pattern()==1 then
      create("quest_sharpshooter_binocular",-395.200,12.319,10.139,51661,3992)
   else
      create("quest_sharpshooter_binocular",-192.696,5.122,-278.327,390282,3992)
   end
   add_task("sgm_zat_bring_sharpshooter_bino")
end
function zat_monsters_wave_quest(actor,npc)
   create("zat_barge_commander",148.775,-6.824,-134.896,1219831,3992)
   create("zat_barge_stalker1",132.121,-3.659,-142.520,1192032,3992)
   create("zat_barge_stalker2",143.593,-4.202,-161.406,1211195,3992)
   create("zat_barge_stalker3",142.008,-6.823,-142.053,1208939,3992)
   create("zat_barge_stalker4",169.499,3.800,-162.827,1255930,3992)
   create("zat_barge_stalker5",138.512,-6.827,-142.066,1203498,3992)
   create("zat_barge_stalker6",137.932,-6.824,-135.269,1202391,3992)
   create("zat_barge_stalker7",158.784,-6.515,-132.784,1238020,3992)
   create("zat_noah_barge_main_spot",151.455,-6.823,-138.430,1224672,3992)
   create("zat_noah_barge_firepos_spot",132.904,-3.658,-135.626,1196686,3992)
   add_task("sgm_zat_monsters_wave")
end
function jup_bring_heavy_medkits(actor,npc)
   create("quest_heavy_medkits",348.967,20.666,-314.291,1273602,4543)
   add_task("sgm_jup_bring_heavy_medkits")
end
function jup_bring_photo_device(actor,npc)
   create("quest_photo_device",12.862,24.297,-408.320,734792,4543)
   add_task("sgm_jup_bring_photo_device")
end
function jup_bring_arms_case(actor,npc)
   create("quest_arms_case",41.033,0.369,-255.812,252954,4543)
   create("pri_monolith_case_guard_1",35.032,0.241,-252.660,243954,4543)
   create("pri_monolith_case_guard_2",35.032,0.241,-252.660,243954,4543)
   add_task("sgm_jup_bring_arms_case")
end
function jup_find_gromoboy_vintar(actor,npc)
   create("jup_monolith_thief",-335.597,1.494,263.818,149065,4543):on_death()
   create_dead_body("monolith_dead_body_2","ammo_9x39_pab9",389.342,0.600,321.431,1330578,4543)
   add_task("sgm_jup_find_gromoboy_vintar")
end
function jup_gromoboy_add_spawn(actor,npc)
   create("jup_find_gromoboy_vintar_spot",387.004,0.599,321.342,1327486,4543)
   local rnd_gromoboy=math.random(1,5)
   if rnd_gromoboy==1 then
      create("wpn_gromoboy_vintorez",381.08807373047,6.9604020118713,311.65075683594,1319054,4543)
   elseif rnd_gromoboy==2 then
      create("wpn_gromoboy_vintorez",362.90637207031,1.0815975666046,335.55255126953,1293265,4543)
   elseif rnd_gromoboy==3 then
      create("wpn_gromoboy_vintorez",393.5439453125,32.886432647705,361.73297119141,1336643,4543)
   elseif rnd_gromoboy==4 then
      create("wpn_gromoboy_vintorez",390.89743041992,4.7360033988953,331.01290893555,1331632,4543)
   else
      create("wpn_gromoboy_vintorez",365.70455932617,38.065956115723,333.98034667969,1296669,4543)
   end
end
function jup_destroy_night_killers(actor,npc)
   create("jup_night_killers_spot",224.694,-9.701,163.109,1101098,4543)
   create("jup_night_killer_1",226.305,-6.898,170.862,1096311,4543)
   create("jup_night_killer_2",221.680,-6.898,170.785,1096311,4543)
   create("jup_night_killer_3",224.125,-5.768,166.798,1096309,4543)
   create("jup_night_killer_4",224.155,-7.303,156.093,1099905,4543)
   create("jup_night_killer_5",220.178,-29.688,154.252,1093835,4543)
   create("jup_night_killer_6",230.813,-12.316,189.934,1111233,4543)
   create("jup_night_killer_7",229.419,-9.415,192.021,1103387,4543)
   add_task("sgm_jup_destroy_night_killers")
end
function jup_follow_scientists(actor,npc)
   sgm_functions.write_variable("jup_fw_scientists_deaths",0)
   create("jup_mine_zombied_1",-45.294,23.780,-335.701,642480,4543)
   create("jup_mine_zombied_2",-77.302,23.883,-33.869,591810,4543)
   create("jup_mine_zombied_3",-98.973,24.025,-330.878,555829,4543)
   create("jup_mine_zombied_4",-124.607,23.938,-332.254,509581,4543)
   create("jup_mine_zombied_5",-122.798,24.586,-314.923,513422,4543)
   create("jup_mine_zombied_6",-117.867,23.857,-302.533,522437,4543)
   create("jup_mine_zombied_7",-90.212,23.807,-302.245,569725,4543)
   create("jup_mine_zombied_8",-53.059,23.676,-307.369,629844,4543)
   create("jup_mine_zombied_1",-45.294,23.780,-335.701,642480,4543)
   create("jup_mine_zombied_2",-77.302,23.883,-33.869,591810,4543)
   create("jup_mine_zombied_3",-98.973,24.025,-330.878,555829,4543)
   create("jup_mine_zombied_4",-124.607,23.938,-332.254,509581,4543)
   create("jup_mine_zombied_5",-122.798,24.586,-314.923,513422,4543)
   create("jup_mine_zombied_6",-117.867,23.857,-302.533,522437,4543)
   create("jup_mine_zombied_7",-90.212,23.807,-302.245,569725,4543)
   create("jup_mine_zombied_8",-53.059,23.676,-307.369,629844,4543)
   create("jup_mine_zombied_9",-180.892,3.331,-77.640,410666,4543)
   create("jup_mine_zombied_10",-169.949,0.749,-153.351,429141,4543)
   create("jup_mine_zombied_11",-141.502,2.363,-150.306,480621,4543)
   create("jup_mine_zombied_12",-164.128,-0.202,-87.584,440684,4543)
   add_task("sgm_jup_follow_scientists")
   game_autosave("save_jup_follow_scientists_init")
end
function jup_hostage_dest_spot(actor,npc)
   create("jup_hostage_dest_spot",-1.018,3.413,204.178,714145,4543)
end
function jup_bring_detector_kit(actor,npc)
  local rnd_spawn=math.random(1,2)
  if rnd_spawn==1 then
     create("detector_modify_toolkit",417.800,32.372,-361.604,1378094,4235)
  else
     create("detector_modify_toolkit",417.800,32.372,-361.604,1378094,4235)
  end
  add_task("sgm_jup_bring_detector_kit")
end
function jup_rasvet_destroy_snorks(actor,npc)
   --create_force("jup_rasvet_snorks_squad",25.590,1.619,306.063,757495,4543)
   add_task("sgm_jup_rasvet_destroy_snorks")
end
function jup_mercenary_check_plant(actor,npc)
   create("jup_plant_main_vhod_spot",254.282,27.201,-223.706,1143400,4543)
   create("jup_plant_perimetr_spot",324.742,26.870,-255.489,1236544,4543)
   create("jup_plant_second_stage_spot",327.460,34.593,-226.167,1240512,4543)
   create("jup_plant_building_exit_spot",344.514,26.869,-253.907,1265463,4543)
   add_task("sgm_jup_mercenary_check_plant")
end
function jup_mercenary_check_plant_capture_plant(actor,npc)
   create("jup_psi_controller_2",347.689,27.183,-277.183,1270540,4543)
   create("jup_psi_controller_3",342.520,27.975,-232.123,1262289,4543)
   create("jup_ambush_zombied_11",298.274,27.077,-267.674,1200276,4543)
   create("jup_ambush_zombied_12",267.152,26.924,-244.206,1160457,4543)
   create("jup_ambush_zombied_13",278.499,27.612,-231.468,1175114,4543)
   create("jup_ambush_zombied_14",241.849,28.025,-253.978,1126950,4543)
   create("jup_ambush_zombied_15",290.338,26.228,-239.453,1190339,4543)
end
function jup_mercenary_check_plant_squad(actor,npc)
   create("jup_killer_first_squad_commander",186.958,28.213,-424.229,1034208,4543)
   create("jup_killer_first_squad_member1",181.896,28.165,-420.229,1025636,4543)
   create("jup_killer_first_squad_member2",181.806,28.178,-428.548,1025624,4543)
   create("jup_killer_first_squad_member3",177.744,28.165,-423.131,1018165,4543)
end
function jup_mercenary_check_plant_again_squad(actor,npc)
   create("jup_killer_second_squad_commander",186.958,28.213,-424.229,1034208,4543)
   create("jup_killer_second_squad_member1",181.896,28.165,-420.229,1025636,4543)
   create("jup_killer_second_squad_member2",181.806,28.178,-428.548,1025624,4543)
   create("jup_killer_second_squad_member3",177.744,28.165,-423.131,1018165,4543)
end
function jup_rasvet_eliminate_burrows(actor,npc)
   xr_effects.jup_rasvet_eliminate_burrows_hole_1_launch()
   add_task("sgm_jup_rasvet_eliminate_burrows")
end
function jup_search_anomal_prototype(actor,npc)
   dialogs.relocate_item_section(actor,"detector_serafim","in")
   if get_rnd(1,2)==1 then
      create("af_prodigy_1_danger",-350.127,40.109,-368.417,255474,4543)
      create("af_prodigy_2_danger",393.724,-5.444,435.390,1616516,4543)
   else
      create("af_prodigy_1_danger",-17.765,24.970,320.719,908963,4543)
      create("af_prodigy_2_danger",15.353,9.714,-392.285,974688,4543)
   end
   if get_rnd(1,2)==1 then
      create("af_prodigy_3_danger",250.110,-29.630,112.478,1138454,4543)
      create("af_prodigy_4_danger",-394.972,14.576,353.005,53094,4543)
   else
      create("af_prodigy_3_danger",81.913,5.096,27.503,854108,4543)
      create("af_prodigy_4_danger",366.424,-5.857,370.567,1297874,4543)
   end
   if get_rnd(1,2)==1 then
      create("af_prodigy_5_danger",126.023,-0.241,207.342,352774,4543)
      create("af_prodigy_6_danger",-63.226,-0.422,-103.768,126469,4543)
   else
      create("af_prodigy_5_danger",114.879,-0.536,-243.568,340252,4543)
      create("af_prodigy_6_danger",192.634,-1.155,287.737,422584,4543)
   end
   add_task("sgm_jup_search_anomal_prototype")
end
function pri_necessary_kill_kasilov(actor,npc)
   create("pri_army_kasilov",182.344,-0.119,-187.372,412041,705)
   create("pri_army_chasovoy",173.549,-0.508,-187.101,403066,705)
   add_task("sgm_pri_necessary_kill_kasilov")
end
function pri_find_science_briefing(actor,npc)
   create("pri_ecolog_briefing",323.518,-8.536,275.314,485438,4674):on_death()
   add_task("sgm_pri_find_science_briefing")
   game_autosave("save_jup_night_agent_meeting_talked")
end
function pri_science_briefing_reward_cell(actor,npc)
   create("pri_briefing_reward_spot",339.287,30.279,-340.712,1531915,3992)
   cell_items="money_5000,detector_omega,itm_gunsmith_toolkit,itm_outfit_toolkit,bag_medkit_2"
   create_rukzak_item(cell_items,"zat_science_briefing_cell",339.287,30.279,-340.712,1531915,3992)
end
function pri_assault_monolith_base(actor,npc)
   create("pri_assault_monolith_firepos_spot",9.466,4.493,287.466,210359,712)
   create("pri_assault_monolith_base_spot",20.525,4.904,373.889,224588,694)
   create("pri_assault_squad_leader",128.864,-0.484,-160.310,355556,705)
   create("pri_assault_squad_soldier1",133.627,-0.475,-158.317,361207,705)
   create("pri_assault_squad_soldier2",133.230,-0.509,-151.146,360363,705)
   create("pri_assault_squad_soldier3",127.249,-0.469,-153.538,353966,705)
   create("pri_assault_squad_soldier4",136.070,-0.507,-163.228,363780,705)
   add_task("sgm_pri_assault_monolith_base")
end
function pri_bloodsucker_vaccine(actor,npc)
   create("pri_bloodsucker_room_spot",47.655,16.540,-139.592,261694,698)
   add_task("sgm_pri_bloodsucker_vaccine")
end
function pri_expiation_sin_1_quest(actor,npc)
   create("drug_anabiotic",32.794,0.048,354.131,241793,666)
   create("drug_anabiotic",27.988,-2.934,367.586,235003,666)
   create("drug_anabiotic",112.071,1.110,394.982,336351,666)
   create("drug_anabiotic",132.469,5.194,-206.210,361135,666)
   create("drug_anabiotic",-227.879,-2.307,80.840,331134,666)
   create("drug_anabiotic",-223.835,-2.375,82.624,335930,666)
   create("drug_anabiotic",160.212,-8.607,176.161,1240735,666)
   give_item_to_sid("drug_anabiotic","zat_a2_actor_treasure")
   give_item_to_sid("drug_anabiotic","jup_b202_actor_treasure")
   give_item_to_sid("drug_anabiotic","pri_a16_actor_treasure")
   create("pri_monolit_brother_leader_zombied",35.852,1.163,360.252,245838,666)
   create("pri_monolit_brother_member1_zombied",36.687,1.206,355.955,246816,666)
   create("pri_monolit_brother_member2_zombied",35.462,1.204,366.607,245847,666)
   create("pri_monolit_brother_member3_zombied",38.252,1.206,359.683,249917,666)
   create("pri_monolit_brother_member4_zombied",37.085,1.203,373.399,247895,666)
   add_task("sgm_pri_expiation_sin_1")
end
function pri_expiation_sin_2_quest(actor,npc)
   create("pri_monolith_taynik_1",-292.939,18.236,352.931,360299,666)
   create("pri_monolith_taynik_2",-133.369,24.562,-399.488,674213,666)
   create("pri_monolith_taynik_3",-168.219,20.030,-169.211,605084,666)
   create("pri_monolith_taynik_4",-367.163,39.999,-327.279,230164,666)
   create("pri_monolith_taynik_5",237.024,33.704,-332.134,1370256,666)
   create("pri_monolith_taynik_6",374.906,34.314,-20.161,1586333,666)
   create("pri_monolith_taynik_7",389.957,-5.702,229.289,1608580,666)
   create("pri_monolith_taynik_8",233.920,8.422,-18.156,1364159,666)
   create("pri_monolith_taynik_9",76.783,-0.295,31.003,1021131,666)
   create("pri_expiation_sin_2_taynik_1_spot",-292.939,18.236,352.931,360299,666)
   create("pri_expiation_sin_2_taynik_2_spot",-133.369,24.562,-399.488,674213,666)
   create("pri_expiation_sin_2_taynik_3_spot",-168.219,20.030,-169.211,605084,666)
   create("pri_expiation_sin_2_taynik_4_spot",-367.163,39.999,-327.279,230164,666)
   create("pri_expiation_sin_2_taynik_5_spot",237.024,33.704,-332.134,1370256,666)
   create("pri_expiation_sin_2_taynik_6_spot",374.906,34.314,-20.161,1586333,666)
   create("pri_expiation_sin_2_taynik_7_spot",389.957,-5.702,229.289,1608580,666)
   create("pri_expiation_sin_2_taynik_8_spot",233.920,8.422,-18.156,1364159,666)
   create("pri_expiation_sin_2_taynik_9_spot",76.783,-0.295,31.003,1021131,666)
   add_task("sgm_pri_expiation_sin_2")
end
function pri_expiation_sin_3_quest(actor,npc)
   create("pri_knigi_vhod_spot",-169.344,0.560,-358.036,41200,666)
   create("pri_knigi_center_spot",-181.270,0.710,-364.715,33801,666)
   create("pri_knigi_antenni_spot",-173.870,0.615,-345.086,38576,666)
   create("pri_knigi_voice_spot",-184.795,0.699,-364.489,31547,666)
   add_task("sgm_pri_expiation_sin_3")
end
function pri_expiation_sin_3_create_base(actor,npc)
   create("pri_monolith_bodyguard",-180.116,0.668,-348.861,34718,666)
   create("pri_monolith_library_base_leader",-184.544,0.747,-343.627,31565,666)
   create("pri_monolith_library_base_mechanic",-170.889,0.548,-343.642,40297,666)
   create("pri_monolith_library_base_saint_1",-173.804,0.592,-346.318,38574,666)
   create("pri_monolith_library_base_saint_2",-178.322,0.569,-346.984,35634,666)
   create("pri_monolith_library_base_saint_3",-175.208,0.547,-342.163,37734,666)
   create("pri_monolith_library_base_sentry_1",-183.862,0.548,-352.536,31982,666)
   create("pri_monolith_library_base_sentry_2",-189.003,0.547,-367.837,29335,666)
   create("pri_monolith_library_base_sentry_3",-174.933,0.548,-356.054,37724,666)
   create("pri_monolith_library_base_sentry_4",-166.767,0.549,-370.279,43176,666)
   create("pri_monolith_library_base_sentry_5",-168.454,0.559,-363.206,41694,666)
   create("pri_monolith_library_base_sentry_6",-182.486,0.546,-368.317,32842,666)
   create("pri_monolith_library_base_sentry_7",-160.429,0.548,-353.332,47423,666)
   create("pri_monolith_library_base_sentry_8",-160.554,0.545,-335.640,47449,666)
   create("pri_monolith_library_base_sentry_9",-162.358,0.547,-364.874,46049,666)
   create("pri_monolith_library_base_sentry_10",-162.548,0.545,-370.912,46044,666)
end
function pri_expiation_sin_3_reinforcement(actor,npc)
   create("pri_monolit_brother_member5",-13.159,-0.424,371.172,180038,666)
   create("pri_monolit_brother_member6",-13.090,-0.440,363.539,180027,666)
   create("pri_monolit_brother_member7",-6.957,-0.326,363.583,188215,666)
   create("pri_monolit_brother_member8",-6.792,-0.240,371.513,188227,666)
   create("pri_killer_barricaded_1",-160.267,0.696,-353.495,47423,666)
   create("pri_killer_barricaded_2",-162.571,0.545,-365.358,46048,666)
   create("pri_killer_barricaded_3",-162.975,0.547,-370.903,45584,666)
   create("pri_killer_barricaded_4",-164.319,0.548,-337.944,44663,666)
   create("pri_killer_barricaded_5",-170.055,0.547,-357.361,40745,666)
   create("pri_killer_barricaded_6",-174.626,0.547,-355.953,38148,666)
   create("pri_killer_barricaded_7",-168.115,0.547,-362.689,42169,666)
   create("pri_killer_barricaded_8",-166.840,0.558,-370.568,43176,666)
   create("pri_killer_barricaded_9",-183.508,0.675,-368.741,32394,666)
   create("pri_killer_barricaded_10",-184.871,0.548,-360.890,31552,666)
   create("pri_killer_barricaded_11",-188.836,0.546,-370.056,29331,666)
   create("pri_killer_barricaded_12",-177.342,0.552,-357.021,36479,666)
   create("pri_killer_barricaded_13",-184.212,0.546,-352.839,31982,666)
   create("pri_killer_barricaded_14",-171.298,0.548,-343.003,39829,666)
   create("pri_killer_barricaded_15",-179.348,0.670,-348.898,35184,666)
   create("pri_killer_barricaded_16",-185.040,0.746,-345.500,31562,666)
   create("pri_killer_barricaded_17",-185.035,0.737,-341.418,31568,666)
   create("pri_killer_barricaded_18",-170.186,0.613,-353.044,40748,666)
end
function pri_rescue_underground_guide(actor,npc)
   create("pas_hostage_miller",67.862,3.093,7.428,39641,918)
   create("pas_guide_keeper_alfa_1",67.910522460938,3.0929253101349,3.3474779129028,39735,918)
   create("pas_guide_keeper_alfa_2",64.623123168945,3.0909745693207,6.3886680603027,39195,918)
   create("pas_guide_keeper_alfa_3",53.440910339355,1.8163622617722,-0.12416955828667,36580,918)
   create("pas_guide_keeper_alfa_4",44.966842651367,1.9165991544724,-2.8190498352051,33950,918)
   create("pas_guide_keeper_alfa_5",43.5202293396,1.9147347211838,-1.5195467472076,33597,918)
   create("pas_guide_keeper_alfa_6",31.860788345337,1.5922700166702,-9.2163009643555,30060,917)
   create("pas_guide_keeper_alfa_7",43.933292388916,1.5910373926163,-17.596403121948,33411,917)
   create("pas_guide_keeper_alfa_8",31.593544006348,0.21451917290688,-33.719612121582,30032,916)
   create("pas_guide_keeper_alfa_9",35.105571746826,0.16528853774071,-32.84704208374,30968,916)
   create("pas_guide_keeper_alfa_10",57.262401580811,1.5892297029495,-34.300758361816,37685,916)
   create("pas_guide_keeper_alfa_11",49.033813476563,1.5834773778915,-10.817937850952,33941,917)
   create("pas_guide_keeper_alfa_12",29.564182281494,-0.0020927786827087,10.934850692749,29516,921)
   create("pas_guide_keeper_alfa_13",26.984773635864,-3.4451484680176e-005,7.2493515014648,28910,921)
   create("pas_guide_keeper_alfa_14",16.088850021362,1.4349075555801,-19.655681610107,23612,910)
   create("pas_guide_keeper_alfa_15",-18.039449691772,1.5915925502777,-30.046287536621,5908,913)
   create("pas_guide_keeper_alfa_16",-14.069707870483,1.5912865400314,3.1127529144287,6783,911)
   create("pas_guide_keeper_alfa_17",-26.830018997192,3.379020690918,0.18996165692806,4351,911)
   create("pas_guide_keeper_alfa_18",-41.270706176758,3.1834766864777,-17.463136672974,1925,913)
   create("pas_guide_keeper_alfa_19",-18.275665283203,1.5874129533768,37.014610290527,5996,908)
   create("pas_guide_keeper_alfa_20",1.602419257164,0.0063468515872955,47.191032409668,14241,908)
   create("pas_guide_keeper_alfa_21",25.92430305481,0.37503758072853,30.084823608398,28521,921)
   create("pri_underground_lowering_spot",185.072,-0.509,-257.528,414748,696)
   create("pri_miller_destination_spot",132.434,-0.096,-180.161,359500,824)
   add_task("sgm_pri_rescue_underground_guide")
end
------------------------------------------------------------------------------
--                       Функции запуска мини-игр                           --
------------------------------------------------------------------------------
function start_minigame_21_point(actor,npc)
   local enemy_name=who_is_npc(actor,npc)
   run_dynamic_element(ui_mod_elements.card_game_21_point(),false,true)
   if enemy_name~=nil then
      ui_mod_elements.card_game_21_enemy_name=game.translate_string(level.object_by_id(enemy_name:id()):character_name())
   end
end
function start_question_game(actor,npc)
   run_dynamic_element(ui_mod_elements.question_game(),false,true)
end
------------------------------------------------------------------------------
--            Функции связанные с проверкой и передачей денег               --
------------------------------------------------------------------------------
function actor_have_100_money(actor, npc)
   return db.actor:money()>=100
end
function actor_give_100_money(actor, npc)
   dialogs.relocate_money(npc,100,"out")   
end
function actor_have_200_money(actor, npc)
   return db.actor:money()>=200
end
function actor_give_200_money(actor, npc)
   dialogs.relocate_money(npc,200,"out")   
end
function actor_have_300_money(actor, npc)
   return db.actor:money()>=300
end
function actor_give_300_money(actor, npc)
   dialogs.relocate_money(npc,300,"out")   
end
function actor_have_400_money(actor, npc)
   return db.actor:money()>=400
end
function actor_give_400_money(actor, npc)
   dialogs.relocate_money(npc,400,"out")   
end
function actor_have_500_money(actor, npc)
   return db.actor:money()>=500
end
function actor_give_500_money(actor, npc)
   dialogs.relocate_money(npc,500,"out")   
end
function actor_dont_500_money(actor, npc)
   return db.actor:money()<500
end
function actor_have_800_money(actor, npc)
   return db.actor:money()>=800
end
function actor_give_800_money(actor, npc)
   dialogs.relocate_money(npc,800,"out")   
end
function actor_have_1000_money(actor, npc)
   return db.actor:money()>=1000
end
function actor_less_1000_money(actor, npc)
   return db.actor:money()<1000
end
function actor_give_1000_money(actor, npc)
   dialogs.relocate_money(npc,1000,"out")   
end
function actor_have_1200_money(actor, npc)
   return db.actor:money()>=1200
end
function actor_less_1200_money(actor, npc)
   return db.actor:money()<1200
end
function actor_give_1200_money(actor, npc)
   dialogs.relocate_money(npc,1200,"out")   
end
function actor_have_1500_money(actor, npc)
   return db.actor:money()>=1500
end
function actor_less_1500_money(actor, npc)
   return db.actor:money()<1500
end
function actor_give_1500_money(actor, npc)
   dialogs.relocate_money(npc,1500,"out")   
end
function actor_have_1700_money(actor, npc)
   return db.actor:money()>=1700
end
function actor_give_1700_money(actor, npc)
   dialogs.relocate_money(npc,1700,"out")   
end
function actor_have_2500_money(actor, npc)
   return db.actor:money()>=2500
end
function actor_less_2500_money(actor, npc)
   return db.actor:money()<2500
end
function actor_give_2500_money(actor, npc)
   dialogs.relocate_money(npc,2500,"out")   
end
function actor_have_2000_money(actor, npc)
   return db.actor:money()>=2000
end
function actor_less_2000_money(actor, npc)
   return db.actor:money()<2000
end
function actor_give_2000_money(actor, npc)
   dialogs.relocate_money(npc,2000,"out")   
end
function actor_have_3000_money(actor, npc)
   return db.actor:money()>=3000
end
function actor_less_3000_money(actor, npc)
   return db.actor:money()<3000
end
function actor_give_3000_money(actor, npc)
   dialogs.relocate_money(npc,3000,"out")   
end
function actor_have_4000_money(actor, npc)
   return db.actor:money()>=4000
end
function actor_less_4000_money(actor, npc)
   return db.actor:money()<4000
end
function actor_give_4000_money(actor, npc)
   dialogs.relocate_money(npc,4000,"out")   
end
function actor_have_4500_money(actor, npc)
   return db.actor:money()>=4500
end
function actor_less_4500_money(actor, npc)
   return db.actor:money()<4500
end
function actor_give_4500_money(actor, npc)
   dialogs.relocate_money(npc,4500,"out")   
end
function actor_have_5000_money(actor, npc)
   return db.actor:money()>=5000
end
function actor_give_5000_money(actor, npc)
   dialogs.relocate_money(npc,5000,"out")   
end
function actor_less_5000_money(actor, npc)
   return db.actor:money()<5000
end
function actor_have_5400_money(actor, npc)
   return db.actor:money()>=5400
end
function actor_less_5400_money(actor, npc)
   return db.actor:money()<5400
end
function actor_give_5400_money(actor, npc)
   dialogs.relocate_money(npc,5400,"out")   
end
function actor_have_10000_money(actor, npc)
   return db.actor:money()>=10000
end
function actor_less_10000_money(actor, npc)
   return db.actor:money()<10000
end
function actor_give_10000_money(actor, npc)
   dialogs.relocate_money(npc,10000,"out")   
end
function actor_have_20000_money(actor, npc)
   return db.actor:money()>=20000
end
function actor_less_20000_money(actor, npc)
   return db.actor:money()<20000
end
function actor_give_20000_money(actor, npc)
   dialogs.relocate_money(npc,20000,"out")   
end
function actor_have_25000_money(actor, npc)
   return db.actor:money()>=25000
end
function actor_less_25000_money(actor, npc)
   return db.actor:money()<25000
end
function actor_give_25000_money(actor, npc)
   dialogs.relocate_money(npc,25000,"out")   
end
function actor_have_30000_money(actor, npc)
   return db.actor:money()>=30000
end
function actor_less_30000_money(actor, npc)
   return db.actor:money()<30000
end
function actor_give_30000_money(actor, npc)
   dialogs.relocate_money(npc,30000,"out")   
end
function actor_have_40000_money(actor, npc)
   return db.actor:money()>=40000
end
function actor_less_40000_money(actor, npc)
   return db.actor:money()<40000
end
function actor_give_40000_money(actor, npc)
   dialogs.relocate_money(npc,40000,"out")   
end
function actor_have_50000_money(actor, npc)
   return db.actor:money()>=50000
end
function actor_less_50000_money(actor, npc)
   return db.actor:money()<50000
end
function actor_give_50000_money(actor, npc)
   dialogs.relocate_money(npc,50000,"out")   
end
function actor_have_60000_money(actor, npc)
   return db.actor:money()>=60000
end
function actor_less_60000_money(actor, npc)
   return db.actor:money()<60000
end
function actor_give_60000_money(actor, npc)
   dialogs.relocate_money(npc,60000,"out")   
end
function actor_have_70000_money(actor, npc)
   return db.actor:money()>=70000
end
function actor_less_70000_money(actor, npc)
   return db.actor:money()<70000
end
function actor_give_70000_money(actor, npc)
   dialogs.relocate_money(npc,70000,"out")   
end
function actor_have_80000_money(actor, npc)
   return db.actor:money()>=80000
end
function actor_less_80000_money(actor, npc)
   return db.actor:money()<80000
end
function actor_give_80000_money(actor, npc)
   dialogs.relocate_money(npc,80000,"out")   
end
function actor_have_100000_money(actor, npc)
   return db.actor:money()>=100000
end
function actor_less_100000_money(actor, npc)
   return db.actor:money()<100000
end
function actor_give_100000_money(actor, npc)
   dialogs.relocate_money(npc,100000,"out")   
end
function actor_have_something_money(actor, npc)
   return db.actor:money()>0
end
------------------------------------------------------------------------------
--                            Банкир: вклад                                 --
------------------------------------------------------------------------------
local last_add_capital=0
function actor_something_deposit(actor, npc)
   return sgm_functions.read_variable("bankir_deposit_cash")>0
end
function actor_something_percent(actor, npc)
   return sgm_functions.read_variable("bankir_deposit_percent")>0
end
function actor_have_percent_money(actor, npc)
   local currert=sgm_functions.read_variable("bankir_capital_cash")
   local percent=math.floor(currert*0.1)
   return db.actor:money()>=percent
end
function actor_give_percent_money(actor, npc)
   local currert=sgm_functions.read_variable("bankir_capital_cash")
   local percent=math.floor(currert*0.1)
   dialogs.relocate_money(npc,percent,"out")   
end
function actor_less_100_money(actor, npc)
   return sgm_functions.read_variable("bankir_capital_cash")<100
end
function actor_more_100_money(actor, npc)
   return sgm_functions.read_variable("bankir_capital_cash")>=100
end
function bankir_load_money(first_speaker,second_speaker)
   db.actor:give_talk_message2("",game.translate_string("st_bankir_money").." "..db.actor:money().." "..game.translate_string("st_bankir_ru"),"ui_iconsTotal_found_thing","iconed_answer_item")
end
function bankir_show_money(first_speaker,second_speaker)
   local currert=sgm_functions.read_variable("bankir_capital_cash")
   db.actor:give_talk_message2("",game.translate_string("st_bankir_counter").." "..currert.." "..game.translate_string("st_bankir_ru"),"ui_iconsTotal_found_thing","iconed_answer_item")
end
function bankir_10_capital_percent_money(first_speaker,second_speaker)
   local currert=sgm_functions.read_variable("bankir_capital_cash")
   local percent=math.floor(currert*0.1)
   db.actor:give_talk_message2("",game.translate_string("st_bankir_result").." "..currert.." | 10% = "..percent,"ui_iconsTotal_found_thing","iconed_answer_item")
end
function bankir_20_capital_percent_money(first_speaker,second_speaker)
   local currert=sgm_functions.read_variable("bankir_capital_cash")
   local percent=math.floor(currert*0.2)
   db.actor:give_talk_message2("",game.translate_string("st_bankir_result").." "..currert.." | 20% = "..percent,"ui_iconsTotal_found_thing","iconed_answer_item")
end
function bankir_set_zero_capital(actor,npc)
   sgm_functions.set_safe_variable("bankir_capital_cash")
end
function bankir_capital_add(npc,val)
   local currert=sgm_functions.read_variable("bankir_capital_cash")
   sgm_functions.write_variable("bankir_capital_cash",currert+val)
   last_add_capital=last_add_capital+val
   dialogs.relocate_money(npc,val,"out")
end
function bankir_capital_add_1000(actor,npc)
   bankir_capital_add(npc,1000)
end
function bankir_capital_add_2000(actor,npc)
   bankir_capital_add(npc,2000)
end
function bankir_capital_add_3000(actor,npc)
   bankir_capital_add(npc,3000)
end
function bankir_capital_add_4000(actor,npc)
   bankir_capital_add(npc,4000)
end
function bankir_capital_add_5000(actor,npc)
   bankir_capital_add(npc,5000)
end
function bankir_capital_add_10000(actor,npc)
   bankir_capital_add(npc,10000)
end
function bankir_capital_add_all(actor,npc)
   bankir_capital_add(npc,db.actor:money())
end
function bankir_capital_has_something(actor,npc)
   return sgm_functions.read_variable("bankir_capital_cash")>0
end
function bankir_capital_has_1000(actor,npc)
   return sgm_functions.read_variable("bankir_capital_cash")>=1000
end
function bankir_capital_has_2000(actor,npc)
   return sgm_functions.read_variable("bankir_capital_cash")>=2000
end
function bankir_capital_has_3000(actor,npc)
   return sgm_functions.read_variable("bankir_capital_cash")>=3000
end
function bankir_capital_has_4000(actor,npc)
   return sgm_functions.read_variable("bankir_capital_cash")>=4000
end
function bankir_capital_has_5000(actor,npc)
   return sgm_functions.read_variable("bankir_capital_cash")>=5000
end
function bankir_capital_has_10000(actor,npc)
   return sgm_functions.read_variable("bankir_capital_cash")>=10000
end
function bankir_capital_convert(npc,val,perc)
   local currert=sgm_functions.read_variable("bankir_capital_cash")
   dialogs.relocate_money(npc,val-(val*perc),"in")
   sgm_functions.write_variable("bankir_capital_cash",currert-val)
end
function bankir_capital_10_convert_1000(actor,npc)
   bankir_capital_convert(npc,1000,0.1)
end
function bankir_capital_10_convert_2000(actor,npc)
   bankir_capital_convert(npc,2000,0.1)
end
function bankir_capital_10_convert_3000(actor,npc)
   bankir_capital_convert(npc,3000,0.1)
end
function bankir_capital_10_convert_4000(actor,npc)
   bankir_capital_convert(npc,4000,0.1)
end
function bankir_capital_10_convert_5000(actor,npc)
   bankir_capital_convert(npc,5000,0.1)
end
function bankir_capital_10_convert_10000(actor,npc)
   bankir_capital_convert(npc,10000,0.1)
end
function bankir_capital_10_convert_all(actor,npc)
   local currert=sgm_functions.read_variable("bankir_capital_cash")
   local percent=math.floor(currert*0.1)
   local result=currert-percent
   dialogs.relocate_money(npc,result,"in")
   sgm_functions.write_variable("bankir_capital_cash",0)
end
function bankir_capital_10_convert_all2(actor,npc)
   local currert=sgm_functions.read_variable("bankir_capital_cash")
   dialogs.relocate_money(npc,currert,"in")
   sgm_functions.write_variable("bankir_capital_cash",0)
end
function bankir_capital_20_convert_1000(actor,npc)
   bankir_capital_convert(npc,1000,0.2)
end
function bankir_capital_20_convert_2000(actor,npc)
   bankir_capital_convert(npc,2000,0.2)
end
function bankir_capital_20_convert_3000(actor,npc)
   bankir_capital_convert(npc,3000,0.2)
end
function bankir_capital_20_convert_4000(actor,npc)
   bankir_capital_convert(npc,4000,0.2)
end
function bankir_capital_20_convert_5000(actor,npc)
   bankir_capital_convert(npc,5000,0.2)
end
function bankir_capital_20_convert_10000(actor,npc)
   bankir_capital_convert(npc,10000,0.2)
end
function bankir_capital_20_convert_all(actor,npc)
   local currert=sgm_functions.read_variable("bankir_capital_cash")
   local percent=math.floor(currert*0.2)
   local result=currert-percent
   dialogs.relocate_money(npc,result,"in")
   sgm_functions.write_variable("bankir_capital_cash",0)
end
function bankir_capital_20_convert_all2(actor,npc)
   local currert=sgm_functions.read_variable("bankir_capital_cash")
   dialogs.relocate_money(npc,currert,"in")
   sgm_functions.write_variable("bankir_capital_cash",0)
end
------------------------------------------------------------------------------
--                           Банкир: депозит                                --
------------------------------------------------------------------------------
function bankir_show_deposit(first_speaker,second_speaker)
   local currert=sgm_functions.read_variable("bankir_deposit_cash")
   db.actor:give_talk_message2("",game.translate_string("st_bankir_counter2")..currert..game.translate_string("st_bankir_ru"),"ui_iconsTotal_found_thing","iconed_answer_item")
end
function bankir_show_deposit_and_10_percent(first_speaker,second_speaker)
   local currert=sgm_functions.read_variable("bankir_deposit_cash")
   local percent=sgm_functions.read_variable("bankir_deposit_percent")
   db.actor:give_talk_message2("",game.translate_string("st_bankir_counter2").." "..currert.." "..game.translate_string("st_bankir_ru"),"ui_iconsTotal_found_thing","iconed_answer_item")
   if percent<=0 then
      db.actor:give_talk_message2("",game.translate_string("st_bankir_percent").." "..math.floor(currert*r_mod_params("number","bankirs_default_percent",0.10)),"ui_iconsTotal_found_thing","iconed_answer_item")
   elseif percent>0 then
      db.actor:give_talk_message2("",game.translate_string("st_bankir_percent").." "..math.floor((currert*r_mod_params("number","bankirs_default_percent",0.10))+percent),"ui_iconsTotal_found_thing","iconed_answer_item")
   end
end
function bankir_show_something_percent(first_speaker,second_speaker)
   local currert=sgm_functions.read_variable("bankir_deposit_cash")
   local percent=sgm_functions.read_variable("bankir_deposit_percent")
   db.actor:give_talk_message2("",game.translate_string("st_bankir_counter2").." "..currert.." "..game.translate_string("st_bankir_ru"),"ui_iconsTotal_found_thing","iconed_answer_item")
   if percent<=0 then
      db.actor:give_talk_message2("",game.translate_string("st_bankir_percent").." "..math.floor(currert*r_mod_params("number","bankirs_default_percent",0.10)),"ui_iconsTotal_found_thing","iconed_answer_item")
   elseif percent>0 then
      if level.get_time_days()<sgm_functions.read_variable("bankir_deposit_passed_time") then
      db.actor:give_talk_message2("",game.translate_string("st_bankir_percent").." "..math.floor((currert*r_mod_params("number","bankirs_default_percent",0.10))+percent),"ui_iconsTotal_found_thing","iconed_answer_item")
      else
      db.actor:give_talk_message2("",game.translate_string("st_bankir_percent_today").." "..math.floor(percent),"ui_iconsTotal_found_thing","iconed_answer_item")
      end
   end
end
function bankir_set_zero_deposit(actor,npc)
   sgm_functions.set_safe_variable("bankir_deposit_cash")
   sgm_functions.set_safe_variable("bankir_deposit_percent")
   sgm_functions.set_safe_variable("bankir_deposit_passed_time")
   sgm_functions.set_safe_variable("bankir_deposit_allow","false")
end
function bankir_deposit_add(npc,val)
   local currert=sgm_functions.read_variable("bankir_deposit_cash")
   sgm_functions.write_variable("bankir_deposit_cash",currert+val)
   dialogs.relocate_money(npc,val,"out")
   local currert3=sgm_functions.read_variable("bankir_deposit_passed_time")
   if currert3==level.get_time_days() then
      sgm_functions.write_variable("bankir_deposit_passed_time",level.get_time_days()+1)
   elseif currert3~=level.get_time_days() then
      sgm_functions.write_variable("bankir_deposit_passed_time",level.get_time_days()+1)
   end
end
function bankir_deposit_add_1000(actor,npc)
   bankir_deposit_add(npc,1000)
end
function bankir_deposit_add_2000(actor,npc)
   bankir_deposit_add(npc,2000)
end
function bankir_deposit_add_3000(actor,npc)
   bankir_deposit_add(npc,3000)
end
function bankir_deposit_add_4000(actor,npc)
   bankir_deposit_add(npc,4000)
end
function bankir_deposit_add_5000(actor,npc)
   bankir_deposit_add(npc,5000)
end
function bankir_deposit_add_10000(actor,npc)
   bankir_deposit_add(npc,10000)
end
function bankir_deposit_add_25000(actor,npc)
   bankir_deposit_add(npc,25000)
end
function bankir_deposit_add_50000(actor,npc)
   bankir_deposit_add(npc,50000)
end
function bankir_deposit_add_100000(actor,npc)
   bankir_deposit_add(npc,100000)
end
function bankir_deposit_add_all(actor,npc)
   bankir_deposit_add(npc,db.actor:money())
end
function bankir_deposit_convert_10_percent(actor,npc)
   local percent=sgm_functions.read_variable("bankir_deposit_percent")
   dialogs.relocate_money(npc,percent,"in")
   sgm_functions.write_variable("bankir_deposit_percent",0)
end
function bankir_deposit_convert_all(actor,npc)
   local currert=sgm_functions.read_variable("bankir_deposit_cash")
   dialogs.relocate_money(npc,currert,"in")
   sgm_functions.write_variable("bankir_deposit_cash",0)
   sgm_functions.write_variable("bankir_deposit_percent",0)
end
------------------------------------------------------------------------------
--                     Банкир: электронный обмен                            --
------------------------------------------------------------------------------
function bankir_show_web_money_course(first_speaker,second_speaker)
   local course_cop=math.floor(sgm_functions.read_variable("web_money_course")*100)
   db.actor:give_talk_message2("",game.translate_string("st_bankir_web_money_course_1").." "..game.translate_string("st_bankir_web_money_course_3").." "..course_cop.." "..game.translate_string("st_bankir_web_money_course_4"),"ui_iconsTotal_found_thing","iconed_answer_item")
   db.actor:give_talk_message2("",game.translate_string("st_bankir_web_money_course_2").." "..math.floor(get_web_money()).." "..game.translate_string("st_bankir_web_money_course_5"),"ui_iconsTotal_found_thing","iconed_answer_item")
end
function reward_web_money(val)
   local m_changed=val*sgm_functions.read_variable("web_money_course")
   dialogs.relocate_money(db.actor,math.floor(m_changed),"in")
   sgm_functions.relocate_web_money(val,"out")
end
function actor_have_1000_web_money(actor, npc)
   return get_web_money()>=1000
end
function actor_give_1000_web_money(actor, npc)
   reward_web_money(1000)
end
function actor_have_2000_web_money(actor, npc)
   return get_web_money()>=2000
end
function actor_give_2000_web_money(actor, npc)
   reward_web_money(2000)
end
function actor_have_3000_web_money(actor, npc)
   return get_web_money()>=3000
end
function actor_give_3000_web_money(actor, npc)
   reward_web_money(3000)
end
function actor_have_4000_web_money(actor, npc)
   return get_web_money()>=4000
end
function actor_give_4000_web_money(actor, npc)
   reward_web_money(4000)
end
function actor_have_5000_web_money(actor, npc)
   return get_web_money()>=5000
end
function actor_give_5000_web_money(actor, npc)
   reward_web_money(5000)
end
function actor_have_6000_web_money(actor, npc)
   return get_web_money()>=6000
end
function actor_give_6000_web_money(actor, npc)
   reward_web_money(6000)
end
function actor_have_7000_web_money(actor, npc)
   return get_web_money()>=7000
end
function actor_give_7000_web_money(actor, npc)
   reward_web_money(7000)
end
function actor_have_8000_web_money(actor, npc)
   return get_web_money()>=8000
end
function actor_give_8000_web_money(actor, npc)
   reward_web_money(8000)
end
function actor_have_9000_web_money(actor, npc)
   return get_web_money()>=9000
end
function actor_give_9000_web_money(actor, npc)
   reward_web_money(9000)
end
function actor_have_10000_web_money(actor, npc)
   return get_web_money()>=10000
end
function actor_give_10000_web_money(actor, npc)
   reward_web_money(10000)
end
function actor_give_all_web_money(actor, npc)
   reward_web_money(get_web_money())
end
function actor_have_something_web_money(actor, npc)
   return get_web_money()>0
end
function actor_dont_something_web_money(actor, npc)
   return get_web_money()==0
end
------------------------------------------------------------------------------
--                           Телохранители                                  --
------------------------------------------------------------------------------
function bodyguard_set_release(actor,npc)
   news_manager.send_tip(db.actor,game.translate_string("st_bodyguard_commands_tip").." «"..npc:character_name().."» - "..game.translate_string("st_bodyguard_command_4_tip"),0,"bodyguard",6000,nil,"st_add_info_title")
   level.map_remove_object_spot(npc:id(),sgm_flags.spot_actor_guard)
   disable_info(npc:profile_name().."_stand_and_fire")
   disable_info(npc:profile_name().."_nofire")
   disable_info(npc:profile_name().."_stop")
   disable_info(npc:profile_name().."_release")
   disable_info(npc:profile_name().."_pursue")
   if npc:profile_name()=="zat_stalker_bodyguard" then
      xr_effects.respawn_zat_stalker_bodyguard()
   elseif npc:profile_name()=="zat_bandit_bodyguard" then
      xr_effects.respawn_zat_bandit_bodyguard()
   elseif npc:profile_name()=="jup_freedom_bodyguard" then
      xr_effects.respawn_jup_freedom_bodyguard()
   elseif npc:profile_name()=="jup_army_bodyguard" then
      xr_effects.respawn_jup_army_bodyguard()
   elseif npc:profile_name()=="jup_killer_bodyguard" then
      xr_effects.respawn_jup_killer_bodyguard()
   elseif npc:profile_name()=="pri_army_bodyguard" then
      xr_effects.respawn_pri_army_bodyguard()
   elseif npc:profile_name()=="pri_monolith_bodyguard" then
      xr_effects.respawn_pri_monolith_bodyguard()
   end
   start_flague_timer("timer_bodyguard_release",1000)
   sgm_flags.value_bodyguard_release_victim=npc:id()
end
function zat_stalker_bodyguard_have_money(actor, npc)
   return db.actor:money()>=20000
end
function zat_stalker_bodyguard_give_money(actor, npc)
   dialogs.relocate_money(npc,20000,"out")   
end
function zat_bandit_bodyguard_have_money(actor, npc)
   return db.actor:money()>=30000
end
function zat_bandit_bodyguard_give_money(actor, npc)
   dialogs.relocate_money(npc,30000,"out")   
end
function jup_freedom_bodyguard_have_money(actor, npc)
   return db.actor:money()>=40000
end
function jup_freedom_bodyguard_give_money(actor, npc)
   dialogs.relocate_money(npc,40000,"out")   
end
function jup_army_bodyguard_have_money(actor, npc)
   return db.actor:money()>=50000
end
function jup_army_bodyguard_give_money(actor, npc)
   dialogs.relocate_money(npc,50000,"out")   
end
function jup_killer_bodyguard_have_money(actor, npc)
   return db.actor:money()>=60000
end
function jup_killer_bodyguard_give_money(actor, npc)
   dialogs.relocate_money(npc,60000,"out")   
end
function pri_army_bodyguard_have_money(actor, npc)
   return db.actor:money()>=70000
end
function pri_army_bodyguard_give_money(actor, npc)
   dialogs.relocate_money(npc,70000,"out")   
end
function pri_monolith_bodyguard_have_money(actor, npc)
   return db.actor:money()>=80000
end
function pri_monolith_bodyguard_give_money(actor, npc)
   dialogs.relocate_money(npc,80000,"out")   
end
------------------------------------------------------------------------------
--                              Селекция                                    --
------------------------------------------------------------------------------
function check_any_breeding_af(type)
   local is_founded=false
   local function checks(temp,item)
      if item~=nil then
         if find_in_string(item:section(),"af_") then
            if sgm_functions.ReadBreedingType(item:section())~=nil and sgm_functions.ReadBreedingType(item:section())==type then
               is_founded=true
            end
            if type==nil then
               is_founded=true
            end
         end
      end
   end
   db.actor:iterate_inventory(checks,db.actor)
   return is_founded
end
function founded_any_af(actor,npc)
   return check_any_breeding_af()
end
function founded_af_type_1(actor,npc)
   return check_any_breeding_af(1)
end
function founded_af_type_2(actor,npc)
   return check_any_breeding_af(2)
end
function founded_af_type_3(actor,npc)
   return check_any_breeding_af(3)
end
function founded_af_type_all(actor,npc)
   return check_any_breeding_af(1) or check_any_breeding_af(2) or check_any_breeding_af(3)
end
function dont_founded_any_af(actor,npc)
   return not check_any_breeding_af()
end
function dont_founded_af_type_1(actor,npc)
   return not check_any_breeding_af(1)
end
function dont_founded_af_type_2(actor,npc)
   return not check_any_breeding_af(2)
end
function dont_founded_af_type_3(actor,npc)
   return not check_any_breeding_af(3)
end
function dont_founded_af_type_all(actor,npc)
   return not founded_af_type_all(actor,npc)
end
function breed_radiation_has_money(actor, npc)
   return db.actor:money()>=26000
end
function breed_radiation_give_money(actor, npc)
   dialogs.relocate_money(npc,26000,"out")	
end
function breed_tonnage_has_money(actor, npc)
   return db.actor:money()>=24500
end
function breed_tonnage_give_money(actor, npc)
   dialogs.relocate_money(npc,24500,"out")	
end
function breed_regeneration_has_money(actor, npc)
   return db.actor:money()>=30000
end
function breed_regeneration_give_money(actor, npc)
   dialogs.relocate_money(npc,30000,"out")	
end
---/1-й тип аномальности
function breeder_has_1(actor,npc)
   return db.actor:object("af_medusa")
end
function breeder_lost_1(actor,npc)
   dialogs.relocate_item_section(npc,"af_medusa","out")
end
function breeder_recover_1_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_medusa_breeding_1","in")
end
function breeder_recover_1_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_medusa_breeding_2","in")
end
function breeder_recover_1_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_medusa_breeding_3","in")
end
function breeder_has_4(actor,npc)
   return db.actor:object("af_vyvert")
end
function breeder_lost_4(actor,npc)
   dialogs.relocate_item_section(npc,"af_vyvert","out")
end
function breeder_recover_4_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_vyvert_breeding_1","in")
end
function breeder_recover_4_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_vyvert_breeding_2","in")
end
function breeder_recover_4_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_vyvert_breeding_3","in")
end
function breeder_has_7(actor,npc)
   return db.actor:object("af_cristall")
end
function breeder_lost_7(actor,npc)
   dialogs.relocate_item_section(npc,"af_cristall","out")
end
function breeder_recover_7_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_cristall_breeding_1","in")
end
function breeder_recover_7_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_cristall_breeding_2","in")
end
function breeder_recover_7_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_cristall_breeding_3","in")
end
function breeder_has_12(actor,npc)
   return db.actor:object("af_blood")
end
function breeder_lost_12(actor,npc)
   dialogs.relocate_item_section(npc,"af_blood","out")
end
function breeder_recover_12_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_blood_breeding_1","in")
end
function breeder_recover_12_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_blood_breeding_2","in")
end
function breeder_recover_12_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_blood_breeding_3","in")
end
function breeder_has_18(actor,npc)
   return db.actor:object("af_electra_sparkler")
end
function breeder_lost_18(actor,npc)
   dialogs.relocate_item_section(npc,"af_electra_sparkler","out")
end
function breeder_recover_18_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_electra_sparkler_breeding_1","in")
end
function breeder_recover_18_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_electra_sparkler_breeding_2","in")
end
function breeder_recover_18_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_electra_sparkler_breeding_3","in")
end
---/2-й тип аномальности
function breeder_has_2(actor,npc)
   return db.actor:object("af_cristall_flower")
end
function breeder_lost_2(actor,npc)
   dialogs.relocate_item_section(npc,"af_cristall_flower","out")
end
function breeder_recover_2_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_cristall_flower_breeding_1","in")
end
function breeder_recover_2_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_cristall_flower_breeding_2","in")
end
function breeder_recover_2_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_cristall_flower_breeding_3","in")
end
function breeder_has_3(actor,npc)
   return db.actor:object("af_night_star")
end
function breeder_lost_3(actor,npc)
   dialogs.relocate_item_section(npc,"af_night_star","out")
end
function breeder_recover_3_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_night_star_breeding_1","in")
end
function breeder_recover_3_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_night_star_breeding_2","in")
end
function breeder_recover_3_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_night_star_breeding_3","in")
end
function breeder_has_5(actor,npc)
   return db.actor:object("af_gravi")
end
function breeder_lost_5(actor,npc)
   dialogs.relocate_item_section(npc,"af_gravi","out")
end
function breeder_recover_5_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_gravi_breeding_1","in")
end
function breeder_recover_5_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_gravi_breeding_2","in")
end
function breeder_recover_5_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_gravi_breeding_3","in")
end
function breeder_has_8(actor,npc)
   return db.actor:object("af_fireball")
end
function breeder_lost_8(actor,npc)
   dialogs.relocate_item_section(npc,"af_fireball","out")
end
function breeder_recover_8_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_fireball_breeding_1","in")
end
function breeder_recover_8_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_fireball_breeding_2","in")
end
function breeder_recover_8_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_fireball_breeding_3","in")
end
function breeder_has_9(actor,npc)
   return db.actor:object("af_dummy_glassbeads")
end
function breeder_lost_9(actor,npc)
   dialogs.relocate_item_section(npc,"af_dummy_glassbeads","out")
end
function breeder_recover_9_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_dummy_glassbeads_breeding_1","in")
end
function breeder_recover_9_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_dummy_glassbeads_breeding_2","in")
end
function breeder_recover_9_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_dummy_glassbeads_breeding_3","in")
end
function breeder_has_13(actor,npc)
   return db.actor:object("af_mincer_meat")
end
function breeder_lost_13(actor,npc)
   dialogs.relocate_item_section(npc,"af_mincer_meat","out")
end
function breeder_recover_13_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_mincer_meat_breeding_1","in")
end
function breeder_recover_13_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_mincer_meat_breeding_2","in")
end
function breeder_recover_13_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_mincer_meat_breeding_3","in")
end
function breeder_has_19(actor,npc)
   return db.actor:object("af_electra_flash")
end
function breeder_lost_19(actor,npc)
   dialogs.relocate_item_section(npc,"af_electra_flash","out")
end
function breeder_recover_19_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_electra_flash_breeding_1","in")
end
function breeder_recover_19_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_electra_flash_breeding_2","in")
end
function breeder_recover_19_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_electra_flash_breeding_3","in")
end
---/3-й тип аномальности
function breeder_has_6(actor,npc)
   return db.actor:object("af_gold_fish")
end
function breeder_lost_6(actor,npc)
   dialogs.relocate_item_section(npc,"af_gold_fish","out")
end
function breeder_recover_6_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_gold_fish_breeding_1","in")
end
function breeder_recover_6_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_gold_fish_breeding_2","in")
end
function breeder_recover_6_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_gold_fish_breeding_3","in")
end
function breeder_has_10(actor,npc)
   return db.actor:object("af_eye")
end
function breeder_lost_10(actor,npc)
   dialogs.relocate_item_section(npc,"af_eye","out")
end
function breeder_recover_10_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_eye_breeding_1","in")
end
function breeder_recover_10_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_eye_breeding_2","in")
end
function breeder_recover_10_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_eye_breeding_3","in")
end
function breeder_has_11(actor,npc)
   return db.actor:object("af_fire")
end
function breeder_lost_11(actor,npc)
   dialogs.relocate_item_section(npc,"af_fire","out")
end
function breeder_recover_11_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_fire_breeding_1","in")
end
function breeder_recover_11_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_fire_breeding_2","in")
end
function breeder_recover_11_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_fire_breeding_3","in")
end
function breeder_has_14(actor,npc)
   return db.actor:object("af_soul")
end
function breeder_lost_14(actor,npc)
   dialogs.relocate_item_section(npc,"af_soul","out")
end
function breeder_recover_14_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_soul_breeding_1","in")
end
function breeder_recover_14_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_soul_breeding_2","in")
end
function breeder_recover_14_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_soul_breeding_3","in")
end
function breeder_has_15(actor,npc)
   return db.actor:object("af_fuzz_kolobok")
end
function breeder_lost_15(actor,npc)
   dialogs.relocate_item_section(npc,"af_fuzz_kolobok","out")
end
function breeder_recover_15_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_fuzz_kolobok_breeding_1","in")
end
function breeder_recover_15_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_fuzz_kolobok_breeding_2","in")
end
function breeder_recover_15_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_fuzz_kolobok_breeding_3","in")
end
function breeder_has_16(actor,npc)
   return db.actor:object("af_baloon")
end
function breeder_lost_16(actor,npc)
   dialogs.relocate_item_section(npc,"af_baloon","out")
end
function breeder_recover_16_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_baloon_breeding_1","in")
end
function breeder_recover_16_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_baloon_breeding_2","in")
end
function breeder_recover_16_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_baloon_breeding_3","in")
end
function breeder_has_17(actor,npc)
   return db.actor:object("af_glass")
end
function breeder_lost_17(actor,npc)
   dialogs.relocate_item_section(npc,"af_glass","out")
end
function breeder_recover_17_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_glass_breeding_1","in")
end
function breeder_recover_17_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_glass_breeding_2","in")
end
function breeder_recover_17_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_glass_breeding_3","in")
end
function breeder_has_20(actor,npc)
   return db.actor:object("af_electra_moonlight")
end
function breeder_lost_20(actor,npc)
   dialogs.relocate_item_section(npc,"af_electra_moonlight","out")
end
function breeder_recover_20_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_electra_moonlight_breeding_1","in")
end
function breeder_recover_20_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_electra_moonlight_breeding_2","in")
end
function breeder_recover_20_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_electra_moonlight_breeding_3","in")
end
function breeder_has_21(actor,npc)
   return db.actor:object("af_dummy_battery")
end
function breeder_lost_21(actor,npc)
   dialogs.relocate_item_section(npc,"af_dummy_battery","out")
end
function breeder_recover_21_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_dummy_battery_breeding_1","in")
end
function breeder_recover_21_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_dummy_battery_breeding_2","in")
end
function breeder_recover_21_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_dummy_battery_breeding_3","in")
end
function breeder_has_22(actor,npc)
   return db.actor:object("af_dummy_dummy")
end
function breeder_lost_22(actor,npc)
   dialogs.relocate_item_section(npc,"af_dummy_dummy","out")
end
function breeder_recover_22_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_dummy_dummy_breeding_1","in")
end
function breeder_recover_22_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_dummy_dummy_breeding_2","in")
end
function breeder_recover_22_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_dummy_dummy_breeding_3","in")
end
function breeder_has_23(actor,npc)
   return db.actor:object("af_ice")
end
function breeder_lost_23(actor,npc)
   dialogs.relocate_item_section(npc,"af_ice","out")
end
function breeder_recover_23_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_ice_breeding_1","in")
end
function breeder_recover_23_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_ice_breeding_2","in")
end
function breeder_recover_23_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_ice_breeding_3","in")
end
function breeder_has_24(actor,npc)
   return db.actor:object("af_monolit")
end
function breeder_lost_24(actor,npc)
   dialogs.relocate_item_section(npc,"af_monolit","out")
end
function breeder_recover_24_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_monolit_breeding_1","in")
end
function breeder_recover_24_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_monolit_breeding_2","in")
end
function breeder_recover_24_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_monolit_breeding_3","in")
end
function breeder_has_25(actor,npc)
   return db.actor:object("af_geliy")
end
function breeder_lost_25(actor,npc)
   dialogs.relocate_item_section(npc,"af_geliy","out")
end
function breeder_recover_25_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_geliy_breeding_1","in")
end
function breeder_recover_25_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_geliy_breeding_2","in")
end
function breeder_recover_25_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_geliy_breeding_3","in")
end
function breeder_has_26(actor,npc)
   return db.actor:object("af_vaselisk")
end
function breeder_lost_26(actor,npc)
   dialogs.relocate_item_section(npc,"af_vaselisk","out")
end
function breeder_recover_26_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_vaselisk_breeding_1","in")
end
function breeder_recover_26_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_vaselisk_breeding_2","in")
end
function breeder_recover_26_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_vaselisk_breeding_3","in")
end
function breeder_has_27(actor,npc)
   return db.actor:object("af_dragon_eye")
end
function breeder_lost_27(actor,npc)
   dialogs.relocate_item_section(npc,"af_dragon_eye","out")
end
function breeder_recover_27_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_dragon_eye_breeding_1","in")
end
function breeder_recover_27_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_dragon_eye_breeding_2","in")
end
function breeder_recover_27_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_dragon_eye_breeding_3","in")
end

function breeder_has_new31(actor,npc)
   return db.actor:object("af_ulitka")
end
function breeder_lost_new31(actor,npc)
   dialogs.relocate_item_section(npc,"af_ulitka","out")
end
function breeder_recover_new31_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_ulitka_breeding_1","in")
end
function breeder_recover_new31_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_ulitka_breeding_2","in")
end
function breeder_recover_new31_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_ulitka_breeding_3","in")
end
function breeder_has_new32(actor,npc)
   return db.actor:object("af_ognivo")
end
function breeder_lost_new32(actor,npc)
   dialogs.relocate_item_section(npc,"af_ognivo","out")
end
function breeder_recover_new32_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_ognivo_breeding_1","in")
end
function breeder_recover_new32_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_ognivo_breeding_2","in")
end
function breeder_recover_new32_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_ognivo_breeding_3","in")
end
function breeder_has_new33(actor,npc)
   return db.actor:object("af_mayatnik")
end
function breeder_lost_new33(actor,npc)
   dialogs.relocate_item_section(npc,"af_mayatnik","out")
end
function breeder_recover_new33_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_mayatnik_breeding_1","in")
end
function breeder_recover_new33_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_mayatnik_breeding_2","in")
end
function breeder_recover_new33_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_mayatnik_breeding_3","in")
end
function breeder_has_new34(actor,npc)
   return db.actor:object("amk_mox")
end
function breeder_lost_new34(actor,npc)
   dialogs.relocate_item_section(npc,"amk_mox","out")
end
function breeder_recover_new34_b1(actor,npc)
   dialogs.relocate_item_section(npc,"amk_mox_breeding_1","in")
end
function breeder_recover_new34_b2(actor,npc)
   dialogs.relocate_item_section(npc,"amk_mox_breeding_2","in")
end
function breeder_recover_new34_b3(actor,npc)
   dialogs.relocate_item_section(npc,"amk_mox_breeding_3","in")
end
function breeder_has_new35(actor,npc)
   return db.actor:object("amk_atom")
end
function breeder_lost_new35(actor,npc)
   dialogs.relocate_item_section(npc,"amk_atom","out")
end
function breeder_recover_new35_b1(actor,npc)
   dialogs.relocate_item_section(npc,"amk_atom_breeding_1","in")
end
function breeder_recover_new35_b2(actor,npc)
   dialogs.relocate_item_section(npc,"amk_atom_breeding_2","in")
end
function breeder_recover_new35_b3(actor,npc)
   dialogs.relocate_item_section(npc,"amk_atom_breeding_3","in")
end
function breeder_has_new36(actor,npc)
   return db.actor:object("af_izumrud")
end
function breeder_lost_new36(actor,npc)
   dialogs.relocate_item_section(npc,"af_izumrud","out")
end
function breeder_recover_new36_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_izumrud_breeding_1","in")
end
function breeder_recover_new36_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_izumrud_breeding_2","in")
end
function breeder_recover_new36_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_izumrud_breeding_3","in")
end
function breeder_has_new37(actor,npc)
   return db.actor:object("af_wish")
end
function breeder_lost_new37(actor,npc)
   dialogs.relocate_item_section(npc,"af_wish","out")
end
function breeder_recover_new37_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_wish_breeding_1","in")
end
function breeder_recover_new37_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_wish_breeding_2","in")
end
function breeder_recover_new37_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_wish_breeding_3","in")
end
function breeder_has_new38(actor,npc)
   return db.actor:object("af_blackstone")
end
function breeder_lost_new38(actor,npc)
   dialogs.relocate_item_section(npc,"af_blackstone","out")
end
function breeder_recover_new38_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_blackstone_breeding_1","in")
end
function breeder_recover_new38_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_blackstone_breeding_2","in")
end
function breeder_recover_new38_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_blackstone_breeding_3","in")
end
function breeder_has_new39(actor,npc)
   return db.actor:object("amk_repei")
end
function breeder_lost_new39(actor,npc)
   dialogs.relocate_item_section(npc,"amk_repei","out")
end
function breeder_recover_new39_b1(actor,npc)
   dialogs.relocate_item_section(npc,"amk_repei_breeding_1","in")
end
function breeder_recover_new39_b2(actor,npc)
   dialogs.relocate_item_section(npc,"amk_repei_breeding_2","in")
end
function breeder_recover_new39_b3(actor,npc)
   dialogs.relocate_item_section(npc,"amk_repei_breeding_3","in")
end
function breeder_has_new40(actor,npc)
   return db.actor:object("af_ameba_cubic")
end
function breeder_lost_new40(actor,npc)
   dialogs.relocate_item_section(npc,"af_ameba_cubic","out")
end
function breeder_recover_new40_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_ameba_cubic_breeding_1","in")
end
function breeder_recover_new40_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_ameba_cubic_breeding_2","in")
end
function breeder_recover_new40_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_ameba_cubic_breeding_3","in")
end

function breeder_has_new41(actor,npc)
   return db.actor:object("af_spiral")
end
function breeder_lost_new41(actor,npc)
   dialogs.relocate_item_section(npc,"af_spiral","out")
end
function breeder_recover_new41_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_spiral_breeding_1","in")
end
function breeder_recover_new41_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_spiral_breeding_2","in")
end
function breeder_recover_new41_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_spiral_breeding_3","in")
end

function breeder_has_new42(actor,npc)
   return db.actor:object("af_gubka")
end
function breeder_lost_new42(actor,npc)
   dialogs.relocate_item_section(npc,"af_gubka","out")
end
function breeder_recover_new42_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_gubka_breeding_1","in")
end
function breeder_recover_new42_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_gubka_breeding_2","in")
end
function breeder_recover_new42_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_gubka_breeding_3","in")
end

function breeder_has_new43(actor,npc)
   return db.actor:object("af_raibloko")
end
function breeder_lost_new43(actor,npc)
   dialogs.relocate_item_section(npc,"af_raibloko","out")
end
function breeder_recover_new43_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_raibloko_breeding_1","in")
end
function breeder_recover_new43_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_raibloko_breeding_2","in")
end
function breeder_recover_new43_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_raibloko_breeding_3","in")
end

function breeder_has_new44(actor,npc)
   return db.actor:object("af_kaplya")
end
function breeder_lost_new44(actor,npc)
   dialogs.relocate_item_section(npc,"af_kaplya","out")
end
function breeder_recover_new44_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_kaplya_breeding_1","in")
end
function breeder_recover_new44_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_kaplya_breeding_2","in")
end
function breeder_recover_new44_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_kaplya_breeding_3","in")
end

function breeder_has_new45(actor,npc)
   return db.actor:object("amk_zhelch")
end
function breeder_lost_new45(actor,npc)
   dialogs.relocate_item_section(npc,"amk_zhelch","out")
end
function breeder_recover_new45_b1(actor,npc)
   dialogs.relocate_item_section(npc,"amk_zhelch_breeding_1","in")
end
function breeder_recover_new45_b2(actor,npc)
   dialogs.relocate_item_section(npc,"amk_zhelch_breeding_2","in")
end
function breeder_recover_new45_b3(actor,npc)
   dialogs.relocate_item_section(npc,"amk_zhelch_breeding_3","in")
end

function breeder_has_new46(actor,npc)
   return db.actor:object("amk_ear")
end
function breeder_lost_new46(actor,npc)
   dialogs.relocate_item_section(npc,"amk_ear","out")
end
function breeder_recover_new46_b1(actor,npc)
   dialogs.relocate_item_section(npc,"amk_ear_breeding_1","in")
end
function breeder_recover_new46_b2(actor,npc)
   dialogs.relocate_item_section(npc,"amk_ear_breeding_2","in")
end
function breeder_recover_new46_b3(actor,npc)
   dialogs.relocate_item_section(npc,"amk_ear_breeding_3","in")
end

function breeder_has_new47(actor,npc)
   return db.actor:object("amk_ice_s")
end
function breeder_lost_new47(actor,npc)
   dialogs.relocate_item_section(npc,"amk_ice_s","out")
end
function breeder_recover_new47_b1(actor,npc)
   dialogs.relocate_item_section(npc,"amk_ice_s_breeding_1","in")
end
function breeder_recover_new47_b2(actor,npc)
   dialogs.relocate_item_section(npc,"amk_ice_s_breeding_2","in")
end
function breeder_recover_new47_b3(actor,npc)
   dialogs.relocate_item_section(npc,"amk_ice_s_breeding_3","in")
end

function breeder_has_new51(actor,npc)
   return db.actor:object("af_cristal_drops")
end
function breeder_lost_new51(actor,npc)
   dialogs.relocate_item_section(npc,"af_cristal_drops","out")
end
function breeder_recover_new51_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_cristal_drops_breeding_1","in")
end
function breeder_recover_new51_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_cristal_drops_breeding_2","in")
end
function breeder_recover_new51_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_cristal_drops_breeding_3","in")
end

function breeder_has_new52(actor,npc)
   return db.actor:object("af_girya")
end
function breeder_lost_new52(actor,npc)
   dialogs.relocate_item_section(npc,"af_girya","out")
end
function breeder_recover_new52_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_girya_breeding_1","in")
end
function breeder_recover_new52_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_girya_breeding_2","in")
end
function breeder_recover_new52_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_girya_breeding_3","in")
end

function breeder_has_new53(actor,npc)
   return db.actor:object("af_lifekam")
end
function breeder_lost_new53(actor,npc)
   dialogs.relocate_item_section(npc,"af_lifekam","out")
end
function breeder_recover_new53_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_lifekam_breeding_1","in")
end
function breeder_recover_new53_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_lifekam_breeding_2","in")
end
function breeder_recover_new53_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_lifekam_breeding_3","in")
end

function breeder_has_new54(actor,npc)
   return db.actor:object("af_podsolnuh")
end
function breeder_lost_new54(actor,npc)
   dialogs.relocate_item_section(npc,"af_podsolnuh","out")
end
function breeder_recover_new54_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_podsolnuh_breeding_1","in")
end
function breeder_recover_new54_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_podsolnuh_breeding_2","in")
end
function breeder_recover_new54_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_podsolnuh_breeding_3","in")
end

function breeder_has_new55(actor,npc)
   return db.actor:object("af_seaej")
end
function breeder_lost_new55(actor,npc)
   dialogs.relocate_item_section(npc,"af_seaej","out")
end
function breeder_recover_new55_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_seaej_breeding_1","in")
end
function breeder_recover_new55_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_seaej_breeding_2","in")
end
function breeder_recover_new55_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_seaej_breeding_3","in")
end

function breeder_has_new56(actor,npc)
   return db.actor:object("af_cepen")
end
function breeder_lost_new56(actor,npc)
   dialogs.relocate_item_section(npc,"af_cepen","out")
end
function breeder_recover_new56_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_cepen_breeding_1","in")
end
function breeder_recover_new56_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_cepen_breeding_2","in")
end
function breeder_recover_new56_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_cepen_breeding_3","in")
end

function breeder_has_new57(actor,npc)
   return db.actor:object("af_gauss")
end
function breeder_lost_new57(actor,npc)
   dialogs.relocate_item_section(npc,"af_gauss","out")
end
function breeder_recover_new57_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_gauss_breeding_1","in")
end
function breeder_recover_new57_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_gauss_breeding_2","in")
end
function breeder_recover_new57_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_gauss_breeding_3","in")
end

function breeder_has_new58(actor,npc)
   return db.actor:object("af_sluda")
end
function breeder_lost_new58(actor,npc)
   dialogs.relocate_item_section(npc,"af_sluda","out")
end
function breeder_recover_new58_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_sluda_breeding_1","in")
end
function breeder_recover_new58_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_sluda_breeding_2","in")
end
function breeder_recover_new58_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_sluda_breeding_3","in")
end

function breeder_has_new59(actor,npc)
   return db.actor:object("af_setka")
end
function breeder_lost_new59(actor,npc)
   dialogs.relocate_item_section(npc,"af_setka","out")
end
function breeder_recover_new59_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_setka_breeding_1","in")
end
function breeder_recover_new59_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_setka_breeding_2","in")
end
function breeder_recover_new59_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_setka_breeding_3","in")
end

function breeder_has_new60(actor,npc)
   return db.actor:object("af_mincer_izumrud")
end
function breeder_lost_new60(actor,npc)
   dialogs.relocate_item_section(npc,"af_mincer_izumrud","out")
end
function breeder_recover_new60_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_mincer_izumrud_breeding_1","in")
end
function breeder_recover_new60_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_mincer_izumrud_breeding_2","in")
end
function breeder_recover_new60_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_mincer_izumrud_breeding_3","in")
end

function breeder_has_new61(actor,npc)
   return db.actor:object("af_oblivion")
end
function breeder_lost_new61(actor,npc)
   dialogs.relocate_item_section(npc,"af_oblivion","out")
end
function breeder_recover_new61_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_oblivion_breeding_1","in")
end
function breeder_recover_new61_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_oblivion_breeding_2","in")
end
function breeder_recover_new61_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_oblivion_breeding_3","in")
end

function breeder_has_new62(actor,npc)
   return db.actor:object("af_venez")
end
function breeder_lost_new62(actor,npc)
   dialogs.relocate_item_section(npc,"af_venez","out")
end
function breeder_recover_new62_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_venez_breeding_1","in")
end
function breeder_recover_new62_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_venez_breeding_2","in")
end
function breeder_recover_new62_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_venez_breeding_3","in")
end

function breeder_has_new63(actor,npc)
   return db.actor:object("af_indeikam")
end
function breeder_lost_new63(actor,npc)
   dialogs.relocate_item_section(npc,"af_indeikam","out")
end
function breeder_recover_new63_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_indeikam_breeding_1","in")
end
function breeder_recover_new63_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_indeikam_breeding_2","in")
end
function breeder_recover_new63_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_indeikam_breeding_3","in")
end

function breeder_has_new64(actor,npc)
   return db.actor:object("af_poipruz")
end
function breeder_lost_new64(actor,npc)
   dialogs.relocate_item_section(npc,"af_poipruz","out")
end
function breeder_recover_new64_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_poipruz_breeding_1","in")
end
function breeder_recover_new64_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_poipruz_breeding_2","in")
end
function breeder_recover_new64_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_poipruz_breeding_3","in")
end

function breeder_has_new65(actor,npc)
   return db.actor:object("af_vedsleza")
end
function breeder_lost_new65(actor,npc)
   dialogs.relocate_item_section(npc,"af_vedsleza","out")
end
function breeder_recover_new65_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_vedsleza_breeding_1","in")
end
function breeder_recover_new65_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_vedsleza_breeding_2","in")
end
function breeder_recover_new65_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_vedsleza_breeding_3","in")
end

function breeder_has_new66(actor,npc)
   return db.actor:object("amk_elektron")
end
function breeder_lost_new66(actor,npc)
   dialogs.relocate_item_section(npc,"amk_elektron","out")
end
function breeder_recover_new66_b1(actor,npc)
   dialogs.relocate_item_section(npc,"amk_elektron_breeding_1","in")
end
function breeder_recover_new66_b2(actor,npc)
   dialogs.relocate_item_section(npc,"amk_elektron_breeding_2","in")
end
function breeder_recover_new66_b3(actor,npc)
   dialogs.relocate_item_section(npc,"amk_elektron_breeding_3","in")
end

function breeder_has_new67(actor,npc)
   return db.actor:object("af_zelonka")
end
function breeder_lost_new67(actor,npc)
   dialogs.relocate_item_section(npc,"af_zelonka","out")
end
function breeder_recover_new67_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_zelonka_breeding_1","in")
end
function breeder_recover_new67_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_zelonka_breeding_2","in")
end
function breeder_recover_new67_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_zelonka_breeding_3","in")
end

function breeder_has_new68(actor,npc)
   return db.actor:object("af_kashtan")
end
function breeder_lost_new68(actor,npc)
   dialogs.relocate_item_section(npc,"af_kashtan","out")
end
function breeder_recover_new68_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_kashtan_breeding_1","in")
end
function breeder_recover_new68_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_kashtan_breeding_2","in")
end
function breeder_recover_new68_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_kashtan_breeding_3","in")
end

function breeder_has_new69(actor,npc)
   return db.actor:object("amk_chelust")
end
function breeder_lost_new69(actor,npc)
   dialogs.relocate_item_section(npc,"amk_chelust","out")
end
function breeder_recover_new69_b1(actor,npc)
   dialogs.relocate_item_section(npc,"amk_chelust_breeding_1","in")
end
function breeder_recover_new69_b2(actor,npc)
   dialogs.relocate_item_section(npc,"amk_chelust_breeding_2","in")
end
function breeder_recover_new69_b3(actor,npc)
   dialogs.relocate_item_section(npc,"amk_chelust_breeding_3","in")
end

function breeder_has_new610(actor,npc)
   return db.actor:object("amk_fonar")
end
function breeder_lost_new610(actor,npc)
   dialogs.relocate_item_section(npc,"amk_fonar","out")
end
function breeder_recover_new610_b1(actor,npc)
   dialogs.relocate_item_section(npc,"amk_fonar_breeding_1","in")
end
function breeder_recover_new610_b2(actor,npc)
   dialogs.relocate_item_section(npc,"amk_fonar_breeding_2","in")
end
function breeder_recover_new610_b3(actor,npc)
   dialogs.relocate_item_section(npc,"amk_fonar_breeding_3","in")
end

function breeder_has_new611(actor,npc)
   return db.actor:object("amk_snezhok")
end
function breeder_lost_new611(actor,npc)
   dialogs.relocate_item_section(npc,"amk_snezhok","out")
end
function breeder_recover_new611_b1(actor,npc)
   dialogs.relocate_item_section(npc,"amk_snezhok_breeding_1","in")
end
function breeder_recover_new611_b2(actor,npc)
   dialogs.relocate_item_section(npc,"amk_snezhok_breeding_2","in")
end
function breeder_recover_new611_b3(actor,npc)
   dialogs.relocate_item_section(npc,"amk_snezhok_breeding_3","in")
end

function breeder_has_new612(actor,npc)
   return db.actor:object("af_plenka")
end
function breeder_lost_new612(actor,npc)
   dialogs.relocate_item_section(npc,"af_plenka","out")
end
function breeder_recover_new612_b1(actor,npc)
   dialogs.relocate_item_section(npc,"af_plenka_breeding_1","in")
end
function breeder_recover_new612_b2(actor,npc)
   dialogs.relocate_item_section(npc,"af_plenka_breeding_2","in")
end
function breeder_recover_new612_b3(actor,npc)
   dialogs.relocate_item_section(npc,"af_plenka_breeding_3","in")
end

function breeder_has_new613(actor,npc)
   return db.actor:object("amk_yoyo")
end
function breeder_lost_new613(actor,npc)
   dialogs.relocate_item_section(npc,"amk_yoyo","out")
end
function breeder_recover_new613_b1(actor,npc)
   dialogs.relocate_item_section(npc,"amk_yoyo_breeding_1","in")
end
function breeder_recover_new613_b2(actor,npc)
   dialogs.relocate_item_section(npc,"amk_yoyo_breeding_2","in")
end
function breeder_recover_new613_b3(actor,npc)
   dialogs.relocate_item_section(npc,"amk_yoyo_breeding_3","in")
end
------------------------------------------------------------------------------
--                        Торгаш: заказ товаров                             --
------------------------------------------------------------------------------
local loaded_cost=0
local loaded_need=0
local loaded_item="wpn_pm"
function pre_custom_goods(actor,npc)
   return get_actor_rank()>=loaded_need
end
function write_order(cost)
   if present_night() then
      loaded_cost=math.floor(cost/6)
   else
      loaded_cost=math.floor(cost/3)
   end
end
function custom_order(cost)
   if present_night() then
      loaded_cost=math.floor(cost/2)
   else
      loaded_cost=cost
   end
end
function choose_item(item_name,need_rank)
   loaded_item=item_name
   if need_rank~=nil then
      if get_actor_rank()>=need_rank then
         loaded_need=0
      else
         loaded_need=need_rank
      end
   else
      loaded_need=0
   end
end
function trader_activate_order(actor,npc)
   local get_npc=who_is_npc(actor,npc)
   local npc_nm=get_npc:profile_name()
   if npc_nm=="jup_killer_base_trader" then
      npc_nm="jup_killer_trader"
   elseif npc_nm=="pri_monolit_base_trader" then
      npc_nm="pri_monolith_trader"
   end
   sgm_functions.inc_counter("stat_executed_orders")
   edit_trader_order(npc_nm,loaded_item)
   edit_trader_order_time(npc_nm,r_mod_params("number","trader_order_delivery_time",60))
end
function trader_deactivate_order(actor,npc)
   local get_npc=who_is_npc(actor,npc)
   local npc_nm=get_npc:profile_name()
   if npc_nm=="jup_killer_base_trader" then
      npc_nm="jup_killer_trader"
   elseif npc_nm=="pri_monolit_base_trader" then
      npc_nm="pri_monolith_trader"
   end
   edit_trader_order(npc_nm,"none")
   edit_trader_order_time(npc_nm,-1)
end
function zat_s_trader_w_1(first_speaker,second_speaker)
  custom_order(4000)
  choose_item("wpn_bizon",150)
end
function zat_s_trader_w_2(first_speaker,second_speaker)
  custom_order(3500)
  choose_item("wpn_apb",102)
end
function zat_s_trader_w_3(first_speaker,second_speaker)
  custom_order(1600)
  choose_item("wpn_toz34_sk2",50)
end
function zat_s_trader_o_1(first_speaker,second_speaker)
  custom_order(4400)
  choose_item("helm_rp_metro_ranger",175)
end
function zat_s_trader_o_2(first_speaker,second_speaker)
  custom_order(5400)
  choose_item("radiation_outfit",85)
end
function zat_s_trader_o_3(first_speaker,second_speaker)
  custom_order(1500)
  choose_item("stalker_heavy_1",200)
end
function zat_s_trader_o_4(first_speaker,second_speaker)
  custom_order(7500)
  choose_item("stalker_reinforced_outfit",200)
end
function zat_b_trader_w_1(first_speaker,second_speaker)
  if has_alife_info("actor_entry_in_bandit") then
  custom_order(1800)
  choose_item("wpn_mp5_octopus",64)
  else
  custom_order(4000)
  choose_item("wpn_mp5_octopus",75)
  end
end
function zat_b_trader_w_2(first_speaker,second_speaker)
  if has_alife_info("actor_entry_in_bandit") then
  custom_order(2500)
  choose_item("wpn_fanfall",120)
  else
  custom_order(4500)
  choose_item("wpn_fanfall",160)
  end
end
function zat_b_trader_w_3(first_speaker,second_speaker)
  if has_alife_info("actor_entry_in_bandit") then
  custom_order(5100)
  choose_item("wpn_dsr1",85)
  else
  custom_order(6200)
  choose_item("wpn_dsr1",140)
  end
end
function zat_b_trader_o_1(first_speaker,second_speaker)
  if has_alife_info("actor_entry_in_bandit") then
  custom_order(2800)
  choose_item("bandit_raid_outfit",96)
  else
  custom_order(5200)
  choose_item("bandit_raid_outfit",105)
  end
end
function zat_b_trader_o_2(first_speaker,second_speaker)
  if has_alife_info("actor_entry_in_bandit") then
  custom_order(6000)
  choose_item("bandit_exo_outfit",200)
  else
  custom_order(9000)
  choose_item("bandit_exo_outfit",250)
  end
end
function zat_b_trader_o_3(first_speaker,second_speaker)
  custom_order(2000)
  choose_item("bandit_heavy_bron_outfit",100)
end
function jup_f_trader_w_1(first_speaker,second_speaker)
  custom_order(5000)
  choose_item("wpn_lr300_acog_detector",170)
end
function jup_f_trader_w_2(first_speaker,second_speaker)
  custom_order(7800)
  choose_item("wpn_g36_g36_t",320)
end
function jup_f_trader_w_3(first_speaker,second_speaker)
  custom_order(6000)
  choose_item("wpn_ak101_pso_detector",200)
end
function jup_f_trader_w_4(first_speaker,second_speaker)
  custom_order(10000)
  choose_item("wpn_g36k",550)
end
function jup_f_trader_w_5(first_speaker,second_speaker)
  custom_order(4200)
  choose_item("wpn_wincheaster1300",130)
end
function jup_f_trader_w_6(first_speaker,second_speaker)
  custom_order(7290)
  choose_item("wpn_hk417_acog_detector",165)
end
function jup_f_trader_o_1(first_speaker,second_speaker)
  custom_order(5000)
  choose_item("svoboda_light_outfit",300)
end
function jup_f_trader_o_2(first_speaker,second_speaker)
  custom_order(2000)
  choose_item("helm_rp_metro_furhat",150)
end
function jup_f_trader_o_3(first_speaker,second_speaker)
  custom_order(7500)
  choose_item("helm_rp_metro_gp7",250)
end
function jup_f_trader_o_4(first_speaker,second_speaker)
  custom_order(10000)
  choose_item("svoboda_radiation_outfit",380)
end
function jup_f_trader_o_5(first_speaker,second_speaker)
  custom_order(25000)
  choose_item("svoboda_exo_outfit",550)
end
function jup_f_trader_o_6(first_speaker,second_speaker)
  custom_order(10000)
  choose_item("svoboda_scientific_outfit",380)
end
function jup_f_trader_o_7(first_speaker,second_speaker)
  custom_order(25000)
  choose_item("svoboda_heavy_outfit",550)
end
function jup_d_trader_w_1(first_speaker,second_speaker)
  custom_order(5000)
  choose_item("wpn_oc33",250)
end
function jup_d_trader_w_2(first_speaker,second_speaker)
  custom_order(7800)
  choose_item("wpn_ak105",350)
end
function jup_d_trader_w_3(first_speaker,second_speaker)
  custom_order(6000)
  choose_item("wpn_tis",300)
end
function jup_d_trader_w_4(first_speaker,second_speaker)
  custom_order(7000)
  choose_item("wpn_vepr",200)
end
function jup_d_trader_w_5(first_speaker,second_speaker)
  custom_order(10000)
  choose_item("wpn_ksvk",450)
end
function jup_d_trader_o_1(first_speaker,second_speaker)
  custom_order(2000)
  choose_item("helm_battle_dolg",150)
end
function jup_d_trader_o_2(first_speaker,second_speaker)
  custom_order(5000)
  choose_item("dolg_scientific_outfit",300)
end
function jup_d_trader_o_3(first_speaker,second_speaker)
  custom_order(7500)
  choose_item("dolg_army_outfit",350)
end
function jup_d_trader_o_4(first_speaker,second_speaker)
  custom_order(15000)
  choose_item("dolg_exo_outfit",500)
end
function jup_d_trader_o_5(first_speaker,second_speaker)
  custom_order(10000)
  choose_item("dolg_heavy_bron_outfit",350)
end
function jup_k_trader_w_1(first_speaker,second_speaker)
  if has_alife_info("actor_entry_in_killer") then
  custom_order(5000)
  choose_item("wpn_fnscar",250)
  else
  custom_order(5500)
  choose_item("wpn_fnscar",280)
  end
end
function jup_k_trader_w_2(first_speaker,second_speaker)
  if has_alife_info("actor_entry_in_killer") then
  custom_order(5000)
  choose_item("wpn_xm8",300)
  else
  custom_order(6400)
  choose_item("wpn_xm8",340)
  end
end
function jup_k_trader_w_3(first_speaker,second_speaker)
  if has_alife_info("actor_entry_in_killer") then
  custom_order(6500)
  choose_item("wpn_fnfal",350)
  else
  custom_order(8100)
  choose_item("wpn_fnfal",390)
  end
end
function jup_k_trader_w_4(first_speaker,second_speaker)
  if has_alife_info("actor_entry_in_killer") then
  custom_order(4500)
  choose_item("wpn_l85_tactical",125)
  else
  custom_order(5100)
  choose_item("wpn_l85_tactical",152)
  end
end
function jup_k_trader_w_5(first_speaker,second_speaker)
  if has_alife_info("actor_entry_in_killer") then
  custom_order(4500)
  choose_item("wpn_m200",325)
  else
  custom_order(5100)
  choose_item("wpn_m200",352)
  end
end
function jup_k_trader_o_1(first_speaker,second_speaker)
  if has_alife_info("actor_entry_in_killer") then
  custom_order(2700)
  choose_item("helm_mercenary",97)
  else
  custom_order(3200)
  choose_item("helm_mercenary",104)
  end
end
function jup_k_trader_o_2(first_speaker,second_speaker)
  if has_alife_info("actor_entry_in_killer") then
  custom_order(3100)
  choose_item("killer_outfit",95)
  else
  custom_order(3800)
  choose_item("killer_outfit",102)
  end
end
function jup_k_trader_o_3(first_speaker,second_speaker)
  if has_alife_info("actor_entry_in_killer") then
  custom_order(7000)
  choose_item("killer_exo_outfit",400)
  else
  custom_order(12000)
  choose_item("killer_exo_outfit",445)
  end
end
function jup_r_trader_w_1(first_speaker,second_speaker)
  if has_alife_info("actor_entry_in_rasvet") then
  custom_order(4600)
  choose_item("wpn_m4a1_acog_detector",365)
  else
  custom_order(5500)
  choose_item("wpn_m4a1_acog_detector",370)
  end
end
function jup_r_trader_w_2(first_speaker,second_speaker)
  if has_alife_info("actor_entry_in_rasvet") then
  custom_order(2400)
  choose_item("wpn_svd_m_wood",212)
  else
  custom_order(4400)
  choose_item("wpn_svd_m_wood",235)
  end
end
function jup_r_trader_w_3(first_speaker,second_speaker)
  if has_alife_info("actor_entry_in_rasvet") then
  custom_order(3100)
  choose_item("wpn_remington870_c-more",350)
  else
  custom_order(6080)
  choose_item("wpn_remington870_c-more",390)
  end
end
function jup_r_trader_w_4(first_speaker,second_speaker)
  if has_alife_info("actor_entry_in_rasvet") then
  custom_order(3500)
  choose_item("wpn_ak",150)
  else
  custom_order(5900)
  choose_item("wpn_ak",190)
  end
end
function jup_r_trader_o_1(first_speaker,second_speaker)
  if has_alife_info("actor_entry_in_rasvet") then
  custom_order(500)
  choose_item("rasvet_light_novice_outfit",100)
  else
  custom_order(600)
  choose_item("rasvet_light_novice_outfit",110)
  end
end
function jup_r_trader_o_2(first_speaker,second_speaker)
  if has_alife_info("actor_entry_in_rasvet") then
  custom_order(700)
  choose_item("rasvet_medium_outfit",140)
  else
  custom_order(900)
  choose_item("rasvet_medium_outfit",160)
  end
end
function jup_r_trader_o_3(first_speaker,second_speaker)
  if has_alife_info("actor_entry_in_rasvet") then
  custom_order(1500)
  choose_item("rasvet_light_outfit",150)
  else
  custom_order(2000)
  choose_item("rasvet_light_outfit",170)
  end
end
function jup_r_trader_o_4(first_speaker,second_speaker)
  if has_alife_info("actor_entry_in_rasvet") then
  custom_order(4500)
  choose_item("rasvet_3b_outfit",240)
  else
  custom_order(5000)
  choose_item("rasvet_3b_outfit",260)
  end
end
function jup_r_trader_o_5(first_speaker,second_speaker)
  if has_alife_info("actor_entry_in_rasvet") then
  custom_order(9000)
  choose_item("rasvet_scientific_outfit",340)
  else
  custom_order(10000)
  choose_item("rasvet_scientific_outfit",360)
  end
end
function jup_r_trader_o_6(first_speaker,second_speaker)
  if has_alife_info("actor_entry_in_rasvet") then
  custom_order(1700)
  choose_item("rasvet_exo_outfit",540)
  else
  custom_order(1900)
  choose_item("rasvet_exo_outfit",560)
  end
end
function jup_e_trader_o_1(first_speaker,second_speaker)
  custom_order(8600)
  choose_item("ecolog_outfit_green",280)
end
function jup_e_trader_o_2(first_speaker,second_speaker)
  custom_order(17500)
  choose_item("ecolog_exo_outfit",680)
end
function pri_a_trader_w_1(first_speaker,second_speaker)
  custom_order(12000)
  choose_item("wpn_grom",310)
end
function pri_a_trader_w_2(first_speaker,second_speaker)
  custom_order(13500)
  choose_item("wpn_kriss",250)
end
function pri_a_trader_w_3(first_speaker,second_speaker)
  custom_order(19000)
  choose_item("wpn_ak107",415)
end
function pri_a_trader_w_4(first_speaker,second_speaker)
  custom_order(15000)
  choose_item("wpn_m82",325)
end
function pri_a_trader_o_1(first_speaker,second_speaker)
  custom_order(3500)
  choose_item("military_outfit",180)
end
function pri_a_trader_o_2(first_speaker,second_speaker)
  custom_order(9600)
  choose_item("army_exo_outfit",500)
end
function pri_a_trader_o_3(first_speaker,second_speaker)
  custom_order(6000)
  choose_item("soldier_izol_1_outfit",400)
end
function pri_m_trader_w_1(first_speaker,second_speaker)
  if has_alife_info("actor_entry_in_monolith") then
  custom_order(4000)
  choose_item("wpn_fn2000_hurricane",320)
  else
  custom_order(5000)
  choose_item("wpn_fn2000_hurricane",350)
  end
end
function pri_m_trader_w_2(first_speaker,second_speaker)
  if has_alife_info("actor_entry_in_monolith") then
  custom_order(3200)
  choose_item("wpn_cobra",380)
  else
  custom_order(5000)
  choose_item("wpn_cobra",360)
  end
end
function pri_m_trader_w_3(first_speaker,second_speaker)
  if has_alife_info("actor_entry_in_monolith") then
  custom_order(5200)
  choose_item("wpn_m4a1mk",450)
  else
  custom_order(6000)
  choose_item("wpn_m4a1mk",480)
  end
end
function pri_m_trader_w_4(first_speaker,second_speaker)
  if has_alife_info("actor_entry_in_monolith") then
  custom_order(7500)
  choose_item("wpn_m1000",580)
  else
  custom_order(8000)
  choose_item("wpn_m1000",560)
  end
end
function pri_m_trader_o_1(first_speaker,second_speaker)
  if has_alife_info("actor_entry_in_monolith") then
  custom_order(3000)
  choose_item("monolith_outfit",250)
  else
  custom_order(4900)
  choose_item("monolith_outfit",275)
  end
end
function pri_m_trader_o_2(first_speaker,second_speaker)
  if has_alife_info("actor_entry_in_monolith") then
  custom_order(6000)
  choose_item("monolit_exo_outfit",600)
  else
  custom_order(10000)
  choose_item("monolit_exo_outfit",650)
  end
end
function show_order_costs(first_speaker,second_speaker)
   db.actor:give_talk_message2("",game.translate_string("st_order_cost").." "..loaded_cost.." "..game.translate_string("st_bankir_ru"),"ui_iconsTotal_found_thing","iconed_answer_item")
   if loaded_need~=0 then
       db.actor:give_talk_message2("",game.translate_string("%c[110,0,200,0]")..game.translate_string("st_custom_goods_need_rank").." "..game.translate_string("%c[110,148,148,0]")..loaded_need,"ui_iconsTotal_found_thing","iconed_answer_item")
   end
   db.actor:give_talk_message2("",game.translate_string(sgm_functions.ReadDescription(loaded_item)),"ui_iconsTotal_agroprom_get_military_documents","iconed_answer_item")
end
function order_has_money(actor, npc)
   return get_actor_rank()>=loaded_need and db.actor:money()>=loaded_cost
end
function order_agree_less_money(actor, npc)
   return db.actor:money()<loaded_cost
end
function order_agree_give_money(actor, npc)
   dialogs.relocate_money(npc,loaded_cost,"out")
   trader_activate_order(actor,npc)
end
function order_recoil_have_money(actor, npc)
   return db.actor:money()>=500
end
function order_recoil_give_money(actor, npc)
   dialogs.relocate_money(npc,500,"out")
   trader_deactivate_order(actor,npc)
end
------------------------------------------------------------------------------
--                      Торгаш: продажа бинокля                             --
------------------------------------------------------------------------------
function zat_stalker_trader_show_binos(first_speaker,second_speaker)
   local bino_slot=db.actor:item_in_slot(5)
   if bino_slot~=nil and bino_slot:section()~=nil and (bino_slot:section()=="wpn_binoc" or bino_slot:section()=="wpn_binoc_1" or bino_slot:section()=="wpn_binoc_2")  then
      db.actor:give_talk_message2("",game.translate_string("st_binocular_m2"),"ui_mod_icon_binoculars","iconed_answer_item")
   elseif bino_slot~=nil and bino_slot:section()~=nil and bino_slot:section()=="wpn_binoc_2" then
      db.actor:give_talk_message2("",game.translate_string("st_binocular_default"),"ui_mod_icon_binoculars","iconed_answer_item")
   end
end
function jup_freedom_trader_show_binos(first_speaker,second_speaker)
   local bino_slot=db.actor:item_in_slot(5)
   if bino_slot~=nil and bino_slot:section()~=nil and (bino_slot:section()=="wpn_binoc" or bino_slot:section()=="wpn_binoc_1" or bino_slot:section()=="wpn_binoc_2") then
      db.actor:give_talk_message2("",game.translate_string("st_binocular_m1"),"ui_mod_icon_binoculars","iconed_answer_item")
   elseif bino_slot~=nil and bino_slot:section()~=nil and bino_slot:section()=="wpn_binoc_2" then
      db.actor:give_talk_message2("",game.translate_string("st_binocular_default"),"ui_mod_icon_binoculars","iconed_answer_item")
   end
end
function pri_army_trader_show_binos(first_speaker,second_speaker)
   local bino_slot=db.actor:item_in_slot(5)
   if bino_slot~=nil and bino_slot:section()~=nil and (bino_slot:section()=="wpn_binoc" or bino_slot:section()=="wpn_binoc_1" or bino_slot:section()=="wpn_binoc_1") then
      db.actor:give_talk_message2("",game.translate_string("st_binocular_m3"),"ui_mod_icon_binoculars","iconed_answer_item")
   elseif bino_slot~=nil and bino_slot:section()~=nil and bino_slot:section()=="wpn_binoc_2" then
      db.actor:give_talk_message2("",game.translate_string("st_binocular_default"),"ui_mod_icon_binoculars","iconed_answer_item")
   end
end
function selected_other_bino(actor,npc)
   local bino_slot=db.actor:item_in_slot(5)
   if bino_slot~=nil and bino_slot:section()~=nil and bino_slot:section()~="wpn_binoc" then
      return true
   end
   return false
end
function dont_installed_m1(actor,npc)
   local bino_slot=db.actor:item_in_slot(5)
   if bino_slot~=nil and bino_slot:section()~=nil and bino_slot:section()~="wpn_binoc_1" then
      return true
   end
   return false
end
function dont_installed_m2(actor,npc)
   local bino_slot=db.actor:item_in_slot(5)
   if bino_slot~=nil and bino_slot:section()~=nil and bino_slot:section()~="wpn_binoc_1" then
      return true
   end
   return false
end
function dont_installed_m3(actor,npc)
   local bino_slot=db.actor:item_in_slot(5)
   if bino_slot~=nil and bino_slot:section()~=nil and bino_slot:section()~="wpn_binoc_2" then
      return true
   end
   return false
end
function install_bino_def(actor,npc)
   local bino_slot=db.actor:item_in_slot(5)
   if bino_slot~=nil and bino_slot:section()~=nil then
      remove_inv_item(db.actor,bino_slot:section())
      dialogs.relocate_item_section(npc,"wpn_binoc","in")
   end
end
function install_bino_m1(actor,npc)
   local bino_slot=db.actor:item_in_slot(5)
   if bino_slot~=nil and bino_slot:section()~=nil then
      remove_inv_item(db.actor,bino_slot:section())
      dialogs.relocate_item_section(npc,"wpn_binoc_1","in")
   end
end
function install_bino_m2(actor,npc)
   local bino_slot=db.actor:item_in_slot(5)
   if bino_slot~=nil and bino_slot:section()~=nil then
      remove_inv_item(db.actor,bino_slot:section())
      dialogs.relocate_item_section(npc,"wpn_binoc_1","in")
   end
end
function install_bino_m3(actor,npc)
   local bino_slot=db.actor:item_in_slot(5)
   if bino_slot~=nil and bino_slot:section()~=nil then
      remove_inv_item(db.actor,bino_slot:section())
      dialogs.relocate_item_section(npc,"wpn_binoc_2","in")
   end
end
------------------------------------------------------------------------------
--                       Шустрый: квесты-заказы                             --
------------------------------------------------------------------------------
function s_show_available_tasks(first_speaker,second_speaker)
   if dont_has_alife_info("shustriy_find_1_complete") then
      db.actor:give_talk_message2("",game.translate_string("shustriy_available_find_1_title"),"ui_inGame2_Shustriy_Find_1","iconed_answer_item")
   end
   if dont_has_alife_info("shustriy_find_2_complete") then
      db.actor:give_talk_message2("",game.translate_string("shustriy_available_find_2_title"),"ui_inGame2_Shustriy_Find_2","iconed_answer_item")
   end
   if dont_has_alife_info("shustriy_find_3_complete") then
      db.actor:give_talk_message2("",game.translate_string("shustriy_available_find_3_title"),"ui_inGame2_Shustriy_Find_3","iconed_answer_item")
   end
   if has_alife_info("shustriy_find_4_allow") and dont_has_alife_info("shustriy_find_4_complete") then
      db.actor:give_talk_message2("",game.translate_string("shustriy_available_find_4_title"),"ui_inGame2_Shustriy_Find_4","iconed_answer_item")
   end
end
function shustriy_give_find_1_quest(actor,npc)
   add_task("sgm_shustriy_find_1")
end
function shustriy_give_find_2_quest(actor,npc)
   add_task("sgm_shustriy_find_2")
end
function shustriy_give_find_3_quest(actor,npc)
   add_task("sgm_shustriy_find_3")
end
function shustriy_give_find_4_quest(actor,npc)
   add_task("sgm_shustriy_find_4")
end
function shustriy_give_find_1_spawn(actor,npc)
      create("shustriy_ingram_m10",412.489,43.874,-26.262,1642568,3992)
end
function shustriy_give_find_2_spawn(actor,npc)
   create("shustriy_ak47",313.724,35.632,-233.085,1222905,4543)
end
function shustriy_give_find_3_spawn(actor,npc)
   create("shustriy_mossberg_590mk",-422.774,0.010,-371.828,16230,4543)
end
function shustriy_give_find_4_spawn(actor,npc)
   create("shustriy_steyr_aug_ss190",5.438,4.531,270.509,205088,4674)
end
function there_available_tasks(actor,npc)
   return sgm_functions.read_variable("shustriy_available_tasks")~=nil and sgm_functions.read_variable("shustriy_available_tasks")>0
end
function nothing_available_tasks(actor,npc)
   return sgm_functions.read_variable("shustriy_available_tasks")~=nil and sgm_functions.read_variable("shustriy_available_tasks")<=0
end
function s_actor_has_1_order(actor,npc)
   return db.actor:object("shustriy_ingram_m10")
end
function s_actor_give_1_order(actor,npc)
   dialogs.relocate_item_section(npc,"shustriy_ingram_m10","out")
end
function s_order_1_reward(actor,npc)
   local s_tasks=sgm_functions.read_variable("shustriy_available_tasks")
   dialogs.relocate_item_section(actor,"grenade_f1","in")
   dialogs.relocate_item_section(actor,"ammo_vog-25","in")
   dialogs.relocate_money(npc,math.random(1500,3000),"in")
   give_info("shustriy_find_1_reward")
   disable_info("shustriy_find_is_active")
   sgm_functions.dec_counter("shustriy_available_tasks")
end
function s_actor_has_2_order(actor,npc)
   return db.actor:object("shustriy_ak47")
end
function s_actor_give_2_order(actor,npc)
   dialogs.relocate_item_section(npc,"shustriy_ak47","out")
end
function s_order_2_reward(actor,npc)
   local s_tasks=sgm_functions.read_variable("shustriy_available_tasks")
   dialogs.relocate_item_section(actor,"grenade_f1","in",2)
   dialogs.relocate_item_section(actor,"wpn_addon_scope_susat_custom","in")
   dialogs.relocate_item_section(actor,"bag_medkit_2","in")
   dialogs.relocate_money(npc,math.random(3000,5000),"in")
   give_info("shustriy_find_2_reward")
   disable_info("shustriy_find_is_active")
   sgm_functions.dec_counter("shustriy_available_tasks")
end
function s_actor_has_3_order(actor,npc)
   return db.actor:object("shustriy_mossberg_590mk")
end
function s_actor_give_3_order(actor,npc)
   dialogs.relocate_item_section(npc,"shustriy_mossberg_590mk","out")
end
function s_order_3_reward(actor,npc)
   local s_tasks=sgm_functions.read_variable("shustriy_available_tasks")
   dialogs.relocate_item_section(actor,"grenade_f1","in",2)
   dialogs.relocate_item_section(actor,"wpn_usp","in")
   dialogs.relocate_item_section(actor,"ammo_11.43x23_hydro","in",2)
   dialogs.relocate_item_section(actor,"af_gravi","in")
   dialogs.relocate_item_section(actor,"ammo_5.45x39_ap","in",2)
   dialogs.relocate_item_section(actor,"ammo_5.56x45_ss190","in",2)
   dialogs.relocate_money(npc,math.random(7000,9000),"in")
   give_info("shustriy_find_3_reward")
   disable_info("shustriy_find_is_active")
   sgm_functions.dec_counter("shustriy_available_tasks")
end
function s_actor_has_4_order(actor,npc)
   return db.actor:object("shustriy_steyr_aug_ss190")
end
function s_actor_give_4_order(actor,npc)
   dialogs.relocate_item_section(npc,"shustriy_steyr_aug_ss190","out")
end
function s_order_4_reward(actor,npc)
   local s_tasks=sgm_functions.read_variable("shustriy_available_tasks")
   dialogs.relocate_item_section(actor,"grenade_f1","in",3)
   dialogs.relocate_item_section(actor,"wpn_svd","in")
   dialogs.relocate_item_section(actor,"ammo_7.62x51_fmj","in",2)
   dialogs.relocate_item_section(actor,"af_fireball","in")
   dialogs.relocate_money(npc,math.random(6000,10000),"in")
   give_info("shustriy_find_4_reward")
   disable_info("shustriy_find_is_active")
   sgm_functions.dec_counter("shustriy_available_tasks")
end
------------------------------------------------------------------------------
--                      Зверобой: покупка трофеев                           --
------------------------------------------------------------------------------
function trapper_available_booty(first_speaker,second_speaker)
   parse_booty_tips("mutant_snork_booty")
   parse_booty_tips("mutant_psevdodog_booty")
   parse_booty_tips("mutant_krovosos_booty")
   parse_booty_tips("mutant_boar_booty")
   parse_booty_tips("mutant_dog_booty")
   parse_booty_tips("mutant_flesh_booty")
   parse_booty_tips("mutant_giant_booty")
   parse_booty_tips("mutant_chimera_booty")
   parse_booty_tips("mutant_controler_booty")
   parse_booty_tips("mutant_burer_booty")
   parse_booty_tips("mutant_zombie_booty")
   parse_booty_tips("mutant_fracture_booty")
   parse_booty_tips("mutant_cat_booty")
end
function parse_booty_tips(booty_name)
   if sgm_functions.have_item_count(booty_name,1) then
      db.actor:give_talk_message2("",game.translate_string("st_booty_count").." "..game.translate_string(sgm_functions.ReadCaption(booty_name)).." = "..sgm_functions.get_item_count(booty_name)..game.translate_string("st_booty_shtuk"),"ui_iconsTotal_gar_kill_boars","iconed_answer_item")
      db.actor:give_talk_message2("",game.translate_string("st_booty_costs").." "..sgm_functions.consider_items_costs(booty_name).." RU","ui_iconsTotal_found_thing","iconed_answer_item")
   end
end
function relocates_booty(booty_name,npc)
   actor=db.actor
   for k,v in pairs(relocates_table(booty_name)) do
      if v~=nil and alife():object(v) then
         alife():release(alife():object(v),true)
      end
   end
end
function relocates_table(need_item)
   local item_table={}
   local item_section=need_item
   local item_cnt=0
   local function relocator(temp,item)
	if item:section()==item_section and item_cnt==0 then
	   table.insert(item_table,item:id())
           item_cnt=1
	elseif item:section()==item_section and item_cnt==1 then
	   table.insert(item_table,item:id())
           item_cnt=0
	end
   end
   db.actor:iterate_inventory(relocator,db.actor)
   return item_table
end
function pre_trapper_booty_has(actor,npc)
   if db.actor:object("mutant_snork_booty") or db.actor:object("mutant_psevdodog_booty") or
   db.actor:object("mutant_krovosos_booty") or db.actor:object("mutant_boar_booty") or
   db.actor:object("mutant_dog_booty") or db.actor:object("mutant_flesh_booty") or
   db.actor:object("mutant_giant_booty") or db.actor:object("mutant_chimera_booty") or
   db.actor:object("mutant_fracture_booty") or db.actor:object("mutant_zombie_booty") or
   db.actor:object("mutant_controler_booty") or db.actor:object("mutant_burer_booty") or db.actor:object("mutant_cat_booty") then
   return true
   else
      return false
   end
end
function pre_trapper_booty_dont(actor,npc)
   if db.actor:object("mutant_snork_booty") or db.actor:object("mutant_psevdodog_booty") or
   db.actor:object("mutant_krovosos_booty") or db.actor:object("mutant_boar_booty") or
   db.actor:object("mutant_dog_booty") or db.actor:object("mutant_flesh_booty") or
   db.actor:object("mutant_giant_booty") or db.actor:object("mutant_chimera_booty") or
   db.actor:object("mutant_fracture_booty") or db.actor:object("mutant_zombie_booty") or
   db.actor:object("mutant_controler_booty") or db.actor:object("mutant_burer_booty") or db.actor:object("mutant_cat_booty") then
   return false
   else
      return true
   end
end
function has_mutant_snork_booty(actor,npc)
   return db.actor:object("mutant_snork_booty")
end
function has_mutant_psevdodog_booty(actor,npc)
   return db.actor:object("mutant_psevdodog_booty")
end
function has_mutant_krovosos_booty(actor,npc)
   return db.actor:object("mutant_krovosos_booty")
end
function has_mutant_boar_booty(actor,npc)
   return db.actor:object("mutant_boar_booty")
end
function has_mutant_dog_booty(actor,npc)
   return db.actor:object("mutant_dog_booty")
end
function has_mutant_flesh_booty(actor,npc)
   return db.actor:object("mutant_flesh_booty")
end
function has_mutant_giant_booty(actor,npc)
   return db.actor:object("mutant_giant_booty")
end
function has_mutant_chimera_booty(actor,npc)
   return db.actor:object("mutant_chimera_booty")
end
function has_mutant_controler_booty(actor,npc)
   return db.actor:object("mutant_controler_booty")
end
function has_mutant_burer_booty(actor,npc)
   return db.actor:object("mutant_burer_booty")
end
function has_mutant_zombie_booty(actor,npc)
   return db.actor:object("mutant_zombie_booty")
end
function has_mutant_fracture_booty(actor,npc)
   return db.actor:object("mutant_fracture_booty")
end
function has_mutant_cat_booty(actor,npc)
   return db.actor:object("mutant_cat_booty")
end
function trapper_snork_booty_reward(actor,npc)
   dialogs.relocate_money(npc,sgm_functions.consider_items_costs("mutant_snork_booty"),"in")
end
function trapper_snork_booty_relocate(actor,npc)
   relocates_booty("mutant_snork_booty",npc)
end
function trapper_psevdodog_booty_reward(actor,npc)
   dialogs.relocate_money(npc,sgm_functions.consider_items_costs("mutant_psevdodog_booty"),"in")
end
function trapper_psevdodog_booty_relocate(actor,npc)
   relocates_booty("mutant_psevdodog_booty",npc)
end
function trapper_krovosos_booty_reward(actor,npc)
   dialogs.relocate_money(npc,sgm_functions.consider_items_costs("mutant_krovosos_booty"),"in")
end
function trapper_krovosos_booty_relocate(actor,npc)
   relocates_booty("mutant_krovosos_booty",npc)
end
function trapper_boar_booty_reward(actor,npc)
   dialogs.relocate_money(npc,sgm_functions.consider_items_costs("mutant_boar_booty"),"in")
end
function trapper_boar_booty_relocate(actor,npc)
   relocates_booty("mutant_boar_booty",npc)
end
function trapper_dog_booty_reward(actor,npc)
   dialogs.relocate_money(npc,sgm_functions.consider_items_costs("mutant_dog_booty"),"in")
end
function trapper_dog_booty_relocate(actor,npc)
   relocates_booty("mutant_dog_booty",npc)
end
function trapper_flesh_booty_reward(actor,npc)
   dialogs.relocate_money(npc,sgm_functions.consider_items_costs("mutant_flesh_booty"),"in")
end
function trapper_flesh_booty_relocate(actor,npc)
   relocates_booty("mutant_flesh_booty",npc)
end
function trapper_giant_booty_reward(actor,npc)
   dialogs.relocate_money(npc,sgm_functions.consider_items_costs("mutant_giant_booty"),"in")
end
function trapper_giant_booty_relocate(actor,npc)
   relocates_booty("mutant_giant_booty",npc)
end
function trapper_chimera_booty_reward(actor,npc)
   dialogs.relocate_money(npc,sgm_functions.consider_items_costs("mutant_chimera_booty"),"in")
end
function trapper_chimera_booty_relocate(actor,npc)
   relocates_booty("mutant_chimera_booty",npc)
end
function trapper_controler_booty_reward(actor,npc)
   dialogs.relocate_money(npc,sgm_functions.consider_items_costs("mutant_controler_booty"),"in")
end
function trapper_controler_booty_relocate(actor,npc)
   relocates_booty("mutant_controler_booty",npc)
end
function trapper_burer_booty_reward(actor,npc)
   dialogs.relocate_money(npc,sgm_functions.consider_items_costs("mutant_burer_booty"),"in")
end
function trapper_burer_booty_relocate(actor,npc)
   relocates_booty("mutant_burer_booty",npc)
end
function trapper_zombie_booty_reward(actor,npc)
   dialogs.relocate_money(npc,sgm_functions.consider_items_costs("mutant_zombie_booty"),"in")
end
function trapper_zombie_booty_relocate(actor,npc)
   relocates_booty("mutant_zombie_booty",npc)
end
function trapper_fracture_booty_reward(actor,npc)
   dialogs.relocate_money(npc,sgm_functions.consider_items_costs("mutant_fracture_booty"),"in")
end
function trapper_fracture_booty_relocate(actor,npc)
   relocates_booty("mutant_fracture_booty",npc)
end
function trapper_cat_booty_reward(actor,npc)
   dialogs.relocate_money(npc,sgm_functions.consider_items_costs("mutant_cat_booty"),"in")
end
function trapper_cat_booty_relocate(actor,npc)
   relocates_booty("mutant_cat_booty",npc)
end
----------------------------------------------------
--------/Новиков: Модернизация детекторов/----------
----------------------------------------------------
function novikov_available_modyfy(first_speaker,second_speaker)
   parse_detector_tips("detector_simple")
   parse_detector_tips("detector_advanced")
   parse_detector_tips("detector_elite")
   parse_detector_tips("detector_scientific")
   parse_detector_tips("detector_omega")
end
function parse_detector_tips(detector_name)
   if sgm_functions.have_item_count(detector_name,1) then
      db.actor:give_talk_message2("",game.translate_string(sgm_functions.ReadCaption(detector_name)),"ui_iconsTotal_yan_find_scientist","iconed_answer_item")
   end
end
function replace_detector(detector_name)
   actor=db.actor
   for k,v in pairs(replace_table(detector_name)) do
      if v~=nil and alife():object(v) then
         alife():release(alife():object(v),true)
      end
   end
end
function replace_table(need_item)
   local item_table={}
   local item_section=need_item
   local item_cnt=0
   local function relocator(temp,item)
	if item:section()==item_section and item_cnt==0 then
	   table.insert(item_table,item:id())
           item_cnt=1
	end
   end
   db.actor:iterate_inventory(relocator,db.actor)
   return item_table
end
function pre_novikov_has_any(actor,npc)
   if has_any_items("detector_simple,detector_advanced,detector_elite,detector_scientific,detector_omega") then
      return true
   else
      return false
   end
end
function pre_novikov_has_nothing(actor,npc)
   if has_any_items("detector_simple,detector_advanced,detector_elite,detector_scientific,detector_omega") then
      return false
   else
      return true
   end
end
function has_money_to_detector_simple(actor, npc)
   return db.actor:money()>=2400
end
function not_money_to_detector_simple(actor, npc)
   return db.actor:money()<2400
end
function give_money_to_detector_simple(actor, npc)
   dialogs.relocate_money(npc,2400,"out")   
end
function has_money_to_detector_advanced(actor, npc)
   return db.actor:money()>=4500
end
function not_money_to_detector_advanced(actor, npc)
   return db.actor:money()<4500
end
function give_money_to_detector_advanced(actor, npc)
   dialogs.relocate_money(npc,4500,"out")   
end
function has_money_to_detector_elite(actor, npc)
   return db.actor:money()>=8100
end
function not_money_to_detector_elite(actor, npc)
   return db.actor:money()<8100
end
function give_money_to_detector_elite(actor, npc)
   dialogs.relocate_money(npc,8100,"out")   
end
function has_money_to_detector_scientific(actor, npc)
   return db.actor:money()>=7000
end
function not_money_to_detector_scientific(actor, npc)
   return db.actor:money()<7000
end
function give_money_to_detector_scientific(actor, npc)
   dialogs.relocate_money(npc,7000,"out")   
end
function has_money_to_detector_omega(actor, npc)
   return db.actor:money()>=12500
end
function not_money_to_detector_omega(actor, npc)
   return db.actor:money()<12500
end
function give_money_to_detector_omega(actor, npc)
   dialogs.relocate_money(npc,12500,"out")   
end
function modify_detector_simple(actor,npc)
   dialogs.relocate_item_section(actor,"detector_simple_up","in")
   replace_detector("detector_simple")
end
function modify_detector_advanced(actor,npc)
   dialogs.relocate_item_section(actor,"detector_advanced_up","in")
   replace_detector("detector_advanced")
end
function modify_detector_elite(actor,npc)
   dialogs.relocate_item_section(actor,"detector_elite_up","in")
   replace_detector("detector_elite")
end
function modify_detector_scientific(actor,npc)
   dialogs.relocate_item_section(actor,"detector_scientific_up","in")
   replace_detector("detector_scientific")
end
function modify_detector_omega(actor,npc)
   dialogs.relocate_item_section(actor,"detector_omega_up","in")
   replace_detector("detector_omega")
end
function has_detector_simple(actor,npc)
   return db.actor:object("detector_simple")
end
function has_detector_advanced(actor,npc)
   return db.actor:object("detector_advanced")
end
function has_detector_elite(actor,npc)
   return db.actor:object("detector_elite")
end
function has_detector_scientific(actor,npc)
   return db.actor:object("detector_scientific")
end
function has_detector_omega(actor,npc)
   return db.actor:object("detector_omega")
end
------------------------------------------------------------------------------
--                    Телохранитель: помощь ГГ                              --
------------------------------------------------------------------------------
issued_pistols_list = {
{"wpn_pm"},
{"wpn_pb"},
{"wpn_fort"},
{"wpn_hpsa"},
{"wpn_beretta"},
{"wpn_walther"},
{"wpn_sig220"},
{"wpn_colt1911"},
{"wpn_usp"},
{"wpn_desert_eagle"},
{"wpn_pm_actor"},
{"wpn_desert_eagle_nimble"},
{"wpn_sig220_nimble"},
{"wpn_usp_nimble"},
{"wpn_fort_snag"},
{"wpn_fort_actor"},
{"wpn_beretta_m1"},
{"wpn_beretta_m2"},
{"wpn_beretta_m3"},
{"wpn_fort_m1"},
{"wpn_fort_m2"},
{"wpn_fort_m3"},
{"wpn_pm_m1"},
{"wpn_pm_m2"},
{"wpn_pm_m3"},
{"wpn_sig220_m1"},
{"wpn_sig220_m2"},
{"wpn_sig220_m3"},
{"wpn_autocolt"},
{"wpn_gp100"},
{"wpn_apb"},
{"wpn_gau"},
{"wpn_oc33"},
{"wpn_fiveseven"},
{"wpn_cobra"}
}
issued_rifles_list = {
{"wpn_bm16"},
{"wpn_toz34"},
{"wpn_wincheaster1300"},
{"wpn_spas12"},
{"wpn_protecta"},
{"wpn_ak74u"},
{"wpn_mp5"},
{"wpn_ak74"},
{"wpn_abakan"},
{"wpn_l85"},
{"wpn_lr300"},
{"wpn_sig550"},
{"wpn_groza"},
{"wpn_val"},
{"wpn_vintorez"},
{"wpn_svu"},
{"wpn_svd"},
{"wpn_rg-6"},
{"wpn_rpg7"},
{"wpn_g36"},
{"wpn_fn2000"},
{"wpn_pkm"},
{"wpn_gauss"},
{"wpn_sig550_luckygun"},
{"wpn_pkm_zulus"},
{"wpn_wincheaster1300_trapper"},
{"wpn_groza_nimble"},
{"wpn_mp5_nimble"},
{"wpn_spas12_nimble"},
{"wpn_svd_nimble"},
{"wpn_svu_nimble"},
{"wpn_vintorez_nimble"},
{"wpn_g36_nimble"},
{"wpn_fn2000_nimble"},
{"wpn_protecta_nimble"},
{"wpn_ak74u_snag"},
{"wpn_abakan_m1"},
{"wpn_abakan_m2"},
{"wpn_abakan_m3"},
{"wpn_ak74u_m1"},
{"wpn_ak74u_m2"},
{"wpn_ak74u_m3"},
{"wpn_ak74_m1"},
{"wpn_ak74_m2"},
{"wpn_ak74_m3"},
{"wpn_bm16_m1"},
{"wpn_bm16_m2"},
{"wpn_bm16_m3"},
{"wpn_sig550_m1"},
{"wpn_sig550_m2"},
{"wpn_sig550_m3"},
{"wpn_spas12_m1"},
{"wpn_spas12_m2"},
{"wpn_spas12_m3"},
{"wpn_groza_m1"},
{"wpn_groza_m2"},
{"wpn_groza"},
{"wpn_lr300_m1"},
{"wpn_lr300_m2"},
{"wpn_lr300_m3"},
{"wpn_mp5_m1"},
{"wpn_mp5_m2"},
{"wpn_mp5_m3"},
{"wpn_toz34_m1"},
{"wpn_toz34_m2"},
{"wpn_toz34_m3"},
{"wpn_vintorez_m1"},
{"wpn_vintorez"},
{"wpn_vintorez_m3"},
{"wpn_wincheaster1300_m1"},
{"wpn_wincheaster1300_m2"},
{"wpn_wincheaster1300_m3"},
{"wpn_l85_tactical"},
{"wpn_g43"},
{"wpn_ak74_tactic"},
{"wpn_ak74_pacific"},
{"wpn_fn2000_hurricane"},
{"wpn_flamewerfer"},
{"wpn_g36_sniper"},
{"wpn_toz34_pathfinder"},
{"wpn_ak47"},
{"wpn_awm"},
{"wpn_fanfall"},
{"wpn_grom"},
{"wpn_m4a1"},
{"wpn_m14"},
{"wpn_m82"},
{"wpn_mosina"},
{"wpn_mosina_rusty"},
{"wpn_mossberg590"},
{"wpn_ppsh41"},
{"wpn_ak101"},
{"wpn_ak105"},
{"wpn_mp5_octopus"},
{"wpn_lr300_limit"},
{"wpn_svd_tiger"},
{"wpn_xm8"},
{"wpn_fnfal"},
{"wpn_ksvk"},           
{"wpn_m1000"},           
{"wpn_m200"},            
{"wpn_dsr1"},            
{"wpn_hk417"},           
{"wpn_famasf1"},         
{"wpn_ak101"},          
{"wpn_m4a1h"},           
{"wpn_m4a1mk"},         
{"wpn_g36e"},            
{"wpn_byril"},           
{"wpn_hk416a"},         
{"wpn_tac_aug"},         
{"wpn_fnscar"},          
{"wpn_saiga"},          
{"wpn_vepr"},           
{"wpn_marauder"},        
{"wpn_striker"},        
{"wpn_aek971"},          
{"wpn_vihr"},            
{"wpn_akm"},             
{"wpn_ak107"},           
{"wpn_kriss"},           
{"wpn_ump45m"},         
{"wpn_bizon"},           
{"wpn_tis"},             
{"wpn_m60"},             
{"wpn_rpk"}, 
{"wpn_gauss_n"},
{"wpn_bm16_full"},
{"wpn_p90"},
{"wpn_kar98k"},
{"wpn_sks"},
{"wpn_trg42"}
}
issued_medkits_list = {
{"medkit"},
{"medkit_army"},
{"medkit_scientic"},
{"medkit_elite"}
}
function bodyguard_available_equipment(actor,npc)
   parse_bodyguard_slot(2,actor,"ui_mod_1st_slot")
   parse_bodyguard_slot(3,actor,"ui_mod_2nd_slot")
end
function parse_bodyguard_slot(slot_value,npc,slot_icon)
   if npc:item_in_slot(slot_value)~=nil and npc:item_in_slot(slot_value):section()~=nil then
      db.actor:give_talk_message2("",game.translate_string("%c[110,0,128,64]")..game.translate_string(sgm_functions.ReadCaption(npc:item_in_slot(slot_value):section())),slot_icon,"iconed_answer_item")
      db.actor:give_talk_message2("",game.translate_string(sgm_functions.ReadDescription(npc:item_in_slot(slot_value):section())),"ui_mod_empty_slot","iconed_answer_item")
   end
end
function release_old_weapon(victim,slot_operation)
   if victim:item_in_slot(slot_operation)~=nil and victim:item_in_slot(slot_operation):section()~=nil and victim:object(victim:item_in_slot(slot_operation):section()) then
      if alife():object(victim:object(victim:item_in_slot(slot_operation):section()):id()) then
         alife():release(alife():object(victim:object(victim:item_in_slot(slot_operation):section()):id()),true)
      end
   end
end
function relocate_weapon_to_bodyguard(victim,section,type,amount,show_time)
   if db.actor then
      if not amount then
         amount=1
      end
      for i=1,amount do
         if type == "in" then
             if quest_section[section] == true and victim ~= nil and victim:object(section) ~= nil then
                victim:transfer_item(victim:object(section), db.actor)
             else
                alife():create(section,db.actor:position(),db.actor:level_vertex_id(),db.actor:game_vertex_id(),db.actor:id())
             end
         elseif type == "out" then
             if victim == nil then
                abort("Couldn't relocate item to NULL")
             end
             db.actor:transfer_item(db.actor:object(section),victim)
             if sgm_functions.ReadAmmoClass(section)~=nil then
               parse_ammo=utils.parse_spawns(sgm_functions.ReadAmmoClass(section))
               for k,v in pairs(parse_ammo) do
                  for i=1,v.prob do
                     alife():create(v.section,vector(),0,0,victim:id())
                  end
               end
            end
         end
      end
      if death_manager.ammo_sections[section] == true then
	 local ltx = system_ini()
	 local box_size = ltx:r_s32(section, "box_size")
	 amount = amount * box_size
      end
      news_manager.relocate_item(db.actor, type, section, amount, show_time)
   end
end
function has_available_pistol(actor,npc)
   for k,v in pairs(issued_pistols_list) do
      if db.actor:object(v[1]) then
         return true
      end
   end
   return false
end
function has_available_rifle(actor,npc)
   for k,v in pairs(issued_rifles_list) do
      if db.actor:object(v[1]) then
         return true
      end
   end
   return false
end
function has_available_medkit(actor,npc)
   for k,v in pairs(issued_medkits_list) do
      if db.actor:object(v[1]) and sgm_functions.read_obj_variable(npc,"issued_medkit")==nil then --/not npc:object(v[1])
         return true
      end
   end
   return false
end
--/
function actor_have_pm(actor,npc)
   return db.actor:object("wpn_pm")
end
function actor_have_pb(actor,npc)
   return db.actor:object("wpn_pb")
end
function actor_have_fort(actor,npc)
   return db.actor:object("wpn_fort")
end
function actor_have_hpsa(actor,npc)
   return db.actor:object("wpn_hpsa")
end
function actor_have_beretta(actor,npc)
   return db.actor:object("wpn_beretta")
end
function actor_have_walther(actor,npc)
   return db.actor:object("wpn_walther")
end
function actor_have_sig220(actor,npc)
   return db.actor:object("wpn_sig220")
end
function actor_have_colt1911(actor,npc)
   return db.actor:object("wpn_colt1911")
end
function actor_have_usp(actor,npc)
   return db.actor:object("wpn_usp")
end
function actor_have_desert_eagle(actor,npc)
   return db.actor:object("wpn_desert_eagle")
end
function actor_have_pm_actor(actor,npc)
   return db.actor:object("wpn_pm_actor")
end
function actor_have_desert_eagle_nimble(actor,npc)
   return db.actor:object("wpn_desert_eagle_nimble")
end
function actor_have_sig220_nimble(actor,npc)
   return db.actor:object("wpn_sig220_nimble")
end
function actor_have_usp_nimble(actor,npc)
   return db.actor:object("wpn_usp_nimble")
end
function actor_have_fort_snag(actor,npc)
   return db.actor:object("wpn_fort_snag")
end
function actor_have_fort_actor(actor,npc)
   return db.actor:object("wpn_fort_actor")
end
function actor_have_beretta_m1(actor,npc)
   return db.actor:object("wpn_beretta_m1")
end
function actor_have_beretta_m2(actor,npc)
   return db.actor:object("wpn_beretta_m2")
end
function actor_have_beretta_m3(actor,npc)
   return db.actor:object("wpn_beretta_m3")
end
function actor_have_fort_m1(actor,npc)
   return db.actor:object("wpn_fort_m1")
end
function actor_have_fort_m2(actor,npc)
   return db.actor:object("wpn_fort_m2")
end
function actor_have_fort_m3(actor,npc)
   return db.actor:object("wpn_fort_m3")
end
function actor_have_pm_m1(actor,npc)
   return db.actor:object("wpn_pm_m1")
end
function actor_have_pm_m2(actor,npc)
   return db.actor:object("wpn_pm_m2")
end
function actor_have_pm_m3(actor,npc)
   return db.actor:object("wpn_pm_m3")
end
function actor_have_sig220_m1(actor,npc)
   return db.actor:object("wpn_sig220_m1")
end
function actor_have_sig220_m2(actor,npc)
   return db.actor:object("wpn_sig220_m2")
end
function actor_have_sig220_m3(actor,npc)
   return db.actor:object("wpn_sig220_m3")
end
function actor_have_autocolt(actor,npc)
   return db.actor:object("wpn_autocolt")
end
function actor_have_apb(actor,npc)
   return db.actor:object("wpn_apb")
end
function actor_have_cobra(actor,npc)
   return db.actor:object("wpn_cobra")
end
function actor_have_gp100(actor,npc)
   return db.actor:object("wpn_gp100")
end
function actor_have_gau(actor,npc)
   return db.actor:object("wpn_gau")
end
function actor_have_oc33(actor,npc)
   return db.actor:object("wpn_oc33")
end
function actor_have_fiveseven(actor,npc)
   return db.actor:object("wpn_fiveseven")
end

---
function actor_have_bm16(actor,npc)
   return db.actor:object("wpn_bm16")
end
function actor_have_toz34(actor,npc)
   return db.actor:object("wpn_toz34")
end
function actor_have_wincheaster1300(actor,npc)
   return db.actor:object("wpn_wincheaster1300")
end
function actor_have_spas12(actor,npc)
   return db.actor:object("wpn_spas12")
end
function actor_have_protecta(actor,npc)
   return db.actor:object("wpn_protecta")
end
function actor_have_ak74u(actor,npc)
   return db.actor:object("wpn_ak74u")
end
function actor_have_mp5(actor,npc)
   return db.actor:object("wpn_mp5")
end
function actor_have_ak74(actor,npc)
   return db.actor:object("wpn_ak74")
end
function actor_have_abakan(actor,npc)
   return db.actor:object("wpn_abakan")
end
function actor_have_l85(actor,npc)
   return db.actor:object("wpn_l85")
end
function actor_have_lr300(actor,npc)
   return db.actor:object("wpn_lr300")
end
function actor_have_sig550(actor,npc)
   return db.actor:object("wpn_sig550")
end
function actor_have_groza(actor,npc)
   return db.actor:object("wpn_groza")
end
function actor_have_val(actor,npc)
   return db.actor:object("wpn_val")
end
function actor_have_vintorez(actor,npc)
   return db.actor:object("wpn_vintorez")
end
function actor_have_svu(actor,npc)
   return db.actor:object("wpn_svu")
end
function actor_have_svd(actor,npc)
   return db.actor:object("wpn_svd")
end
function actor_have_rg_6(actor,npc)
   return db.actor:object("wpn_rg-6")
end
function actor_have_rpg7(actor,npc)
   return db.actor:object("wpn_rpg7")
end
function actor_have_g36(actor,npc)
   return db.actor:object("wpn_g36")
end
function actor_have_fn2000(actor,npc)
   return db.actor:object("wpn_fn2000")
end
function actor_have_pkm(actor,npc)
   return db.actor:object("wpn_pkm")
end
function actor_have_gauss(actor,npc)
   return db.actor:object("wpn_gauss")
end
function actor_have_sig550_luckygun(actor,npc)
   return db.actor:object("wpn_sig550_luckygun")
end
function actor_have_pkm_zulus(actor,npc)
   return db.actor:object("wpn_pkm_zulus")
end
function actor_have_wincheaster1300_trapper(actor,npc)
   return db.actor:object("wpn_wincheaster1300_trapper")
end
function actor_have_groza_nimble(actor,npc)
   return db.actor:object("wpn_groza_nimble")
end
function actor_have_mp5_nimble(actor,npc)
   return db.actor:object("wpn_mp5_nimble")
end
function actor_have_spas12_nimble(actor,npc)
   return db.actor:object("wpn_spas12_nimble")
end
function actor_have_svd_nimble(actor,npc)
   return db.actor:object("wpn_svd_nimble")
end
function actor_have_svu_nimble(actor,npc)
   return db.actor:object("wpn_svu_nimble")
end
function actor_have_vintorez_nimble(actor,npc)
   return db.actor:object("wpn_vintorez_nimble")
end
function actor_have_g36_nimble(actor,npc)
   return db.actor:object("wpn_g36_nimble")
end
function actor_have_fn2000_nimble(actor,npc)
   return db.actor:object("wpn_fn2000_nimble")
end
function actor_have_protecta_nimble(actor,npc)
   return db.actor:object("wpn_protecta_nimble")
end
function actor_have_ak74u_snag(actor,npc)
   return db.actor:object("wpn_ak74u_snag")
end
function actor_have_abakan_m1(actor,npc)
   return db.actor:object("wpn_abakan_m1")
end
function actor_have_abakan_m2(actor,npc)
   return db.actor:object("wpn_abakan_m2")
end
function actor_have_abakan_m3(actor,npc)
   return db.actor:object("wpn_abakan_m3")
end
function actor_have_ak74u_m1(actor,npc)
   return db.actor:object("wpn_ak74u_m1")
end
function actor_have_ak74u_m2(actor,npc)
   return db.actor:object("wpn_ak74u_m2")
end
function actor_have_ak74u_m3(actor,npc)
   return db.actor:object("wpn_ak74u_m3")
end
function actor_have_ak74_m1(actor,npc)
   return db.actor:object("wpn_ak74_m1")
end
function actor_have_ak74_m2(actor,npc)
   return db.actor:object("wpn_ak74_m2")
end
function actor_have_ak74_m3(actor,npc)
   return db.actor:object("wpn_ak74_m3")
end
function actor_have_bm16_m1(actor,npc)
   return db.actor:object("wpn_bm16_m1")
end
function actor_have_bm16_m2(actor,npc)
   return db.actor:object("wpn_bm16_m2")
end
function actor_have_bm16_m3(actor,npc)
   return db.actor:object("wpn_bm16_m3")
end
function actor_have_sig550_m1(actor,npc)
   return db.actor:object("wpn_sig550_m1")
end
function actor_have_sig550_m2(actor,npc)
   return db.actor:object("wpn_sig550_m2")
end
function actor_have_sig550_m3(actor,npc)
   return db.actor:object("wpn_sig550_m3")
end
function actor_have_spas12_m1(actor,npc)
   return db.actor:object("wpn_spas12_m1")
end
function actor_have_spas12_m2(actor,npc)
   return db.actor:object("wpn_spas12_m2")
end
function actor_have_spas12_m3(actor,npc)
   return db.actor:object("wpn_spas12_m3")
end
function actor_have_groza_m1(actor,npc)
   return db.actor:object("wpn_groza_m1")
end
function actor_have_groza_m2(actor,npc)
   return db.actor:object("wpn_groza_m2")
end
function actor_have_groza_m3(actor,npc)
   return db.actor:object("wpn_groza")
end
function actor_have_lr300_m1(actor,npc)
   return db.actor:object("wpn_lr300_m1")
end
function actor_have_lr300_m2(actor,npc)
   return db.actor:object("wpn_lr300_m2")
end
function actor_have_lr300_m3(actor,npc)
   return db.actor:object("wpn_lr300_m3")
end
function actor_have_mp5_m1(actor,npc)
   return db.actor:object("wpn_mp5_m1")
end
function actor_have_mp5_m2(actor,npc)
   return db.actor:object("wpn_mp5_m2")
end
function actor_have_mp5_m3(actor,npc)
   return db.actor:object("wpn_mp5_m3")
end
function actor_have_toz34_m1(actor,npc)
   return db.actor:object("wpn_toz34_m1")
end
function actor_have_toz34_m2(actor,npc)
   return db.actor:object("wpn_toz34_m2")
end
function actor_have_toz34_m3(actor,npc)
   return db.actor:object("wpn_toz34_m3")
end
function actor_have_vintorez_m1(actor,npc)
   return db.actor:object("wpn_vintorez_m1")
end
function actor_have_vintorez_m2(actor,npc)
   return db.actor:object("wpn_vintorez")
end
function actor_have_vintorez_m3(actor,npc)
   return db.actor:object("wpn_vintorez_m3")
end
function actor_have_wincheaster1300_m1(actor,npc)
   return db.actor:object("wpn_wincheaster1300_m1")
end
function actor_have_wincheaster1300_m2(actor,npc)
   return db.actor:object("wpn_wincheaster1300_m2")
end
function actor_have_wincheaster1300_m3(actor,npc)
   return db.actor:object("wpn_wincheaster1300_m3")
end
function actor_have_l85_tactical(actor,npc)
   return db.actor:object("wpn_l85_tactical")
end
function actor_have_g43(actor,npc)
   return db.actor:object("wpn_g43")
end
function actor_have_ppsh41_rusty(actor,npc)
   return db.actor:object("wpn_ppsh41_rusty")
end
function actor_have_ak74_tactic(actor,npc)
   return db.actor:object("wpn_ak74_tactic")
end
function actor_have_ak74_pacific(actor,npc)
   return db.actor:object("wpn_ak74_pacific")
end
function actor_have_fn2000_hurricane(actor,npc)
   return db.actor:object("wpn_fn2000_hurricane")
end
function actor_have_flamewerfer(actor,npc)
   return db.actor:object("wpn_flamewerfer")
end
function actor_have_g36_sniper(actor,npc)
   return db.actor:object("wpn_g36_sniper")
end
function actor_have_toz34_pathfinder(actor,npc)
   return db.actor:object("wpn_toz34_pathfinder")
end
function actor_have_ak47(actor,npc)
   return db.actor:object("wpn_ak47")
end
function actor_have_awm(actor,npc)
   return db.actor:object("wpn_awm")
end
function actor_have_fanfall(actor,npc)
   return db.actor:object("wpn_fanfall")
end
function actor_have_grom(actor,npc)
   return db.actor:object("wpn_grom")
end
function actor_have_m4a1(actor,npc)
   return db.actor:object("wpn_m4a1")
end
function actor_have_m14(actor,npc)
   return db.actor:object("wpn_m14")
end
function actor_have_m82(actor,npc)
   return db.actor:object("wpn_m82")
end
function actor_have_mosina(actor,npc)
   return db.actor:object("wpn_mosina")
end
function actor_have_mosina_rusty(actor,npc)
   return db.actor:object("wpn_mosina_rusty")
end
function actor_have_mossberg590(actor,npc)
   return db.actor:object("wpn_mossberg590")
end
function actor_have_ppsh41(actor,npc)
   return db.actor:object("wpn_ppsh41")
end
function actor_have_ak101(actor,npc)
   return db.actor:object("wpn_ak101")
end
function actor_have_ak105(actor,npc)
   return db.actor:object("wpn_ak105")
end
function actor_have_mp5_octopus(actor,npc)
   return db.actor:object("wpn_mp5_octopus")
end
function actor_have_lr300_limit(actor,npc)
   return db.actor:object("wpn_lr300_limit")
end
function actor_have_svd_tiger(actor,npc)
   return db.actor:object("wpn_svd_tiger")
end
function actor_have_fnfal(actor,npc)
   return db.actor:object("wpn_fnfal")
end
function actor_have_bm16_full(actor,npc)
   return db.actor:object("wpn_bm16_full")
end
function actor_have_p90(actor,npc)
   return db.actor:object("wpn_p90")
end
function actor_have_xm8(actor,npc)
   return db.actor:object("wpn_xm8")
end
function actor_have_gauss_n(actor,npc)
   return db.actor:object("wpn_gauss_n")
end
function actor_have_ksvk(actor,npc)
   return db.actor:object("wpn_ksvk")
end
function actor_have_m1000(actor,npc)
   return db.actor:object("wpn_m1000")
end
function actor_have_m200(actor,npc)
   return db.actor:object("wpn_m200")
end
function actor_have_dsr1(actor,npc)
   return db.actor:object("wpn_dsr1")
end
function actor_have_hk417(actor,npc)
   return db.actor:object("wpn_hk417")
end
function actor_have_famasf1(actor,npc)
   return db.actor:object("wpn_famasf1")
end
function actor_have_m16a2(actor,npc)
   return db.actor:object("wpn_ak101")
end
function actor_have_m4a1h(actor,npc)
   return db.actor:object("wpn_m4a1h")
end
function actor_have_m4a1mk(actor,npc)
   return db.actor:object("wpn_m4a1mk")
end
function actor_have_g36e(actor,npc)
   return db.actor:object("wpn_g36e")
end
function actor_have_byril(actor,npc)
   return db.actor:object("wpn_byril")
end
function actor_have_hk416a(actor,npc)
   return db.actor:object("wpn_hk416a")
end
function actor_have_tac_aug(actor,npc)
   return db.actor:object("wpn_tac_aug")
end
function actor_have_fnscar(actor,npc)
   return db.actor:object("wpn_fnscar")
end
function actor_have_saiga(actor,npc)
   return db.actor:object("wpn_saiga")
end
function actor_have_vepr(actor,npc)
   return db.actor:object("wpn_vepr")
end
function actor_have_marauder(actor,npc)
   return db.actor:object("wpn_marauder")
end
function actor_have_striker(actor,npc)
   return db.actor:object("wpn_striker")
end
function actor_have_aek971(actor,npc)
   return db.actor:object("wpn_aek971")
end
function actor_have_vihr(actor,npc)
   return db.actor:object("wpn_vihr")
end
function actor_have_akm(actor,npc)
   return db.actor:object("wpn_akm")
end
function actor_have_ak107(actor,npc)
   return db.actor:object("wpn_ak107")
end
function actor_have_kriss(actor,npc)
   return db.actor:object("wpn_kriss")
end
function actor_have_ump45m(actor,npc)
   return db.actor:object("wpn_ump45m")
end
function actor_have_bizon(actor,npc)
   return db.actor:object("wpn_bizon")
end
function actor_have_tis(actor,npc)
   return db.actor:object("wpn_tis")
end
function actor_have_m60(actor,npc)
   return db.actor:object("wpn_m60")
end
function actor_have_rpk(actor,npc)
   return db.actor:object("wpn_rpk")
end
function actor_have_gauss_n(actor,npc)
   return db.actor:object("wpn_trg42")
end
function actor_have_bm16_full(actor,npc)
   return db.actor:object("wpn_trg42")
end
function actor_have_p90(actor,npc)
   return db.actor:object("wpn_trg42")
end
function actor_have_kar98k(actor,npc)
   return db.actor:object("wpn_trg42")
end
function actor_have_sks(actor,npc)
   return db.actor:object("wpn_trg42")
end
function actor_have_trg42(actor,npc)
   return db.actor:object("wpn_trg42")
end
--/
function actor_sent_bodyguard(npc,slot,item)
   release_old_weapon(npc,slot)
   relocate_weapon_to_bodyguard(npc,item,"out")
   if slot==2 then
      sgm_functions.write_obj_variable(npc,"issued_pistol_weapon",item)
   elseif slot==3 then
      sgm_functions.write_obj_variable(npc,"issued_rifle_weapon",item)
   end
end
function actor_give_pm(actor,npc)
   actor_sent_bodyguard(npc,2,"wpn_pm")
end
function actor_give_pb(actor,npc)
   actor_sent_bodyguard(npc,2,"wpn_pb")
end
function actor_give_fort(actor,npc)
   actor_sent_bodyguard(npc,2,"wpn_fort")
end
function actor_give_hpsa(actor,npc)
   actor_sent_bodyguard(npc,2,"wpn_hpsa")
end
function actor_give_beretta(actor,npc)
   actor_sent_bodyguard(npc,2,"wpn_beretta")
end
function actor_give_walther(actor,npc)
   actor_sent_bodyguard(npc,2,"wpn_walther")
end
function actor_give_sig220(actor,npc)
   actor_sent_bodyguard(npc,2,"wpn_sig220")
end
function actor_give_colt1911(actor,npc)
   actor_sent_bodyguard(npc,2,"wpn_colt1911")
end
function actor_give_usp(actor,npc)
   actor_sent_bodyguard(npc,2,"wpn_usp")
end
function actor_give_desert_eagle(actor,npc)
   actor_sent_bodyguard(npc,2,"wpn_desert_eagle")
end
function actor_give_pm_actor(actor,npc)
   actor_sent_bodyguard(npc,2,"wpn_pm_actor")
end
function actor_give_desert_eagle_nimble(actor,npc)
   actor_sent_bodyguard(npc,2,"wpn_desert_eagle_nimble")
end
function actor_give_sig220_nimble(actor,npc)
   actor_sent_bodyguard(npc,2,"wpn_sig220_nimble")
end
function actor_give_usp_nimble(actor,npc)
   actor_sent_bodyguard(npc,2,"wpn_usp_nimble")
end
function actor_give_fort_snag(actor,npc)
   actor_sent_bodyguard(npc,2,"wpn_fort_snag")
end
function actor_give_fort_actor(actor,npc)
   actor_sent_bodyguard(npc,2,"wpn_fort_actor")
end
function actor_give_beretta_m1(actor,npc)
   actor_sent_bodyguard(npc,2,"wpn_beretta_m1")
end
function actor_give_beretta_m2(actor,npc)
   actor_sent_bodyguard(npc,2,"wpn_beretta_m2")
end
function actor_give_beretta_m3(actor,npc)
   actor_sent_bodyguard(npc,2,"wpn_beretta_m3")
end
function actor_give_fort_m1(actor,npc)
   actor_sent_bodyguard(npc,2,"wpn_fort_m1")
end
function actor_give_fort_m2(actor,npc)
   actor_sent_bodyguard(npc,2,"wpn_fort_m2")
end
function actor_give_fort_m3(actor,npc)
   actor_sent_bodyguard(npc,2,"wpn_fort_m3")
end
function actor_give_pm_m1(actor,npc)
   actor_sent_bodyguard(npc,2,"wpn_pm_m1")
end
function actor_give_pm_m2(actor,npc)
   actor_sent_bodyguard(npc,2,"wpn_pm_m2")
end
function actor_give_pm_m3(actor,npc)
   actor_sent_bodyguard(npc,2,"wpn_pm_m3")
end
function actor_give_sig220_m1(actor,npc)
   actor_sent_bodyguard(npc,2,"wpn_sig220_m1")
end
function actor_give_sig220_m2(actor,npc)
   actor_sent_bodyguard(npc,2,"wpn_sig220_m2")
end
function actor_give_sig220_m3(actor,npc)
   actor_sent_bodyguard(npc,2,"wpn_sig220_m3")
end
function actor_give_autocolt(actor,npc)
   actor_sent_bodyguard(npc,2,"wpn_autocolt")
end
function actor_give_apb(actor,npc)
   actor_sent_bodyguard(npc,2,"wpn_apb")
end
function actor_give_cobra(actor,npc)
   actor_sent_bodyguard(npc,2,"wpn_cobra")
end
function actor_give_gp100(actor,npc)
   release_old_weapon(npc,2)
   relocate_weapon_to_bodyguard(npc,"wpn_gp100","out")
   sgm_functions.write_obj_variable(npc,"issued_pistol_weapon","wpn_gp100")
end
function actor_give_gau(actor,npc)
   release_old_weapon(npc,2)
   relocate_weapon_to_bodyguard(npc,"wpn_gau","out")
   sgm_functions.write_obj_variable(npc,"issued_pistol_weapon","wpn_gau")
end
function actor_give_oc33(actor,npc)
   release_old_weapon(npc,2)
   relocate_weapon_to_bodyguard(npc,"wpn_oc33","out")
   sgm_functions.write_obj_variable(npc,"issued_pistol_weapon","wpn_oc33")
end
function actor_give_fiveseven(actor,npc)
   release_old_weapon(npc,2)
   relocate_weapon_to_bodyguard(npc,"wpn_fiveseven","out")
   sgm_functions.write_obj_variable(npc,"issued_pistol_weapon","wpn_fiveseven")
end
---
function actor_give_bm16(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_bm16")
end
function actor_give_toz34(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_toz34")
end
function actor_give_wincheaster1300(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_wincheaster1300")
end
function actor_give_spas12(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_spas12")
end
function actor_give_protecta(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_protecta")
end
function actor_give_ak74u(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_ak74u")
end
function actor_give_mp5(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_mp5")
end
function actor_give_ak74(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_ak74")
end
function actor_give_abakan(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_abakan")
end
function actor_give_l85(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_l85")
end
function actor_give_lr300(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_lr300")
end
function actor_give_sig550(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_sig550")
end
function actor_give_groza(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_groza")
end
function actor_give_val(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_val")
end
function actor_give_vintorez(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_vintorez")
end
function actor_give_svu(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_svu")
end
function actor_give_svd(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_svd")
end
function actor_give_rg_6(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_rg-6")
end
function actor_give_rpg7(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_rpg7")
end
function actor_give_g36(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_g36")
end
function actor_give_fn2000(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_fn2000")
end
function actor_give_pkm(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_pkm")
end
function actor_give_gauss(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_gauss")
end
function actor_give_sig550_luckygun(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_sig550_luckygun")
end
function actor_give_pkm_zulus(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_pkm_zulus")
end
function actor_give_wincheaster1300_trapper(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_wincheaster1300_trapper")
end
function actor_give_groza_nimble(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_groza_nimble")
end
function actor_give_mp5_nimble(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_mp5_nimble")
end
function actor_give_spas12_nimble(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_spas12_nimble")
end
function actor_give_svd_nimble(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_svd_nimble")
end
function actor_give_svu_nimble(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_svu_nimble")
end
function actor_give_vintorez_nimble(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_vintorez_nimble")
end
function actor_give_g36_nimble(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_g36_nimble")
end
function actor_give_fn2000_nimble(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_fn2000_nimble")
end
function actor_give_protecta_nimble(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_protecta_nimble")
end
function actor_give_ak74u_snag(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_ak74u_snag")
end
function actor_give_abakan_m1(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_abakan_m1")
end
function actor_give_abakan_m2(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_abakan_m2")
end
function actor_give_abakan_m3(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_abakan_m3")
end
function actor_give_ak74u_m1(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_ak74u_m1")
end
function actor_give_ak74u_m2(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_ak74u_m2")
end
function actor_give_ak74u_m3(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_ak74u_m3")
end
function actor_give_ak74_m1(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_ak74_m1")
end
function actor_give_ak74_m2(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_ak74_m2")
end
function actor_give_ak74_m3(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_ak74_m3")
end
function actor_give_bm16_m1(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_bm16_m1")
end
function actor_give_bm16_m2(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_bm16_m2")
end
function actor_give_bm16_m3(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_bm16_m3")
end
function actor_give_sig550_m1(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_sig550_m1")
end
function actor_give_sig550_m2(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_sig550_m2")
end
function actor_give_sig550_m3(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_sig550_m3")
end
function actor_give_spas12_m1(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_spas12_m1")
end
function actor_give_spas12_m2(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_spas12_m2")
end
function actor_give_spas12_m3(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_spas12_m3")
end
function actor_give_groza_m1(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_groza_m1")
end
function actor_give_groza_m2(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_groza_m2")
end
function actor_give_groza_m3(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_groza")
end
function actor_give_lr300_m1(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_lr300_m1")
end
function actor_give_lr300_m2(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_lr300_m2")
end
function actor_give_lr300_m3(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_lr300_m3")
end
function actor_give_mp5_m1(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_mp5_m1")
end
function actor_give_mp5_m2(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_mp5_m2")
end
function actor_give_mp5_m3(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_mp5_m3")
end
function actor_give_toz34_m1(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_toz34_m1")
end
function actor_give_toz34_m2(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_toz34_m2")
end
function actor_give_toz34_m3(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_toz34_m3")
end
function actor_give_vintorez_m1(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_vintorez_m1")
end
function actor_give_vintorez_m2(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_vintorez")
end
function actor_give_vintorez_m3(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_vintorez_m3")
end
function actor_give_wincheaster1300_m1(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_wincheaster1300_m1")
end
function actor_give_wincheaster1300_m2(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_wincheaster1300_m2")
end
function actor_give_wincheaster1300_m3(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_wincheaster1300_m3")
end
function actor_give_fnfal(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_fnfal")
end
function actor_give_bm16_full(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_bm16_full")
end
function actor_give_l85_tactical(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_l85_tactical")
end
function actor_give_g43(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_g43")
end
function actor_give_ppsh41_rusty(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_ppsh41_rusty")
end
function actor_give_ak74_tactic(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_ak74_tactic")
end
function actor_give_ak74_pacific(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_ak74_pacific")
end
function actor_give_fn2000_hurricane(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_fn2000_hurricane")
end
function actor_give_flamewerfer(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_flamewerfer")
end
function actor_give_g36_sniper(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_g36_sniper")
end
function actor_give_toz34_pathfinder(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_toz34_pathfinder")
end
function actor_give_ak47(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_ak47")
end
function actor_give_awm(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_awm")
end
function actor_give_fanfall(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_fanfall")
end
function actor_give_grom(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_grom")
end
function actor_give_m4a1(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_m4a1")
end
function actor_give_m14(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_m14")
end
function actor_give_m82(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_m82")
end
function actor_give_mosina(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_mosina")
end
function actor_give_mosina_rusty(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_mosina_rusty")
end
function actor_give_mossberg590(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_mossberg590")
end
function actor_give_ppsh41(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_ppsh41")
end
function actor_give_ak101(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_ak101")
end
function actor_give_ak105(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_ak105")
end
function actor_give_mp5_octopus(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_mp5_octopus")
end
function actor_give_lr300_limit(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_lr300_limit")
end
function actor_give_svd_tiger(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_svd_tiger")
end
function actor_give_p90(actor,npc)
   actor_sent_bodyguard(npc,3,"wpn_p90")
end
function actor_give_xm8(actor,npc)
   release_old_weapon(npc,3)
   relocate_weapon_to_bodyguard(npc,"wpn_xm8","out")
   sgm_functions.write_obj_variable(npc,"issued_rifle_weapon","wpn_xm8")
end
function actor_give_gauss_n(actor,npc)
   release_old_weapon(npc,3)
   relocate_weapon_to_bodyguard(npc,"wpn_gauss_n","out")
   sgm_functions.write_obj_variable(npc,"issued_rifle_weapon","wpn_gauss_n")
end
function actor_give_ksvk(actor,npc)
   release_old_weapon(npc,3)
   relocate_weapon_to_bodyguard(npc,"wpn_ksvk","out")
   sgm_functions.write_obj_variable(npc,"issued_rifle_weapon","wpn_ksvk")
end
function actor_give_m1000(actor,npc)
   release_old_weapon(npc,3)
   relocate_weapon_to_bodyguard(npc,"wpn_m1000","out")
   sgm_functions.write_obj_variable(npc,"issued_rifle_weapon","wpn_m1000")
end
function actor_give_m200(actor,npc)
   release_old_weapon(npc,3)
   relocate_weapon_to_bodyguard(npc,"wpn_m200","out")
   sgm_functions.write_obj_variable(npc,"issued_rifle_weapon","wpn_m200")
end
function actor_give_dsr1(actor,npc)
   release_old_weapon(npc,3)
   relocate_weapon_to_bodyguard(npc,"wpn_dsr1","out")
   sgm_functions.write_obj_variable(npc,"issued_rifle_weapon","wpn_dsr1")
end
function actor_give_hk417(actor,npc)
   release_old_weapon(npc,3)
   relocate_weapon_to_bodyguard(npc,"wpn_hk417","out")
   sgm_functions.write_obj_variable(npc,"issued_rifle_weapon","wpn_hk417")
end
function actor_give_famasf1(actor,npc)
   release_old_weapon(npc,3)
   relocate_weapon_to_bodyguard(npc,"wpn_famasf1","out")
   sgm_functions.write_obj_variable(npc,"issued_rifle_weapon","wpn_famasf1")
end
function actor_give_m16a2(actor,npc)
   release_old_weapon(npc,3)
   relocate_weapon_to_bodyguard(npc,"wpn_ak101","out")
   sgm_functions.write_obj_variable(npc,"issued_rifle_weapon","wpn_ak101")
end
function actor_give_m4a1h(actor,npc)
   release_old_weapon(npc,3)
   relocate_weapon_to_bodyguard(npc,"wpn_m4a1h","out")
   sgm_functions.write_obj_variable(npc,"issued_rifle_weapon","wpn_m4a1h")
end
function actor_give_m4a1mk(actor,npc)
   release_old_weapon(npc,3)
   relocate_weapon_to_bodyguard(npc,"wpn_m4a1mk","out")
   sgm_functions.write_obj_variable(npc,"issued_rifle_weapon","wpn_m4a1mk")
end
function actor_give_g36e(actor,npc)
   release_old_weapon(npc,3)
   relocate_weapon_to_bodyguard(npc,"wpn_g36e","out")
   sgm_functions.write_obj_variable(npc,"issued_rifle_weapon","wpn_g36e")
end
function actor_give_byril(actor,npc)
   release_old_weapon(npc,3)
   relocate_weapon_to_bodyguard(npc,"wpn_byril","out")
   sgm_functions.write_obj_variable(npc,"issued_rifle_weapon","wpn_byril")
end
function actor_give_hk416a(actor,npc)
   release_old_weapon(npc,3)
   relocate_weapon_to_bodyguard(npc,"wpn_hk416a","out")
   sgm_functions.write_obj_variable(npc,"issued_rifle_weapon","wpn_hk416a")
end
function actor_give_tac_aug(actor,npc)
   release_old_weapon(npc,3)
   relocate_weapon_to_bodyguard(npc,"wpn_tac_aug","out")
   sgm_functions.write_obj_variable(npc,"issued_rifle_weapon","wpn_tac_aug")
end
function actor_give_fnscar(actor,npc)
   release_old_weapon(npc,3)
   relocate_weapon_to_bodyguard(npc,"wpn_fnscar","out")
   sgm_functions.write_obj_variable(npc,"issued_rifle_weapon","wpn_fnscar")
end
function actor_give_saiga(actor,npc)
   release_old_weapon(npc,3)
   relocate_weapon_to_bodyguard(npc,"wpn_saiga","out")
   sgm_functions.write_obj_variable(npc,"issued_rifle_weapon","wpn_saiga")
end
function actor_give_vepr(actor,npc)
   release_old_weapon(npc,3)
   relocate_weapon_to_bodyguard(npc,"wpn_vepr","out")
   sgm_functions.write_obj_variable(npc,"issued_rifle_weapon","wpn_vepr")
end
function actor_give_marauder(actor,npc)
   release_old_weapon(npc,3)
   relocate_weapon_to_bodyguard(npc,"wpn_marauder","out")
   sgm_functions.write_obj_variable(npc,"issued_rifle_weapon","wpn_marauder")
end
function actor_give_striker(actor,npc)
   release_old_weapon(npc,3)
   relocate_weapon_to_bodyguard(npc,"wpn_striker","out")
   sgm_functions.write_obj_variable(npc,"issued_rifle_weapon","wpn_striker")
end
function actor_give_aek971(actor,npc)
   release_old_weapon(npc,3)
   relocate_weapon_to_bodyguard(npc,"wpn_aek971","out")
   sgm_functions.write_obj_variable(npc,"issued_rifle_weapon","wpn_aek971")
end
function actor_give_vihr(actor,npc)
   release_old_weapon(npc,3)
   relocate_weapon_to_bodyguard(npc,"wpn_vihr","out")
   sgm_functions.write_obj_variable(npc,"issued_rifle_weapon","wpn_vihr")
end
function actor_give_akm(actor,npc)
   release_old_weapon(npc,3)
   relocate_weapon_to_bodyguard(npc,"wpn_akm","out")
   sgm_functions.write_obj_variable(npc,"issued_rifle_weapon","wpn_akm")
end
function actor_give_ak107(actor,npc)
   release_old_weapon(npc,3)
   relocate_weapon_to_bodyguard(npc,"wpn_ak107","out")
   sgm_functions.write_obj_variable(npc,"issued_rifle_weapon","wpn_ak107")
end
function actor_give_kriss(actor,npc)
   release_old_weapon(npc,3)
   relocate_weapon_to_bodyguard(npc,"wpn_kriss","out")
   sgm_functions.write_obj_variable(npc,"issued_rifle_weapon","wpn_kriss")
end
function actor_give_ump45m(actor,npc)
   release_old_weapon(npc,3)
   relocate_weapon_to_bodyguard(npc,"wpn_ump45m","out")
   sgm_functions.write_obj_variable(npc,"issued_rifle_weapon","wpn_ump45m")
end
function actor_give_bizon(actor,npc)
   release_old_weapon(npc,3)
   relocate_weapon_to_bodyguard(npc,"wpn_bizon","out")
   sgm_functions.write_obj_variable(npc,"issued_rifle_weapon","wpn_bizon")
end
function actor_give_tis(actor,npc)
   release_old_weapon(npc,3)
   relocate_weapon_to_bodyguard(npc,"wpn_tis","out")
   sgm_functions.write_obj_variable(npc,"issued_rifle_weapon","wpn_tis")
end
function actor_give_m60(actor,npc)
   release_old_weapon(npc,3)
   relocate_weapon_to_bodyguard(npc,"wpn_m60","out")
   sgm_functions.write_obj_variable(npc,"issued_rifle_weapon","wpn_m60")
end
function actor_give_rpk(actor,npc)
   release_old_weapon(npc,3)
   relocate_weapon_to_bodyguard(npc,"wpn_rpk","out")
   sgm_functions.write_obj_variable(npc,"issued_rifle_weapon","wpn_rpk")
end
function actor_give_gauss_n(actor,npc)
   release_old_weapon(npc,3)
   relocate_weapon_to_bodyguard(npc,"wpn_gauss_n","out")
   sgm_functions.write_obj_variable(npc,"issued_rifle_weapon","wpn_gauss_n")
end
function actor_give_bm16_full(actor,npc)
   release_old_weapon(npc,3)
   relocate_weapon_to_bodyguard(npc,"wpn_bm16_full","out")
   sgm_functions.write_obj_variable(npc,"issued_rifle_weapon","wpn_bm16_full")
end
function actor_give_p90(actor,npc)
   release_old_weapon(npc,3)
   relocate_weapon_to_bodyguard(npc,"wpn_p90","out")
   sgm_functions.write_obj_variable(npc,"issued_rifle_weapon","wpn_p90")
end
function actor_give_kar98k(actor,npc)
   release_old_weapon(npc,3)
   relocate_weapon_to_bodyguard(npc,"wpn_kar98k","out")
   sgm_functions.write_obj_variable(npc,"issued_rifle_weapon","wpn_kar98k")
end
function actor_give_sks(actor,npc)
   release_old_weapon(npc,3)
   relocate_weapon_to_bodyguard(npc,"wpn_sks","out")
   sgm_functions.write_obj_variable(npc,"issued_rifle_weapon","wpn_sks")
end
function actor_give_trg42(actor,npc)
   release_old_weapon(npc,3)
   relocate_weapon_to_bodyguard(npc,"wpn_trg42","out")
   sgm_functions.write_obj_variable(npc,"issued_rifle_weapon","wpn_trg42")
end
--/
function actor_have_medkit(actor,npc)
   return db.actor:object("medkit")
end
function actor_have_medkit_army(actor,npc)
   return db.actor:object("medkit_army")
end
function actor_have_medkit_scientic(actor,npc)
   return db.actor:object("medkit_scientic")
end
function actor_have_medkit_elite(actor,npc)
   return db.actor:object("medkit_elite")
end
function actor_give_medkit(actor,npc)
   dialogs.relocate_item_section(npc,"medkit","out")
   sgm_functions.write_obj_variable(npc,"issued_medkit","medkit")
end
function actor_give_medkit_army(actor,npc)
   dialogs.relocate_item_section(npc,"medkit_army","out")
   sgm_functions.write_obj_variable(npc,"issued_medkit","medkit_army")
end
function actor_give_medkit_scientic(actor,npc)
   dialogs.relocate_item_section(npc,"medkit_scientic","out")
   sgm_functions.write_obj_variable(npc,"issued_medkit","medkit_scientic")
end
function actor_give_medkit_elite(actor,npc)
   dialogs.relocate_item_section(npc,"medkit_elite","out")
   sgm_functions.write_obj_variable(npc,"issued_medkit","medkit_elite")
end
------------------------------------------------------------------------------
--                  Сыч: продажа информации об инструментах                 --
------------------------------------------------------------------------------
local toolkit_1_counter=0
local toolkit_2_counter=0
local toolkit_3_counter=0
local toolkit_4_counter=0
local toolkit_5_counter=0
function pre_remained_any_toolkits(actor,npc)
   toolkit_1_counter=0
   toolkit_2_counter=0
   toolkit_3_counter=0
   toolkit_4_counter=0
   toolkit_5_counter=0
   for a=1,65534 do
      local obj = alife():object(a)
      if obj then
         if obj:section_name()~=nil and find_in_string(obj:section_name(),"toolkit_1") and find_out_string(obj:section_name(),"signaller") and level.map_has_object_spot(obj.id,sgm_flags.spot_toolkit_place)==0 and (level.object_by_id(obj.id)==nil or level.object_by_id(obj.id):parent()==nil) then
            toolkit_1_counter=toolkit_1_counter+1
         elseif obj:section_name()~=nil and find_in_string(obj:section_name(),"toolkit_2") and find_out_string(obj:section_name(),"signaller") and level.map_has_object_spot(obj.id,sgm_flags.spot_toolkit_place)==0 and (level.object_by_id(obj.id)==nil or level.object_by_id(obj.id):parent()==nil) then
            toolkit_2_counter=toolkit_2_counter+1
         elseif obj:section_name()~=nil and find_in_string(obj:section_name(),"toolkit_3") and find_out_string(obj:section_name(),"signaller") and level.map_has_object_spot(obj.id,sgm_flags.spot_toolkit_place)==0 and (level.object_by_id(obj.id)==nil or level.object_by_id(obj.id):parent()==nil) then
            toolkit_3_counter=toolkit_3_counter+1
         elseif obj:section_name()~=nil and find_in_string(obj:section_name(),"signaller_toolkit_1") and level.map_has_object_spot(obj.id,sgm_flags.spot_toolkit_place)==0 and (level.object_by_id(obj.id)==nil or level.object_by_id(obj.id):parent()==nil) then
            toolkit_4_counter=toolkit_4_counter+1
         elseif obj:section_name()~=nil and find_in_string(obj:section_name(),"signaller_toolkit_2") and level.map_has_object_spot(obj.id,sgm_flags.spot_toolkit_place)==0 and (level.object_by_id(obj.id)==nil or level.object_by_id(obj.id):parent()==nil) then
            toolkit_5_counter=toolkit_5_counter+1
         end
      end
   end
   return has_any_info("zat_a2_mechanic_toolkit_search,jup_b217_tech_instruments_start") and (toolkit_1_counter>0 or toolkit_2_counter>0 or toolkit_3_counter>0 or (has_alife_info("actor_come_to_pripyat") and (toolkit_4_counter>0 or toolkit_5_counter>0)))
end
function pre_remained_toolkit_1(actor,npc)
   return toolkit_1_counter>0
end
function pre_remained_toolkit_2(actor,npc)
   return toolkit_2_counter>0
end
function pre_remained_toolkit_3(actor,npc)
   return toolkit_3_counter>0
end
function pre_remained_toolkit_4(actor,npc)
   return toolkit_4_counter>0 and has_alife_info("actor_come_to_pripyat")
end
function pre_remained_toolkit_5(actor,npc)
   return toolkit_5_counter>0 and has_alife_info("actor_come_to_pripyat")
end
function pre_exhausted_toolkit_1(actor,npc)
   return toolkit_1_counter<=0
end
function pre_exhausted_toolkit_2(actor,npc)
   return toolkit_2_counter<=0
end
function pre_exhausted_toolkit_3(actor,npc)
   return toolkit_3_counter<=0
end
function pre_exhausted_toolkit_4(actor,npc)
   return toolkit_4_counter<=0 and has_alife_info("actor_come_to_pripyat")
end
function pre_exhausted_toolkit_5(actor,npc)
   return toolkit_5_counter<=0 and has_alife_info("actor_come_to_pripyat")
end
function has_money_on_toolkit_1(actor,npc)
   return db.actor:money()<3000
end
function has_money_on_toolkit_2(actor,npc)
   return db.actor:money()<5000
end
function has_money_on_toolkit_3(actor,npc)
   return db.actor:money()<7000
end
function has_money_on_toolkit_4(actor,npc)
   return db.actor:money()<6000
end
function has_money_on_toolkit_5(actor,npc)
   return db.actor:money()<8000
end
function not_money_on_toolkit_1(actor,npc)
   return db.actor:money()<3000
end
function not_money_on_toolkit_2(actor,npc)
   return db.actor:money()<5000
end
function not_money_on_toolkit_3(actor,npc)
   return db.actor:money()<7000
end
function not_money_on_toolkit_4(actor,npc)
   return db.actor:money()<6000
end
function not_money_on_toolkit_5(actor,npc)
   return db.actor:money()<8000
end
function give_money_on_toolkit_1(actor,npc)
   dialogs.relocate_money(npc,3000,"out")   
end
function give_money_on_toolkit_2(actor,npc)
   dialogs.relocate_money(npc,5000,"out")   
end
function give_money_on_toolkit_3(actor,npc)
   dialogs.relocate_money(npc,7000,"out")   
end
function give_money_on_toolkit_4(actor,npc)
   dialogs.relocate_money(npc,6000,"out")   
end
function give_money_on_toolkit_5(actor,npc)
   dialogs.relocate_money(npc,8000,"out")   
end
function reveal_toolkit(section,new)
   local reveal_step=0
   local toolkit_level="zaton"
   for a=1,65534 do
      local obj = alife():object(a)
      if obj and reveal_step==0 then
         if obj:section_name()~=nil and find_in_string(obj:section_name(),section) and ((new==false and find_out_string(obj:section_name(),"signaller")) or new==true) and level.map_has_object_spot(obj.id,sgm_flags.spot_toolkit_place)==0 and (level.object_by_id(obj.id)==nil or level.object_by_id(obj.id):parent()==nil) then
            if new==true then
               add_spot_on_map(obj.id,sgm_flags.spot_toolkit_place,"st_military_instruments_name")
            else
               add_spot_on_map(obj.id,sgm_flags.spot_toolkit_place,"st_simply_instruments_name")
            end
            toolkit_level=get_level_by_game_vertex(obj.m_game_vertex_id)
            reveal_step=1
         end
      end
   end
   if toolkit_level=="zaton" then
      news_manager.send_tip(db.actor,"st_reveal_toolkit_zaton_descr",0,"information_dealer",3500,nil,"st_from_pda_title")
   elseif toolkit_level=="jupiter" then
      news_manager.send_tip(db.actor,"st_reveal_toolkit_jupiter_descr",0,"information_dealer",3500,nil,"st_from_pda_title")
   elseif toolkit_level=="pripyat" then
      news_manager.send_tip(db.actor,"st_reveal_toolkit_pripyat_descr",0,"information_dealer",3500,nil,"st_from_pda_title")
   end
   reveal_step=0
end
function reveal_one_toolkit_1(actor,npc)
   reveal_toolkit("toolkit_1",false)
end
function reveal_one_toolkit_2(actor,npc)
   reveal_toolkit("toolkit_2",false)
end
function reveal_one_toolkit_3(actor,npc)
   reveal_toolkit("toolkit_3",false)
end
function reveal_one_toolkit_4(actor,npc)
   reveal_toolkit("signaller_toolkit_1",true)
end
function reveal_one_toolkit_5(actor,npc)
   reveal_toolkit("signaller_toolkit_2",true)
end
------------------------------------------------------------------------------
--      Проводники: доставка вещей в личные ящики на других локациях        --
------------------------------------------------------------------------------
--/НЕ РАБОТАЕТ/--
local actor_box_weight=0.0
local guide_cost_factor=50
function show_actor_box_weight_tip(actor,npc)
   db.actor:give_talk_message2("",game.translate_string("st_actor_box_currert_weight").." "..actor_box_weight,"ui_inGame2_Mp3_player","iconed_answer_item")
end
function show_actor_box_weight_and_cost_tip(actor,npc)
      db.actor:give_talk_message2("",game.translate_string("st_actor_box_currert_mass").." "..actor_box_weight..game.translate_string("st_actor_box_transportation_cost").." "..calculate_weight_cost(actor_box_weight),"ui_inGame2_Mp3_player","iconed_answer_item")
end
function set_actor_box_weight(actor,npc)
   local level_name=level.name()
   if level_name=="zaton" then
      actor_box_weight=get_actor_box_items_weight(get_story_object("zat_a2_actor_treasure"))
   elseif level_name=="jupiter" then
      actor_box_weight=get_actor_box_items_weight(get_story_object("jup_b202_actor_treasure"))
   elseif level_name=="pripyat" then
      actor_box_weight=get_actor_box_items_weight(get_story_object("pri_a16_actor_treasure"))
   end
end
function set_guide_factor_to_25(actor,npc)
   guide_cost_factor=25
end
function set_guide_factor_to_50(actor,npc)
   guide_cost_factor=50
end
function set_guide_factor_to_75(actor,npc)
   guide_cost_factor=75
end
function set_guide_factor_to_100(actor,npc)
   guide_cost_factor=100
end
function set_guide_factor_to_200(actor,npc)
   guide_cost_factor=200
end
function actor_box_has_items(actor,npc)
   return actor_box_weight>0
end
function actor_box_not_items(actor,npc)
   return actor_box_weight<=0
end
function get_actor_box_items_weight(box)
   local weight=0.0
   local function calc(temp,item)
      if item~=nil and item:section()~=nil then
         weight=weight+sgm_functions.ReadItemWeight(item:section())*item:condition()
      end
   end
   box:iterate_inventory_box(calc,box)
   return math.floor(weight)
end
function calculate_weight_cost(weight_value)
   return weight_value*guide_cost_factor 
end
function special_give_to_sid(item_name,sid,need_cond)
  local sobj
  if get_story_object_id(sid)~=nil then
     sobj=alife():create(item_name,vector(),0,0,get_story_object_id(sid))
  end
end
function inv_box_delivery_to(box_sid,target_sid)
   local parent_box = get_story_object(box_sid)
   local children_box = get_story_object(target_sid)
   if parent_box~=nil then
     local function calc(temp,item)
        if item~=nil and item:section()~=nil then
           --/parent_box:transfer_item(item,children_box) --/Не катит!!! Даже с get_story_object() обьект на другой локации не может получить предмет, та же история и с level.object_by_id().
           special_give_to_sid(item:section(),target_sid,item:condition())
           alife():release(alife():object(item:id()),true)
        end
     end
     parent_box:iterate_inventory_box(calc,parent_box)
   end
end
function actor_box_delivery_has_money(actor,npc)
   return db.actor:money()>=calculate_weight_cost(actor_box_weight)
end
function actor_box_delivery_not_money(actor,npc)
   return db.actor:money()<calculate_weight_cost(actor_box_weight)
end
function actor_box_delivery_give_money(actor,npc)
   dialogs.relocate_money(npc,calculate_weight_cost(actor_box_weight),"out")
end
function convert_actor_box_from_zaton_to_jupiter(actor,npc)
   inv_box_delivery_to("zat_a2_actor_treasure","jup_b202_actor_treasure")
end
function convert_actor_box_from_zaton_to_pripyat(actor,npc)
   inv_box_delivery_to("zat_a2_actor_treasure","pri_a16_actor_treasure")
end
function convert_actor_box_from_jupiter_to_zaton(actor,npc)
   inv_box_delivery_to("jup_b202_actor_treasure","zat_a2_actor_treasure")
end
function convert_actor_box_from_jupiter_to_pripyat(actor,npc)
   inv_box_delivery_to("jup_b202_actor_treasure","pri_a16_actor_treasure")
end
function convert_actor_box_from_pripyat_to_zaton(actor,npc)
   inv_box_delivery_to("pri_a16_actor_treasure","zat_a2_actor_treasure")
end
function convert_actor_box_from_pripyat_to_jupiter(actor,npc)
   inv_box_delivery_to("pri_a16_actor_treasure","jup_b202_actor_treasure")
end
------------------------------------------------------------------------------
--                         Сыч: продажа тайников                            --
------------------------------------------------------------------------------
web_money_treasure_level=level.name()
function web_money_treasure_select_zaton(actor, npc)
   web_money_treasure_level="zaton"
end
function web_money_treasure_select_jupiter(actor, npc)
   web_money_treasure_level="jupiter"
end
function web_money_treasure_select_pripyat(actor, npc)
   web_money_treasure_level="pripyat"
end
function web_money_treasure_select_darkvalley(actor, npc)
   web_money_treasure_level="darkvalley"
end
function actor_have_web_money_to_1_treasure(actor, npc)
   return get_web_money()>=1000
end
function actor_give_web_money_to_1_treasure(actor, npc)
   sgm_functions.relocate_web_money(1000,"out")
   give_random_treasure(web_money_treasure_level,1)
end
function actor_have_web_money_to_2_treasure(actor, npc)
   return get_web_money()>=2000
end
function actor_give_web_money_to_2_treasure(actor, npc)
   sgm_functions.relocate_web_money(2000,"out")
   give_random_treasure(web_money_treasure_level,2)
end
function actor_have_web_money_to_3_treasure(actor, npc)
   return get_web_money()>=3000
end
function actor_give_web_money_to_3_treasure(actor, npc)
   sgm_functions.relocate_web_money(3000,"out")
   give_random_treasure(web_money_treasure_level,3)
end
function actor_have_web_money_to_4_treasure(actor, npc)
   return get_web_money()>=4000
end
function actor_give_web_money_to_4_treasure(actor, npc)
   sgm_functions.relocate_web_money(4000,"out")
   give_random_treasure(web_money_treasure_level,4)
end
function actor_have_web_money_to_5_treasure(actor, npc)
   return get_web_money()>=5000
end
function actor_give_web_money_to_5_treasure(actor, npc)
   sgm_functions.relocate_web_money(5000,"out")
   give_random_treasure(web_money_treasure_level,5)
end
function actor_have_web_money_to_6_treasure(actor, npc)
   return get_web_money()>=6000
end
function actor_give_web_money_to_6_treasure(actor, npc)
   sgm_functions.relocate_web_money(6000,"out")
   give_random_treasure(web_money_treasure_level,6)
end
function actor_have_web_money_to_7_treasure(actor, npc)
   return get_web_money()>=7000
end
function actor_give_web_money_to_7_treasure(actor, npc)
   sgm_functions.relocate_web_money(7000,"out")
   give_random_treasure(web_money_treasure_level,7)
end
function actor_have_web_money_to_8_treasure(actor, npc)
   return get_web_money()>=8000
end
function actor_give_web_money_to_8_treasure(actor, npc)
   sgm_functions.relocate_web_money(8000,"out")
   give_random_treasure(web_money_treasure_level,8)
end
function actor_less_web_money_to_treasure(actor, npc)
   return get_web_money()<1000
end
------------------------------------------------------------------------------
--                    Герман: покупка неизвестных образцов                  --
------------------------------------------------------------------------------
local german_reward=0
local german_sample_cost=5000
function german_sample_is_retail(actor,npc)
   return not check_item_count("_danger",2,true)
end
function german_sample_is_gross(actor,npc)
   return check_item_count("_danger",2,true)
end
function german_sample_anyhas(actor,npc)
   local result=false
   for i=1,6 do
      if db.actor:object("af_prodigy_"..i.."_danger") then
         result=true
      end
   end
   if dont_has_alife_info("jup_search_anomal_prototype_gather_allowed") then
      result=false
   end
   return result
end
function german_bring_finded_sample(actor,npc)
   german_reward=0
   for i=1,6 do
      local sample_count=get_item_count("af_prodigy_"..i.."_danger")
      if sample_count>0 then
         german_reward=german_reward+german_sample_cost*sample_count
         dialogs.relocate_item_section_from_actor(actor,npc,"af_prodigy_"..i.."_danger","all")
      end
   end
end
function german_reward_money_for_sample(actor,npc)
   dialogs.relocate_money(npc,german_reward,"in")
end


-------------------------------------//Geonezis Addon for SGM 1.7//-------------------------------------------------
function jup_for_dolg_trader_actor_has_10000(first_speaker, second_speaker)
	return db.actor:money() >= 10000
end

function jup_for_dolg_trader_hasnt_10000(first_speaker, second_speaker)
	return db.actor:money() < 10000
end

function transfer_money_to_dolg_trader_for_box1(first_speaker, second_speaker)	
	local amount = 10000	
	dialogs.relocate_money_from_actor(first_speaker, second_speaker, amount)
end

function transfer_box1_to_actor_from_dolg_trader(first_speaker, second_speaker)	
	dialogs.relocate_item_section_to_actor(first_speaker, second_speaker, "itm_gunsmith_toolkit")	
end

function jup_for_dolg_trader_actor_has_12000(first_speaker, second_speaker)
	return db.actor:money() >= 12000
end

function jup_for_dolg_trader_hasnt_12000(first_speaker, second_speaker)
	return db.actor:money() < 12000
end

function transfer_money_to_dolg_trader_for_box2(first_speaker, second_speaker)	
	local amount = 12000	
	dialogs.relocate_money_from_actor(first_speaker, second_speaker, amount)
end

function transfer_box2_to_actor_from_dolg_trader(first_speaker, second_speaker)	
	dialogs.relocate_item_section_to_actor(first_speaker, second_speaker, "itm_outfit_toolkit")	
end
